import{A as Pt,H as At,M as Nt,d as $t,e as It,N as Rt,O as Ct,T as Ot,W as Bt,Z as jt,L as v,v as q,J as re,f as B,B as je,h as le,j as ue,k as De,l as Ue,m as ee,n as et,o as Re,p as tt,q as G,P as rt,t as Ce,u as te,w as st,x as nt,y as ot,z as at,F as Dt,C as Ut,R as Mt,D as Ft,E as qt,G as Ht,I as Lt,K as Wt,Q as zt,S as Gt,U as Jt,V as Vt,X as Yt,Y as Kt,_ as Zt,$ as Xt,a0 as Qt,a1 as er,a2 as tr,a3 as rr,a4 as sr,a5 as nr,a6 as or,a7 as ar,a8 as ir,a9 as lr,aa as cr,ab as ur,ac as dr,ad as hr,ae as fr,af as gr,ag as pr,ah as mr,ai as br,aj as vr,ak as yr,al as wr,am as _r,an as kr,ao as Er,ap as xr,aq as Sr,ar as Tr,as as Pr,at as Ar,au as Nr,av as $r,aw as Ir,ax as Rr,ay as Cr,az as Or,aA as Br,aB as jr,aC as Dr,aD as Ur,aE as Mr,aF as Fr,aG as qr,aH as Hr,aI as Lr,aJ as Wr,aK as zr,aL as Gr,aM as Jr,aN as Vr,aO as Yr,aP as Kr,aQ as Zr,aR as Xr,aS as Qr,aT as es,aU as ts,aV as rs,aW as ss,aX as ns,aY as os,aZ as as,a_ as is,a$ as ls,b0 as cs,b1 as us,b2 as ds,b3 as hs,b4 as fs,b5 as gs,b6 as ps,b7 as ms,b8 as bs,b9 as vs,ba as ys,bb as ws,bc as it,bd as _s,be as ks,bf as Es,bg as xs,bh as we,bi as Ss,bj as Ts,bk as Ps,c as As,g as Ns,bl as de,bm as he,bn as F,bo as $,bp as S,bq as j,br as y,bs as P,bt as _,bu as k,bv as D,bw as C,bx as X,by as V,bz as _e,bA as L,bB as lt,bC as H,bD as oe,bE as $s,bF as Se,bG as Oe,bH as qe,bI as se,bJ as Be,bK as ke,bL as ct,bM as He,bN as Z,bO as ut,bP as Is,bQ as Rs}from"./index-440366fb.js";const Cs="Ξ",Os=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:Pt,EtherSymbol:Cs,HashZero:At,MaxInt256:Nt,MaxUint256:$t,MinInt256:It,NegativeOne:Rt,One:Ct,Two:Ot,WeiPerEther:Bt,Zero:jt},Symbol.toStringTag,{value:"Module"}));let ce=null;try{if(ce=WebSocket,ce==null)throw new Error("inject please")}catch{const t=new v(q);ce=function(){t.throwError("WebSockets not supported in this environment",v.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Ne=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(d){try{u(r.next(d))}catch(g){a(g)}}function i(d){try{u(r.throw(d))}catch(g){a(g)}}function u(d){d.done?o(d.value):s(d.value).then(c,i)}u((r=r.apply(n,t||[])).next())})};const fe=new v(q);let Bs=1;class Te extends re{constructor(t,e){e==="any"&&fe.throwError("WebSocketProvider does not support 'any' network yet",v.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof t=="string"?super(t,e):super("_websocket",e),this._pollingInterval=-1,this._wsReady=!1,typeof t=="string"?B(this,"_websocket",new ce(this.connection.url)):B(this,"_websocket",t),B(this,"_requests",{}),B(this,"_subs",{}),B(this,"_subIds",{}),B(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(s=>{this.websocket.send(this._requests[s].payload)})},this.websocket.onmessage=s=>{const o=s.data,a=JSON.parse(o);if(a.id!=null){const c=String(a.id),i=this._requests[c];if(delete this._requests[c],a.result!==void 0)i.callback(null,a.result),this.emit("debug",{action:"response",request:JSON.parse(i.payload),response:a.result,provider:this});else{let u=null;a.error?(u=new Error(a.error.message||"unknown error"),B(u,"code",a.error.code||null),B(u,"response",o)):u=new Error("unknown error"),i.callback(u,void 0),this.emit("debug",{action:"response",error:u,request:JSON.parse(i.payload),provider:this})}}else if(a.method==="eth_subscription"){const c=this._subs[a.params.subscription];c&&c.processFunc(a.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(t){fe.throwError("cannot reset events block on WebSocketProvider",v.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(t){fe.throwError("cannot set polling interval on WebSocketProvider",v.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Ne(this,void 0,void 0,function*(){return null})}set polling(t){t&&fe.throwError("cannot set polling on WebSocketProvider",v.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(t,e){const r=Bs++;return new Promise((s,o)=>{function a(i,u){return i?o(i):s(u)}const c=JSON.stringify({method:t,params:e,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(c),provider:this}),this._requests[String(r)]={callback:a,payload:c},this._wsReady&&this.websocket.send(c)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(t,e,r){return Ne(this,void 0,void 0,function*(){let s=this._subIds[t];s==null&&(s=Promise.all(e).then(a=>this.send("eth_subscribe",a)),this._subIds[t]=s);const o=yield s;this._subs[o]={tag:t,processFunc:r}})}_startEvent(t){switch(t.type){case"block":this._subscribe("block",["newHeads"],e=>{const r=je.from(e.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],e=>{this.emit("pending",e)});break;case"filter":this._subscribe(t.tag,["logs",this._getFilter(t.filter)],e=>{e.removed==null&&(e.removed=!1),this.emit(t.filter,this.formatter.filterLog(e))});break;case"tx":{const e=r=>{const s=r.hash;this.getTransactionReceipt(s).then(o=>{o&&this.emit(s,o)})};e(t),this._subscribe("tx",["newHeads"],r=>{this._events.filter(s=>s.type==="tx").forEach(e)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",t);break}}_stopEvent(t){let e=t.tag;if(t.type==="tx"){if(this._events.filter(s=>s.type==="tx").length)return;e="tx"}else if(this.listenerCount(t.event))return;const r=this._subIds[e];r&&(delete this._subIds[e],r.then(s=>{this._subs[s]&&(delete this._subs[s],this.send("eth_unsubscribe",[s]))}))}destroy(){return Ne(this,void 0,void 0,function*(){this.websocket.readyState===ce.CONNECTING&&(yield new Promise(t=>{this.websocket.onopen=function(){t(!0)},this.websocket.onerror=function(){t(!1)}})),this.websocket.close(1e3)})}}var js=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(d){try{u(r.next(d))}catch(g){a(g)}}function i(d){try{u(r.throw(d))}catch(g){a(g)}}function u(d){d.done?o(d.value):s(d.value).then(c,i)}u((r=r.apply(n,t||[])).next())})};const ae=new v(q);class dt extends re{detectNetwork(){const t=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return js(this,void 0,void 0,function*(){let e=this.network;return e==null&&(e=yield t.detectNetwork.call(this),e||ae.throwError("no network detected",v.errors.UNKNOWN_ERROR,{}),this._network==null&&(B(this,"_network",e),this.emit("network",e,null))),e})}}class W extends dt{constructor(t,e){ae.checkAbstract(new.target,W),t=le(new.target,"getNetwork")(t),e=le(new.target,"getApiKey")(e);const r=le(new.target,"getUrl")(t,e);super(r,t),typeof e=="string"?B(this,"apiKey",e):e!=null&&Object.keys(e).forEach(s=>{B(this,s,e[s])})}_startPending(){ae.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(t){return ae.throwError("API provider does not support signing",v.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(t){return t}static getUrl(t,e){return ae.throwError("not implemented; sub-classes must override getUrl",v.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const Le=new v(q),ve="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class ht extends Te{constructor(t,e){const r=new Me(t,e),s=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(s,r.network),B(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===ve}}class Me extends W{static getWebSocketProvider(t,e){return new ht(t,e)}static getApiKey(t){return t==null?ve:(t&&typeof t!="string"&&Le.throwArgumentError("invalid apiKey","apiKey",t),t)}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"ropsten":r="eth-ropsten.alchemyapi.io/v2/";break;case"rinkeby":r="eth-rinkeby.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.alchemyapi.io/v2/";break;case"kovan":r="eth-kovan.alchemyapi.io/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-rinkeby":r="arb-rinkeby.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-kovan":r="opt-kovan.g.alchemy.com/v2/";break;default:Le.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+e,throttleCallback:(s,o)=>(e===ve&&ue(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===ve}}const Ds=new v(q),ge="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Us(n){switch(n){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return Ds.throwArgumentError("unsupported network","name",n)}class ft extends W{isCommunityResource(){return this.apiKey===ge}static getApiKey(t){return t??ge}static getUrl(t,e){e==null&&(e=ge);const r={allowGzip:!0,url:"https://"+Us(t.name)+e,throttleCallback:(s,o)=>(e.apiKey===ge&&ue(),Promise.resolve(!0))};return e.projectSecret!=null&&(r.user="",r.password=e.projectSecret),r}}var Ms=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(d){try{u(r.next(d))}catch(g){a(g)}}function i(d){try{u(r.throw(d))}catch(g){a(g)}}function u(d){d.done?o(d.value):s(d.value).then(c,i)}u((r=r.apply(n,t||[])).next())})};const We=new v(q);class gt extends W{static getApiKey(t){return t!=null&&We.throwArgumentError("apiKey not supported for cloudflare","apiKey",t),null}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="https://cloudflare-eth.com/";break;default:We.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return Ms(this,void 0,void 0,function*(){return t==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,t,e)})}}var pe=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(d){try{u(r.next(d))}catch(g){a(g)}}function i(d){try{u(r.throw(d))}catch(g){a(g)}}function u(d){d.done?o(d.value):s(d.value).then(c,i)}u((r=r.apply(n,t||[])).next())})};const J=new v(q);function ze(n){const t={};for(let e in n){if(n[e]==null)continue;let r=n[e];e==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[e]?r=et(Re(r)):e==="accessList"?r="["+tt(r).map(s=>`{address:"${s.address}",storageKeys:["${s.storageKeys.join('","')}"]}`).join(",")+"]":r=Re(r),t[e]=r)}return t}function Fs(n){if(n.status==0&&(n.message==="No records found"||n.message==="No transactions found"))return n.result;if(n.status!=1||n.message!="OK"){const t=new Error("invalid response");throw t.result=JSON.stringify(n),(n.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return n.result}function Ge(n){if(n&&n.status==0&&n.message=="NOTOK"&&(n.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");throw t.result=JSON.stringify(n),t.throttleRetry=!0,t}if(n.jsonrpc!="2.0"){const t=new Error("invalid response");throw t.result=JSON.stringify(n),t}if(n.error){const t=new Error(n.error.message||"unknown error");throw n.error.code&&(t.code=n.error.code),n.error.data&&(t.data=n.error.data),t}return n.result}function Je(n){if(n==="pending")throw new Error("pending not supported");return n==="latest"?n:parseInt(n.substring(2),16)}const Ve="9D13ZE7XSBTJ94N9BNJ2MA33VMAY2YPIRB";function $e(n,t,e){if(n==="call"&&t.code===v.errors.SERVER_ERROR){const s=t.error;if(s&&(s.message.match(/reverted/i)||s.message.match(/VM execution error/i))){let o=s.data;if(o&&(o="0x"+o.replace(/^.*0x/i,"")),G(o))return o;J.throwError("missing revert data in call exception",v.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let r=t.message;throw t.code===v.errors.SERVER_ERROR&&(t.error&&typeof t.error.message=="string"?r=t.error.message:typeof t.body=="string"?r=t.body:typeof t.responseText=="string"&&(r=t.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&J.throwError("insufficient funds for intrinsic transaction cost",v.errors.INSUFFICIENT_FUNDS,{error:t,method:n,transaction:e}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&J.throwError("nonce has already been used",v.errors.NONCE_EXPIRED,{error:t,method:n,transaction:e}),r.match(/another transaction with same nonce/)&&J.throwError("replacement fee too low",v.errors.REPLACEMENT_UNDERPRICED,{error:t,method:n,transaction:e}),r.match(/execution failed due to an exception|execution reverted/)&&J.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",v.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:n,transaction:e}),t}class pt extends De{constructor(t,e){super(t),B(this,"baseUrl",this.getBaseUrl()),B(this,"apiKey",e||Ve)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"ropsten":return"https://api-ropsten.etherscan.io";case"rinkeby":return"https://api-rinkeby.etherscan.io";case"kovan":return"https://api-kovan.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"optimism":return"https://api-optimistic.etherscan.io"}return J.throwArgumentError("unsupported network","network",this.network.name)}getUrl(t,e){const r=Object.keys(e).reduce((o,a)=>{const c=e[a];return c!=null&&(o+=`&${a}=${c}`),o},""),s=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${t}${r}${s}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(t,e){return e.module=t,e.apikey=this.apiKey,e}fetch(t,e,r){return pe(this,void 0,void 0,function*(){const s=r?this.getPostUrl():this.getUrl(t,e),o=r?this.getPostData(t,e):null,a=t==="proxy"?Ge:Fs;this.emit("debug",{action:"request",request:s,provider:this});const c={url:s,throttleSlotInterval:1e3,throttleCallback:(d,g)=>(this.isCommunityResource()&&ue(),Promise.resolve(!0))};let i=null;o&&(c.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},i=Object.keys(o).map(d=>`${d}=${o[d]}`).join("&"));const u=yield Ue(c,i,a||Ge);return this.emit("debug",{action:"response",request:s,response:ee(u),provider:this}),u})}detectNetwork(){return pe(this,void 0,void 0,function*(){return this.network})}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return pe(this,void 0,void 0,function*(){switch(t){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch(s=>$e("sendTransaction",s,e.signedTransaction));case"getBlock":if(e.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.transactionHash});case"call":{if(e.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const s=ze(e.transaction);s.module="proxy",s.action="eth_call";try{return yield this.fetch("proxy",s,!0)}catch(o){return $e("call",o,e.transaction)}}case"estimateGas":{const s=ze(e.transaction);s.module="proxy",s.action="eth_estimateGas";try{return yield this.fetch("proxy",s,!0)}catch(o){return $e("estimateGas",o,e.transaction)}}case"getLogs":{const s={action:"getLogs"};if(e.filter.fromBlock&&(s.fromBlock=Je(e.filter.fromBlock)),e.filter.toBlock&&(s.toBlock=Je(e.filter.toBlock)),e.filter.address&&(s.address=e.filter.address),e.filter.topics&&e.filter.topics.length>0&&(e.filter.topics.length>1&&J.throwError("unsupported topic count",v.errors.UNSUPPORTED_OPERATION,{topics:e.filter.topics}),e.filter.topics.length===1)){const c=e.filter.topics[0];(typeof c!="string"||c.length!==66)&&J.throwError("unsupported topic format",v.errors.UNSUPPORTED_OPERATION,{topic0:c}),s.topic0=c}const o=yield this.fetch("logs",s);let a={};for(let c=0;c<o.length;c++){const i=o[c];if(i.blockHash==null){if(a[i.blockNumber]==null){const u=yield this.getBlock(i.blockNumber);u&&(a[i.blockNumber]=u.hash)}i.blockHash=a[i.blockNumber]}}return o}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,t,e)})}getHistory(t,e,r){return pe(this,void 0,void 0,function*(){const s={action:"txlist",address:yield this.resolveName(t),startblock:e??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",s)).map(a=>{["contractAddress","to"].forEach(function(i){a[i]==""&&delete a[i]}),a.creates==null&&a.contractAddress!=null&&(a.creates=a.contractAddress);const c=this.formatter.transactionResponse(a);return a.timeStamp&&(c.timestamp=parseInt(a.timeStamp)),c})})}isCommunityResource(){return this.apiKey===Ve}}var Ee=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(d){try{u(r.next(d))}catch(g){a(g)}}function i(d){try{u(r.throw(d))}catch(g){a(g)}}function u(d){d.done?o(d.value):s(d.value).then(c,i)}u((r=r.apply(n,t||[])).next())})};const K=new v(q);function me(){return new Date().getTime()}function Ye(n){let t=null;for(let e=0;e<n.length;e++){const r=n[e];if(r==null)return null;t?t.name===r.name&&t.chainId===r.chainId&&(t.ensAddress===r.ensAddress||t.ensAddress==null&&r.ensAddress==null)||K.throwArgumentError("provider mismatch","networks",n):t=r}return t}function Ke(n,t){n=n.slice().sort();const e=Math.floor(n.length/2);if(n.length%2)return n[e];const r=n[e-1],s=n[e];return t!=null&&Math.abs(r-s)>t?null:(r+s)/2}function Q(n){if(n===null)return"null";if(typeof n=="number"||typeof n=="boolean")return JSON.stringify(n);if(typeof n=="string")return n;if(je.isBigNumber(n))return n.toString();if(Array.isArray(n))return JSON.stringify(n.map(t=>Q(t)));if(typeof n=="object"){const t=Object.keys(n);return t.sort(),"{"+t.map(e=>{let r=n[e];return typeof r=="function"?r="[function]":r=Q(r),JSON.stringify(e)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof n)}let qs=1;function Ze(n){let t=null,e=null,r=new Promise(a=>{t=function(){e&&(clearTimeout(e),e=null),a()},e=setTimeout(t,n)});const s=a=>(r=r.then(a),r);function o(){return r}return{cancel:t,getPromise:o,wait:s}}const Hs=[v.errors.CALL_EXCEPTION,v.errors.INSUFFICIENT_FUNDS,v.errors.NONCE_EXPIRED,v.errors.REPLACEMENT_UNDERPRICED,v.errors.UNPREDICTABLE_GAS_LIMIT],Ls=["address","args","errorArgs","errorSignature","method","transaction"];function be(n,t){const e={weight:n.weight};return Object.defineProperty(e,"provider",{get:()=>n.provider}),n.start&&(e.start=n.start),t&&(e.duration=t-n.start),n.done&&(n.error?e.error=n.error:e.result=n.result||null),e}function Ws(n,t){return function(e){const r={};e.forEach(o=>{const a=n(o.result);r[a]||(r[a]={count:0,result:o.result}),r[a].count++});const s=Object.keys(r);for(let o=0;o<s.length;o++){const a=r[s[o]];if(a.count>=t)return a.result}}}function zs(n,t,e){let r=Q;switch(t){case"getBlockNumber":return function(s){const o=s.map(c=>c.result);let a=Ke(s.map(c=>c.result),2);if(a!=null)return a=Math.ceil(a),o.indexOf(a+1)>=0&&a++,a>=n._highestBlockNumber&&(n._highestBlockNumber=a),n._highestBlockNumber};case"getGasPrice":return function(s){const o=s.map(a=>a.result);return o.sort(),o[Math.floor(o.length/2)]};case"getEtherPrice":return function(s){return Ke(s.map(o=>o.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(s){return s==null?null:(s=te(s),s.confirmations=-1,Q(s))};break;case"getBlock":e.includeTransactions?r=function(s){return s==null?null:(s=te(s),s.transactions=s.transactions.map(o=>(o=te(o),o.confirmations=-1,o)),Q(s))}:r=function(s){return s==null?null:Q(s)};break;default:throw new Error("unknown method: "+t)}return Ws(r,n.quorum)}function ne(n,t){return Ee(this,void 0,void 0,function*(){const e=n.provider;return e.blockNumber!=null&&e.blockNumber>=t||t===-1?e:nt(()=>new Promise((r,s)=>{setTimeout(function(){return e.blockNumber>=t?r(e):n.cancelled?r(null):r(void 0)},0)}),{oncePoll:e})})}function Gs(n,t,e,r){return Ee(this,void 0,void 0,function*(){let s=n.provider;switch(e){case"getBlockNumber":case"getGasPrice":return s[e]();case"getEtherPrice":if(s.getEtherPrice)return s.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&G(r.blockTag)&&(s=yield ne(n,t)),s[e](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&G(r.blockTag)&&(s=yield ne(n,t)),s.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&G(r.blockTag)&&(s=yield ne(n,t)),s[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&G(r.blockTag)&&(s=yield ne(n,t)),s[e](r.transaction);case"getTransaction":case"getTransactionReceipt":return s[e](r.transactionHash);case"getLogs":{let o=r.filter;return(o.fromBlock&&G(o.fromBlock)||o.toBlock&&G(o.toBlock))&&(s=yield ne(n,t)),s.getLogs(o)}}return K.throwError("unknown method error",v.errors.UNKNOWN_ERROR,{method:e,params:r})})}class mt extends De{constructor(t,e){t.length===0&&K.throwArgumentError("missing providers","providers",t);const r=t.map((a,c)=>{if(rt.isProvider(a)){const d=Ce(a)?2e3:750;return Object.freeze({provider:a,weight:1,stallTimeout:d,priority:1})}const i=te(a);i.priority==null&&(i.priority=1),i.stallTimeout==null&&(i.stallTimeout=Ce(a)?2e3:750),i.weight==null&&(i.weight=1);const u=i.weight;return(u%1||u>512||u<1)&&K.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${c}].weight`,u),Object.freeze(i)}),s=r.reduce((a,c)=>a+c.weight,0);e==null?e=s/2:e>s&&K.throwArgumentError("quorum will always fail; larger than total weight","quorum",e);let o=Ye(r.map(a=>a.provider.network));o==null&&(o=new Promise((a,c)=>{setTimeout(()=>{this.detectNetwork().then(a,c)},0)})),super(o),B(this,"providerConfigs",Object.freeze(r)),B(this,"quorum",e),this._highestBlockNumber=-1}detectNetwork(){return Ee(this,void 0,void 0,function*(){const t=yield Promise.all(this.providerConfigs.map(e=>e.provider.getNetwork()));return Ye(t)})}perform(t,e){return Ee(this,void 0,void 0,function*(){if(t==="sendTransaction"){const i=yield Promise.all(this.providerConfigs.map(u=>u.provider.sendTransaction(e.signedTransaction).then(d=>d.hash,d=>d)));for(let u=0;u<i.length;u++){const d=i[u];if(typeof d=="string")return d}throw i[0]}this._highestBlockNumber===-1&&t!=="getBlockNumber"&&(yield this.getBlockNumber());const r=zs(this,t,e),s=st(this.providerConfigs.map(te));s.sort((i,u)=>i.priority-u.priority);const o=this._highestBlockNumber;let a=0,c=!0;for(;;){const i=me();let u=s.filter(l=>l.runner&&i-l.start<l.stallTimeout).reduce((l,b)=>l+b.weight,0);for(;u<this.quorum&&a<s.length;){const l=s[a++],b=qs++;l.start=me(),l.staller=Ze(l.stallTimeout),l.staller.wait(()=>{l.staller=null}),l.runner=Gs(l,o,t,e).then(E=>{l.done=!0,l.result=E,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:b,backend:be(l,me()),request:{method:t,params:ee(e)},provider:this})},E=>{l.done=!0,l.error=E,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:b,backend:be(l,me()),request:{method:t,params:ee(e)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:b,backend:be(l,null),request:{method:t,params:ee(e)},provider:this}),u+=l.weight}const d=[];s.forEach(l=>{l.done||!l.runner||(d.push(l.runner),l.staller&&d.push(l.staller.getPromise()))}),d.length&&(yield Promise.race(d));const g=s.filter(l=>l.done&&l.error==null);if(g.length>=this.quorum){const l=r(g);if(l!==void 0)return s.forEach(b=>{b.staller&&b.staller.cancel(),b.cancelled=!0}),l;c||(yield Ze(100).getPromise()),c=!1}const N=s.reduce((l,b)=>{if(!b.done||b.error==null)return l;const E=b.error.code;return Hs.indexOf(E)>=0&&(l[E]||(l[E]={error:b.error,weight:0}),l[E].weight+=b.weight),l},{});if(Object.keys(N).forEach(l=>{const b=N[l];if(b.weight<this.quorum)return;s.forEach(h=>{h.staller&&h.staller.cancel(),h.cancelled=!0});const E=b.error,x={};Ls.forEach(h=>{E[h]!=null&&(x[h]=E[h])}),K.throwError(E.reason||E.message,l,x)}),s.filter(l=>!l.done).length===0)break}return s.forEach(i=>{i.staller&&i.staller.cancel(),i.cancelled=!0}),K.throwError("failed to meet quorum",v.errors.SERVER_ERROR,{method:t,params:e,results:s.map(i=>be(i)),provider:this})})}}const bt=null,ye=new v(q),ie="84842078b09946638c03157f83405213";class vt extends Te{constructor(t,e){const r=new Fe(t,e),s=r.connection;s.password&&ye.throwError("INFURA WebSocket project secrets unsupported",v.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const o=s.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(o,t),B(this,"apiKey",r.projectId),B(this,"projectId",r.projectId),B(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===ie}}class Fe extends W{static getWebSocketProvider(t,e){return new vt(t,e)}static getApiKey(t){const e={apiKey:ie,projectId:ie,projectSecret:null};return t==null||(typeof t=="string"?e.projectId=t:t.projectSecret!=null?(ye.assertArgument(typeof t.projectId=="string","projectSecret requires a projectId","projectId",t.projectId),ye.assertArgument(typeof t.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),e.projectId=t.projectId,e.projectSecret=t.projectSecret):t.projectId&&(e.projectId=t.projectId),e.apiKey=e.projectId),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"ropsten":r="ropsten.infura.io";break;case"rinkeby":r="rinkeby.infura.io";break;case"kovan":r="kovan.infura.io";break;case"goerli":r="goerli.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-kovan":r="optimism-kovan.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-rinkeby":r="arbitrum-rinkeby.infura.io";break;default:ye.throwError("unsupported network",v.errors.INVALID_ARGUMENT,{argument:"network",value:t})}const s={allowGzip:!0,url:"https://"+r+"/v3/"+e.projectId,throttleCallback:(o,a)=>(e.projectId===ie&&ue(),Promise.resolve(!0))};return e.projectSecret!=null&&(s.user="",s.password=e.projectSecret),s}isCommunityResource(){return this.projectId===ie}}class Js extends re{send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const s={request:r,resolve:null,reject:null},o=new Promise((a,c)=>{s.resolve=a,s.reject=c});return this._pendingBatch.push(s),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const a=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const c=a.map(i=>i.request);return this.emit("debug",{action:"requestBatch",request:ee(c),provider:this}),Ue(this.connection,JSON.stringify(c)).then(i=>{this.emit("debug",{action:"response",request:c,response:i,provider:this}),a.forEach((u,d)=>{const g=i[d];if(g.error){const N=new Error(g.error.message);N.code=g.error.code,N.data=g.error.data,u.reject(N)}else u.resolve(g.result)})},i=>{this.emit("debug",{action:"response",error:i,request:c,provider:this}),a.forEach(u=>{u.reject(i)})})},10)),o}}const Ie=new v(q),Vs="ETHERS_JS_SHARED";class yt extends W{static getApiKey(t){return t&&typeof t!="string"&&Ie.throwArgumentError("invalid apiKey","apiKey",t),t||Vs}static getUrl(t,e){Ie.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(t.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:Ie.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+e}}const Y=new v(q),Xe={homestead:"6004bcd10040261633ade990",ropsten:"6004bd4d0040261633ade991",rinkeby:"6004bda20040261633ade994",goerli:"6004bd860040261633ade992"};class wt extends W{constructor(t,e){if(e==null){const r=le(new.target,"getNetwork")(t);if(r){const s=Xe[r.name];s&&(e={applicationId:s,loadBalancer:!0})}e==null&&Y.throwError("unsupported network",v.errors.INVALID_ARGUMENT,{argument:"network",value:t})}super(t,e)}static getApiKey(t){t==null&&Y.throwArgumentError("PocketProvider.getApiKey does not support null apiKey","apiKey",t);const e={applicationId:null,loadBalancer:!1,applicationSecretKey:null};return typeof t=="string"?e.applicationId=t:t.applicationSecretKey!=null?(Y.assertArgument(typeof t.applicationId=="string","applicationSecretKey requires an applicationId","applicationId",t.applicationId),Y.assertArgument(typeof t.applicationSecretKey=="string","invalid applicationSecretKey","applicationSecretKey","[REDACTED]"),e.applicationId=t.applicationId,e.applicationSecretKey=t.applicationSecretKey,e.loadBalancer=!!t.loadBalancer):t.applicationId?(Y.assertArgument(typeof t.applicationId=="string","apiKey.applicationId must be a string","apiKey.applicationId",t.applicationId),e.applicationId=t.applicationId,e.loadBalancer=!!t.loadBalancer):Y.throwArgumentError("unsupported PocketProvider apiKey","apiKey",t),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"goerli":r="eth-goerli.gateway.pokt.network";break;default:Y.throwError("unsupported network",v.errors.INVALID_ARGUMENT,{argument:"network",value:t})}let s=null;e.loadBalancer?s=`https://${r}/v1/lb/${e.applicationId}`:s=`https://${r}/v1/${e.applicationId}`;const o={url:s};return o.headers={},e.applicationSecretKey!=null&&(o.user="",o.password=e.applicationSecretKey),o}isCommunityResource(){return this.applicationId===Xe[this.network.name]}}const Qe=new v(q);function _t(n,t){if(n==null&&(n="homestead"),typeof n=="string"){const r=n.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new re(n);case"ws":case"wss":return new Te(n);default:Qe.throwArgumentError("unsupported URL scheme","network",n)}}const e=ot(n);return(!e||!e._defaultProvider)&&Qe.throwError("unsupported getDefaultProvider network",v.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:n}),e._defaultProvider({FallbackProvider:mt,AlchemyProvider:Me,AnkrProvider:ft,CloudflareProvider:gt,EtherscanProvider:pt,InfuraProvider:Fe,JsonRpcProvider:re,NodesmithProvider:yt,PocketProvider:wt,Web3Provider:at,IpcProvider:bt},t)}const Ys=Object.freeze(Object.defineProperty({__proto__:null,AlchemyProvider:Me,AlchemyWebSocketProvider:ht,AnkrProvider:ft,BaseProvider:De,CloudflareProvider:gt,EtherscanProvider:pt,FallbackProvider:mt,Formatter:Dt,InfuraProvider:Fe,InfuraWebSocketProvider:vt,IpcProvider:bt,JsonRpcBatchProvider:Js,JsonRpcProvider:re,JsonRpcSigner:Ut,NodesmithProvider:yt,PocketProvider:wt,Provider:rt,Resolver:Mt,StaticJsonRpcProvider:dt,UrlJsonRpcProvider:W,Web3Provider:at,WebSocketProvider:Te,getDefaultProvider:_t,getNetwork:ot,isCommunityResourcable:Ft,isCommunityResource:Ce,showThrottleMessage:ue},Symbol.toStringTag,{value:"Module"})),Ks=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:qt,ConstructorFragment:Ht,ErrorFragment:Lt,EventFragment:Wt,FormatTypes:zt,Fragment:Gt,FunctionFragment:Jt,HDNode:Vt,Indexed:Yt,Interface:Kt,LogDescription:Zt,Logger:v,ParamType:Xt,RLP:Qt,SigningKey:er,get SupportedAlgorithm(){return tr},TransactionDescription:rr,get TransactionTypes(){return sr},get UnicodeNormalizationForm(){return nr},Utf8ErrorFuncs:or,get Utf8ErrorReason(){return ar},_TypedDataEncoder:ir,_fetchData:lr,_toEscapedUtf8String:cr,accessListify:tt,arrayify:ur,base58:dr,base64:hr,checkProperties:fr,checkResultErrors:gr,commify:pr,computeAddress:mr,computeHmac:br,computePublicKey:vr,concat:yr,deepCopy:ee,defaultAbiCoder:wr,defaultPath:_r,defineReadOnly:B,dnsEncode:kr,entropyToMnemonic:Er,fetchJson:Ue,formatBytes32String:xr,formatEther:Sr,formatUnits:Tr,getAccountPath:Pr,getAddress:Ar,getContractAddress:Nr,getCreate2Address:$r,getIcapAddress:Ir,getJsonWalletAddress:Rr,getStatic:le,hashMessage:Cr,hexConcat:Or,hexDataLength:Br,hexDataSlice:jr,hexStripZeros:Dr,hexValue:et,hexZeroPad:Ur,hexlify:Re,id:Mr,isAddress:Fr,isBytes:qr,isBytesLike:Hr,isHexString:G,isValidMnemonic:Lr,isValidName:Wr,joinSignature:zr,keccak256:Gr,mnemonicToEntropy:Jr,mnemonicToSeed:Vr,namehash:Yr,nameprep:Kr,parseBytes32String:Zr,parseEther:Xr,parseTransaction:Qr,parseUnits:es,poll:nt,randomBytes:ts,recoverAddress:rs,recoverPublicKey:ss,resolveProperties:ns,ripemd160:os,serializeTransaction:as,sha256:is,sha512:ls,shallowCopy:te,shuffled:st,solidityKeccak256:cs,solidityPack:us,soliditySha256:ds,splitSignature:hs,stripZeros:fs,toUtf8Bytes:gs,toUtf8CodePoints:ps,toUtf8String:ms,verifyMessage:bs,verifyTypedData:vs,zeroPad:ys},Symbol.toStringTag,{value:"Module"})),kt="ethers/5.6.8",Zs=new v(kt),Et=Object.freeze(Object.defineProperty({__proto__:null,BaseContract:ws,BigNumber:je,Contract:it,ContractFactory:_s,FixedNumber:ks,Signer:Es,VoidSigner:xs,Wallet:we,Wordlist:Ss,constants:Os,get errors(){return Ts},getDefaultProvider:_t,logger:Zs,providers:Ys,utils:Ks,version:kt,wordlists:Ps},Symbol.toStringTag,{value:"Module"}));try{const n=window;n._ethers==null&&(n._ethers=Et)}catch{}var xt={exports:{}};(function(n,t){(function(e,r){n.exports=r()})(As,function(){var e,r,s=1e3,o=6e4,a=36e5,c=864e5,i=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,d=2592e6,g=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,N={years:u,months:d,days:c,hours:a,minutes:o,seconds:s,milliseconds:1,weeks:6048e5},l=function(w){return w instanceof I},b=function(w,p,f){return new I(w,f,p.$l)},E=function(w){return r.p(w)+"s"},x=function(w){return w<0},h=function(w){return x(w)?Math.ceil(w):Math.floor(w)},T=function(w){return Math.abs(w)},A=function(w,p){return w?x(w)?{negative:!0,format:""+T(w)+p}:{negative:!1,format:""+w+p}:{negative:!1,format:""}},I=function(){function w(f,m,O){var R=this;if(this.$d={},this.$l=O,f===void 0&&(this.$ms=0,this.parseFromMilliseconds()),m)return b(f*N[E(m)],this);if(typeof f=="number")return this.$ms=f,this.parseFromMilliseconds(),this;if(typeof f=="object")return Object.keys(f).forEach(function(z){R.$d[E(z)]=f[z]}),this.calMilliseconds(),this;if(typeof f=="string"){var U=f.match(g);if(U){var M=U.slice(2).map(function(z){return z!=null?Number(z):0});return this.$d.years=M[0],this.$d.months=M[1],this.$d.weeks=M[2],this.$d.days=M[3],this.$d.hours=M[4],this.$d.minutes=M[5],this.$d.seconds=M[6],this.calMilliseconds(),this}}return this}var p=w.prototype;return p.calMilliseconds=function(){var f=this;this.$ms=Object.keys(this.$d).reduce(function(m,O){return m+(f.$d[O]||0)*N[O]},0)},p.parseFromMilliseconds=function(){var f=this.$ms;this.$d.years=h(f/u),f%=u,this.$d.months=h(f/d),f%=d,this.$d.days=h(f/c),f%=c,this.$d.hours=h(f/a),f%=a,this.$d.minutes=h(f/o),f%=o,this.$d.seconds=h(f/s),f%=s,this.$d.milliseconds=f},p.toISOString=function(){var f=A(this.$d.years,"Y"),m=A(this.$d.months,"M"),O=+this.$d.days||0;this.$d.weeks&&(O+=7*this.$d.weeks);var R=A(O,"D"),U=A(this.$d.hours,"H"),M=A(this.$d.minutes,"M"),z=this.$d.seconds||0;this.$d.milliseconds&&(z+=this.$d.milliseconds/1e3);var Pe=A(z,"S"),St=f.negative||m.negative||R.negative||U.negative||M.negative||Pe.negative,Tt=U.format||M.format||Pe.format?"T":"",Ae=(St?"-":"")+"P"+f.format+m.format+R.format+Tt+U.format+M.format+Pe.format;return Ae==="P"||Ae==="-P"?"P0D":Ae},p.toJSON=function(){return this.toISOString()},p.format=function(f){var m=f||"YYYY-MM-DDTHH:mm:ss",O={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return m.replace(i,function(R,U){return U||String(O[R])})},p.as=function(f){return this.$ms/N[E(f)]},p.get=function(f){var m=this.$ms,O=E(f);return O==="milliseconds"?m%=1e3:m=O==="weeks"?h(m/N[O]):this.$d[O],m===0?0:m},p.add=function(f,m,O){var R;return R=m?f*N[E(m)]:l(f)?f.$ms:b(f,this).$ms,b(this.$ms+R*(O?-1:1),this)},p.subtract=function(f,m){return this.add(f,m,!0)},p.locale=function(f){var m=this.clone();return m.$l=f,m},p.clone=function(){return b(this.$ms,this)},p.humanize=function(f){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!f)},p.milliseconds=function(){return this.get("milliseconds")},p.asMilliseconds=function(){return this.as("milliseconds")},p.seconds=function(){return this.get("seconds")},p.asSeconds=function(){return this.as("seconds")},p.minutes=function(){return this.get("minutes")},p.asMinutes=function(){return this.as("minutes")},p.hours=function(){return this.get("hours")},p.asHours=function(){return this.as("hours")},p.days=function(){return this.get("days")},p.asDays=function(){return this.as("days")},p.weeks=function(){return this.get("weeks")},p.asWeeks=function(){return this.as("weeks")},p.months=function(){return this.get("months")},p.asMonths=function(){return this.as("months")},p.years=function(){return this.get("years")},p.asYears=function(){return this.as("years")},w}();return function(w,p,f){e=f,r=f().$utils(),f.duration=function(R,U){var M=f.locale();return b(R,{$l:M},U)},f.isDuration=l;var m=p.prototype.add,O=p.prototype.subtract;p.prototype.add=function(R,U){return l(R)&&(R=R.asMilliseconds()),m.bind(this)(R,U)},p.prototype.subtract=function(R,U){return l(R)&&(R=R.asMilliseconds()),O.bind(this)(R,U)}}})})(xt);var Xs=xt.exports;const Qs=Ns(Xs),en={class:"mr-1"},tn={class:"text-gray-500 text-sm"},rn={class:"text-gray-500 text-sm ml-1"},sn={key:0},nn={key:1},xe=de({__name:"DragonNft",props:{dragon:{},isShowTransfer:{type:Boolean}},emits:["onRefresh"],setup(n,{emit:t}){const{dragon:e,isShowTransfer:r=!0}=n,s=he(),o=F(!1),a=F(""),c=()=>{o.value=!0},i=F(!1),u=F([{text:"",value:"",disabled:!0}]),d=()=>{let l=[];for(let b=0;b<s.address.length;b++){let E=s.address[b].nickname+" "+$s(s.address[b].address),x=s.address[b].address,h=!1;b==s.changeAddressIndex&&(h=!0,E+=" <发送地址>"),l.push({text:E,value:x,disabled:h})}u.value=l,i.value=!0},g=({selectedValues:l})=>{a.value=l[0],i.value=!1},N=async()=>{Se({duration:0,message:"操作执行中"});try{let l=s.address[s.changeAddressIndex].address,b=s.address[s.changeAddressIndex].key,E=new we(b,Oe);await(await new it(qe.address,qe.abi,E).safeTransferFrom(l,a.value,e.id,"0x00")).wait()}catch(l){se(),Be(l.toString()),console.log("Error!"),await ke(2e3)}await ke(1e3),t("onRefresh")};return(l,b)=>{const E=$("van-tag"),x=$("van-count-down"),h=$("van-button"),T=$("van-cell"),A=$("van-field"),I=$("van-cell-group"),w=$("van-dialog"),p=$("van-picker"),f=$("van-popup");return S(),j(V,null,[y("div",{class:oe(["rounded-lg shadow-lg max-w-sm p-1 border-1 text-center","border-"+C(X).find(m=>m.quality==l.dragon.level).color+"-500"])},[y("div",null,[y("span",en,P(l.dragon.name),1),_(E,{plain:"",color:C(X).find(m=>m.quality==l.dragon.level).rgb},{default:k(()=>[D(P(C(X).find(m=>m.quality==l.dragon.level).name),1)]),_:1},8,["color"])]),y("div",tn,"#"+P(l.dragon.id),1),y("div",null,[(S(!0),j(V,null,_e(l.dragon.elements,(m,O)=>(S(),L(E,{class:"mr-1",plain:"",key:O},{default:k(()=>[D(P(C(lt)[m]),1)]),_:2},1024))),128)),y("span",rn,P(l.dragon.attrs[6])+"/7",1)]),l.dragon.diffTimeStamp>0?(S(),j("div",sn,[_(x,{class:"text-xs",time:l.dragon.diffTimeStamp,format:"DD 天 HH 时 mm 分 ss 秒"},null,8,["time"])])):H("",!0),l.dragon.state==0&&l.isShowTransfer?(S(),j("div",nn,[_(h,{plain:"",type:"default",size:"small",icon:"paid-o",class:"m-2",onClick:b[0]||(b[0]=m=>c())},{default:k(()=>[D(" 转账 ")]),_:1})])):H("",!0),y("div",null,[l.dragon.state==1?(S(),L(E,{key:0,type:"warning"},{default:k(()=>[D("繁殖中")]),_:1})):H("",!0)]),y("div",null,[l.dragon.state==2?(S(),L(E,{key:0,type:"primary"},{default:k(()=>[D("孵化蛋")]),_:1})):H("",!0)])],2),_(w,{show:o.value,"onUpdate:show":b[2]||(b[2]=m=>o.value=m),title:"转账","show-cancel-button":"",onConfirm:N},{default:k(()=>[_(I,{inset:""},{default:k(()=>[_(T,{title:"发送昵称",value:C(s).address[C(s).changeAddressIndex].nickname},null,8,["value"]),_(T,{title:"发送地址",value:C(s).address[C(s).changeAddressIndex].address},null,8,["value"]),_(T,{title:"NFT"},{"right-icon":k(()=>[y("div",null,[D(P(l.dragon.name)+" id:"+P(l.dragon.id)+" ",1),_(E,{plain:"",color:C(X).find(m=>m.quality==l.dragon.level).rgb},{default:k(()=>[D(P(C(X).find(m=>m.quality==l.dragon.level).name),1)]),_:1},8,["color"]),D(" "+P(l.dragon.attrs[6])+"/7 ",1)])]),_:1}),_(A,{modelValue:a.value,"onUpdate:modelValue":b[1]||(b[1]=m=>a.value=m),label:"接受地址"},{button:k(()=>[_(h,{size:"small",type:"primary",onClick:d},{default:k(()=>[D("选择")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["show"]),_(f,{show:i.value,"onUpdate:show":b[4]||(b[4]=m=>i.value=m),round:"",position:"bottom",teleport:"body"},{default:k(()=>[_(p,{columns:u.value,onCancel:b[3]||(b[3]=m=>i.value=!1),onConfirm:g,onClickOption:g},null,8,["columns"])]),_:1},8,["show"])],64)}}}),on={key:0},an={class:"m-2 text-center"},ln={class:"m-2 text-gray-500 text-center text-sm"},cn={class:"text-gray-800"},un={class:"text-gray-400 ml-1 text-xs"},dn={class:"mt-4 mb-2 text-center"},hn=de({__name:"DragonBreed",props:{dragons:{}},emits:["onRefresh"],setup(n,{emit:t}){const e=n,r=he(),s=F(!1),o=F(0),a=F({fa_level:1,ma_level:1,level_1:70,level_2:30,level_3:0,level_4:0}),c=F([{name:"没有可选择的Dragon",disabled:!0,index:-1}]),i=F([-1,-1]),u=F(0),d=()=>{let x=[];for(let h=0;h<e.dragons.length;h++){let T="";for(let p=0;p<e.dragons[h].elements.length;p++)T=T+" "+lt[e.dragons[h].elements[p]];let A=X.find(p=>p.quality==e.dragons[h].level).name+" "+e.dragons[h].name+" "+e.dragons[h].attrs[6]+"/7 "+T,I=!1;(h==i.value[0]||h==i.value[1])&&(I=!0,A+=" <已选>");let w=-1;if(i.value[0]>-1&&(w=i.value[0]),i.value[1]>-1&&(w=i.value[1]),w>-1&&w!=h){let p=e.dragons[w];(e.dragons[h].attrs[8]==p.id||e.dragons[h].attrs[9]==p.id)&&(I=!0,A+=" <父母>"),(e.dragons[h].attrs[8]==p.attrs[8]||e.dragons[h].attrs[8]==p.attrs[9]||e.dragons[h].attrs[9]==p.attrs[8]||e.dragons[h].attrs[9]==p.attrs[9])&&(I=!0,A+=" <同代>")}x.push({name:A,disabled:I,index:h})}e.dragons.length>0?c.value=x:c.value=[{name:"没有可选择的Dragon",disabled:!0,index:-1}]},g=x=>{u.value=x,d(),s.value=!0},N=async x=>{if(i.value[u.value]=x.index,i.value[0]>-1&&i.value[1]>-1){let h=e.dragons[i.value[0]].level,T=e.dragons[i.value[1]].level,A=He.find(I=>I.fa_level==h&&I.ma_level==T);A||(A=He.find(I=>I.fa_level==T&&I.ma_level==h)),console.log("res_chance",A),A&&(a.value=A),await l()}},l=async()=>{o.value=0;let x=e.dragons[i.value[0]].level,h=e.dragons[i.value[1]].level,T=e.dragons[i.value[0]].attrs[6],A=e.dragons[i.value[1]].attrs[6],I="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",w=await Z.getBreedPrice(x,h,T,A,I);o.value=w},b=async()=>{let x="操作执行中,预计需要1分钟左右,请耐心等待";Se({duration:0,message:x});let h=r.address[r.changeAddressIndex],T=await Z.getSuggestIndex(h.address);if(console.log("suggestIndex",T.toString()),T=="255"){se(),Be("超出单账号同时繁殖数量！");return}let A=e.dragons[i.value[0]].id,I=e.dragons[i.value[1]].id,w="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",p=o.value,f=new we(h.key,Oe);try{x="开始执行繁殖...",await(await Z.connect(f).beginBreed(A,I,T,w,p,{value:p})).wait()}catch(m){se(),Be(m.toString()),console.log(m),await ke(2e3);return}x="开始等待孵化...",await E(),i.value=[-1,-1],t("onRefresh")},E=async()=>{let x=r.address[r.changeAddressIndex],h=await Z.getHatchData(x.address);for(console.log("hatchData",h.toString());!(h.status=="1"&&h.bHash!=="0x0000000000000000000000000000000000000000000000000000000000000000");)console.log("不符合孵化条件，5秒后再次检测"),await ke(5e3),h=await Z.getHatchData(x.address);console.log("do end breed!");let T=new we(x.key,Oe);await Z.connect(T).endBreed()};return ct(()=>{d()}),(x,h)=>{const T=$("van-grid-item"),A=$("van-grid"),I=$("van-button"),w=$("van-cell-group"),p=$("van-action-sheet");return S(),j(V,null,[_(w,{inset:""},{default:k(()=>[_(A,{"column-num":3,class:"pt-5 pb-2"},{default:k(()=>[i.value[0]==-1?(S(),L(T,{key:0,class:"rounded-lg max-w-sm p-1 border-2 text-center",icon:"plus",text:"添加",onClick:h[0]||(h[0]=f=>g(0))})):H("",!0),i.value[0]>=0?(S(),L(T,{key:1,onClick:h[2]||(h[2]=f=>g(0))},{default:k(()=>[_(xe,{dragon:e.dragons[i.value[0]],isShowTransfer:!1,onOnRefresh:h[1]||(h[1]=()=>{})},null,8,["dragon"])]),_:1})):H("",!0),_(T,{icon:"like-o",class:"text-gray-400"}),i.value[1]==-1?(S(),L(T,{key:2,class:"rounded-lg max-w-sm p-1 border-2 text-center",icon:"plus",text:"添加",onClick:h[3]||(h[3]=f=>g(1))})):H("",!0),i.value[1]>=0?(S(),L(T,{key:3,onClick:h[5]||(h[5]=f=>g(1))},{default:k(()=>[_(xe,{dragon:e.dragons[i.value[1]],isShowTransfer:!1,onOnRefresh:h[4]||(h[4]=()=>{})},null,8,["dragon"])]),_:1})):H("",!0)]),_:1}),i.value[0]>-1&&i.value[1]>-1?(S(),j("div",on,[y("div",an,[y("span",{class:oe(["text-sm mr-1","text-gray-500"])},"普通 "+P(a.value.level_1.toFixed(1))+"%",1),y("span",{class:oe(["text-sm mr-1","text-green-500"])},"良好 "+P(a.value.level_2.toFixed(1))+"%",1),y("span",{class:oe(["text-sm mr-1","text-blue-500"])},"稀有 "+P(a.value.level_3.toFixed(1))+"%",1),y("span",{class:oe(["text-sm mr-1","text-fuchsia-500"])},"史诗 "+P(a.value.level_4.toFixed(1))+"%",1)]),y("div",ln,[D(" 费用："),y("span",cn,P(parseFloat(C(Et).utils.formatUnits(o.value,"ether")).toFixed(5)),1),D("ETH "),y("span",un,"账号余额："+P(C(r).balances.eth.toFixed(5))+"ETH",1)]),y("div",dn,[_(I,{type:"primary",onClick:b,disabled:!(o.value>0)},{default:k(()=>[D("繁殖")]),_:1},8,["disabled"])])])):H("",!0)]),_:1}),_(p,{show:s.value,"onUpdate:show":h[6]||(h[6]=f=>s.value=f),actions:c.value,title:"选择MoDragon","close-on-click-action":"",onSelect:N,teleport:"body"},null,8,["show","actions"])],64)}}}),fn={key:0},gn={key:1},pn={class:"text-gray-800"},mn=y("span",{class:"text-xs text-gray-500"},"MoDragon",-1),bn=y("span",{class:"text-xs text-gray-500"},"ETH",-1),vn=y("span",{class:"text-xs text-gray-500"},"ARB",-1),yn=y("span",{class:"text-xs text-gray-500"},"MBOX",-1),wn={class:"m-2"},_n={class:"text-lg text-gray-500 ml-3"},kn={class:"grid grid-cols-3 md:lg:xl:grid-cols-6 group bg-white shadow-xl shadow-neutral-100 border"},En=y("div",{class:"m-2"},[y("span",{class:"text-lg text-gray-500 ml-3"},"繁殖操作")],-1),xn={class:"m-2"},Sn={class:"text-lg text-gray-500 ml-3"},Tn={class:"grid grid-cols-3 md:lg:xl:grid-cols-6 group bg-white shadow-xl shadow-neutral-100 border"},Pn=de({__name:"account",setup(n){ut.extend(Qs);const{onActivated:t}=Is(),e=he(),r=F([]),s=F([]);Rs(()=>[e.address,e.changeAddressIndex],async(a,c)=>{await o(),await e.getChangeAddressBalance()}),t(async({address:a})=>{await o(),await e.getChangeAddressBalance()}),ct(async()=>{await o(),await e.getChangeAddressBalance()});async function o(){if(Se({duration:0,forbidClick:!0,message:"更新数据"}),e.address.length==0||e.changeAddressIndex<0){se();return}let a=await e.upOneAddressNft(e.changeAddressIndex);r.value=a.nfts,s.value=a.nfts.filter(c=>c.state==0),se()}return(a,c)=>{const i=$("van-empty"),u=$("van-grid-item"),d=$("van-grid");return S(),j(V,null,[r.value.length==0?(S(),j("div",fn,[_(i,{image:"search",description:"没有发现龙蛋NFT"})])):H("",!0),r.value.length>0?(S(),j("div",gn,[_(d,{class:"m-2","column-num":4},{default:k(()=>[_(u,null,{icon:k(()=>[y("span",pn,P(r.value.length),1)]),text:k(()=>[mn]),_:1}),_(u,null,{icon:k(()=>[y("span",null,P(C(e).balances.eth.toFixed(2)),1)]),text:k(()=>[bn]),_:1}),_(u,null,{icon:k(()=>[y("span",null,P(C(e).balances.arb.toFixed(0)),1)]),text:k(()=>[vn]),_:1}),_(u,null,{icon:k(()=>[y("span",null,P(C(e).balances.mbox.toFixed(0)),1)]),text:k(()=>[yn]),_:1})]),_:1}),y("div",wn,[y("span",_n,"空闲状态: "+P(r.value.filter(g=>g.state==0).length),1)]),y("div",kn,[(S(!0),j(V,null,_e(r.value.filter(g=>g.state==0),(g,N)=>(S(),j("div",{key:"dragon0"+N+g.id,class:"m-3"},[_(xe,{dragon:g,isShowTransfer:!0,onOnRefresh:o},null,8,["dragon"])]))),128))]),En,(S(),L(hn,{dragons:s.value,key:C(e).address[C(e).changeAddressIndex].address,onOnRefresh:o},null,8,["dragons"])),y("div",xn,[y("span",Sn,"繁殖状态: "+P(r.value.filter(g=>g.state>0).length),1)]),y("div",Tn,[(S(!0),j(V,null,_e(r.value.filter(g=>g.state>0),(g,N)=>(S(),j("div",{key:"dragon"+N,class:"m-3"},[_(xe,{dragon:g,isShowTransfer:!1,onOnRefresh:o},null,8,["dragon"])]))),128))])])):H("",!0)],64)}}}),An={key:0},Nn={class:"text-gray-600 text-sm ml-1"},$n=y("span",null,null,-1),In=y("span",{class:"ml-5 text-gray-500"},"最近一次繁殖结束： ",-1),Rn={key:1},Cn=de({__name:"collect",setup(n){const t=he(),e=F(!1),r=async()=>{Se({duration:0,forbidClick:!0,message:"更新数据"}),e.value=!0,await t.upAllAddressNfts(),e.value=!1,console.log("更新状态"),se()};return(s,o)=>{const a=$("van-button"),c=$("van-cell"),i=$("van-tag"),u=$("van-cell-group"),d=$("van-empty");return C(t).address.length>0?(S(),j("div",An,[_(u,{class:"my-2",inset:""},{default:k(()=>[_(c,{title:"各账号详情",icon:"user-o"},{value:k(()=>[_(a,{type:"success",size:"mini",class:"mr-2",loading:e.value,"loading-text":"读取中",onClick:r},{default:k(()=>[D(" 更新数据 ")]),_:1},8,["loading"])]),_:1}),(S(!0),j(V,null,_e(C(t).nftinfos,(g,N)=>(S(),j(V,{key:N+g.address},[_(c,null,{title:k(()=>[_(i,{round:"",plain:"",type:"primary"},{default:k(()=>[D(P(N+1),1)]),_:2},1024),y("span",Nn,P(g.nickname),1),$n]),value:k(()=>[D(" 空闲:"+P(g.nfts.filter(l=>l.state==0).length)+"/繁殖:"+P(g.nfts.filter(l=>l.state>0).length),1)]),_:2},1024),_(c,null,{title:k(()=>[In]),value:k(()=>[D(P(C(ut).unix(g.nfts.find(l=>l.state>0).attrs[7]).format("MM/DDTHH:mm")),1)]),_:2},1024)],64))),128))]),_:1})])):(S(),j("div",Rn,[_(d,{description:"账号数量为空"})]))}}}),Bn=de({__name:"index",setup(n){const t=he();return(e,r)=>C(t).changeAddressIndex>=0?(S(),L(Pn,{key:0})):(S(),L(Cn,{key:1}))}});export{Bn as default};
