import{A as Pt,H as At,M as Nt,d as It,e as $t,N as Rt,O as Ct,T as Ot,W as Bt,Z as jt,L as v,v as H,J as se,f as B,B as De,h as le,j as he,k as Ue,l as Me,m as te,n as rt,o as Oe,p as st,q as G,P as nt,t as Be,u as re,w as ot,x as at,y as it,z as lt,F as Dt,C as Ut,R as Mt,D as Ft,E as qt,G as Ht,I as Lt,K as Wt,Q as zt,S as Gt,U as Jt,V as Vt,X as Yt,Y as Kt,_ as Zt,$ as Xt,a0 as Qt,a1 as er,a2 as tr,a3 as rr,a4 as sr,a5 as nr,a6 as or,a7 as ar,a8 as ir,a9 as lr,aa as cr,ab as ur,ac as dr,ad as hr,ae as fr,af as gr,ag as pr,ah as mr,ai as br,aj as vr,ak as wr,al as yr,am as _r,an as kr,ao as Er,ap as xr,aq as Sr,ar as Tr,as as Pr,at as Ar,au as Nr,av as Ir,aw as $r,ax as Rr,ay as Cr,az as Or,aA as Br,aB as jr,aC as Dr,aD as Ur,aE as Mr,aF as Fr,aG as qr,aH as Hr,aI as Lr,aJ as Wr,aK as zr,aL as Gr,aM as Jr,aN as Vr,aO as Yr,aP as Kr,aQ as Zr,aR as Xr,aS as Qr,aT as es,aU as ts,aV as rs,aW as ss,aX as ns,aY as os,aZ as as,a_ as is,a$ as ls,b0 as cs,b1 as us,b2 as ds,b3 as hs,b4 as fs,b5 as gs,b6 as ps,b7 as ms,b8 as bs,b9 as vs,ba as ws,bb as ys,bc as ct,bd as _s,be as ks,bf as Es,bg as xs,bh as ue,bi as Ss,bj as Ts,bk as Ps,c as As,g as Ns,bl as fe,bm as ge,bn as M,bo as $,bp as N,bq as j,br as S,bs as I,bt as E,bu as x,bv as D,bw as O,bx as Q,by as V,bz as ke,bA as L,bB as je,bC as q,bD as oe,bE as Is,bF as de,bG as Ee,bH as Y,bI as $s,bJ as xe,bK as Le,bL as Se,bM as Fe,bN as We,bO as X,bP as ut,bQ as Rs,bR as Cs}from"./index-276f5437.js";const Os="Ξ",Bs=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:Pt,EtherSymbol:Os,HashZero:At,MaxInt256:Nt,MaxUint256:It,MinInt256:$t,NegativeOne:Rt,One:Ct,Two:Ot,WeiPerEther:Bt,Zero:jt},Symbol.toStringTag,{value:"Module"}));let ce=null;try{if(ce=WebSocket,ce==null)throw new Error("inject please")}catch{const t=new v(H);ce=function(){t.throwError("WebSockets not supported in this environment",v.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var $e=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function u(l){try{c(r.next(l))}catch(p){a(p)}}function i(l){try{c(r.throw(l))}catch(p){a(p)}}function c(l){l.done?o(l.value):s(l.value).then(u,i)}c((r=r.apply(n,t||[])).next())})};const pe=new v(H);let js=1;class Ae extends se{constructor(t,e){e==="any"&&pe.throwError("WebSocketProvider does not support 'any' network yet",v.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof t=="string"?super(t,e):super("_websocket",e),this._pollingInterval=-1,this._wsReady=!1,typeof t=="string"?B(this,"_websocket",new ce(this.connection.url)):B(this,"_websocket",t),B(this,"_requests",{}),B(this,"_subs",{}),B(this,"_subIds",{}),B(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(s=>{this.websocket.send(this._requests[s].payload)})},this.websocket.onmessage=s=>{const o=s.data,a=JSON.parse(o);if(a.id!=null){const u=String(a.id),i=this._requests[u];if(delete this._requests[u],a.result!==void 0)i.callback(null,a.result),this.emit("debug",{action:"response",request:JSON.parse(i.payload),response:a.result,provider:this});else{let c=null;a.error?(c=new Error(a.error.message||"unknown error"),B(c,"code",a.error.code||null),B(c,"response",o)):c=new Error("unknown error"),i.callback(c,void 0),this.emit("debug",{action:"response",error:c,request:JSON.parse(i.payload),provider:this})}}else if(a.method==="eth_subscription"){const u=this._subs[a.params.subscription];u&&u.processFunc(a.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(t){pe.throwError("cannot reset events block on WebSocketProvider",v.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(t){pe.throwError("cannot set polling interval on WebSocketProvider",v.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return $e(this,void 0,void 0,function*(){return null})}set polling(t){t&&pe.throwError("cannot set polling on WebSocketProvider",v.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(t,e){const r=js++;return new Promise((s,o)=>{function a(i,c){return i?o(i):s(c)}const u=JSON.stringify({method:t,params:e,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(u),provider:this}),this._requests[String(r)]={callback:a,payload:u},this._wsReady&&this.websocket.send(u)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(t,e,r){return $e(this,void 0,void 0,function*(){let s=this._subIds[t];s==null&&(s=Promise.all(e).then(a=>this.send("eth_subscribe",a)),this._subIds[t]=s);const o=yield s;this._subs[o]={tag:t,processFunc:r}})}_startEvent(t){switch(t.type){case"block":this._subscribe("block",["newHeads"],e=>{const r=De.from(e.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],e=>{this.emit("pending",e)});break;case"filter":this._subscribe(t.tag,["logs",this._getFilter(t.filter)],e=>{e.removed==null&&(e.removed=!1),this.emit(t.filter,this.formatter.filterLog(e))});break;case"tx":{const e=r=>{const s=r.hash;this.getTransactionReceipt(s).then(o=>{o&&this.emit(s,o)})};e(t),this._subscribe("tx",["newHeads"],r=>{this._events.filter(s=>s.type==="tx").forEach(e)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",t);break}}_stopEvent(t){let e=t.tag;if(t.type==="tx"){if(this._events.filter(s=>s.type==="tx").length)return;e="tx"}else if(this.listenerCount(t.event))return;const r=this._subIds[e];r&&(delete this._subIds[e],r.then(s=>{this._subs[s]&&(delete this._subs[s],this.send("eth_unsubscribe",[s]))}))}destroy(){return $e(this,void 0,void 0,function*(){this.websocket.readyState===ce.CONNECTING&&(yield new Promise(t=>{this.websocket.onopen=function(){t(!0)},this.websocket.onerror=function(){t(!1)}})),this.websocket.close(1e3)})}}var Ds=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function u(l){try{c(r.next(l))}catch(p){a(p)}}function i(l){try{c(r.throw(l))}catch(p){a(p)}}function c(l){l.done?o(l.value):s(l.value).then(u,i)}c((r=r.apply(n,t||[])).next())})};const ae=new v(H);class dt extends se{detectNetwork(){const t=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return Ds(this,void 0,void 0,function*(){let e=this.network;return e==null&&(e=yield t.detectNetwork.call(this),e||ae.throwError("no network detected",v.errors.UNKNOWN_ERROR,{}),this._network==null&&(B(this,"_network",e),this.emit("network",e,null))),e})}}class W extends dt{constructor(t,e){ae.checkAbstract(new.target,W),t=le(new.target,"getNetwork")(t),e=le(new.target,"getApiKey")(e);const r=le(new.target,"getUrl")(t,e);super(r,t),typeof e=="string"?B(this,"apiKey",e):e!=null&&Object.keys(e).forEach(s=>{B(this,s,e[s])})}_startPending(){ae.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(t){return ae.throwError("API provider does not support signing",v.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(t){return t}static getUrl(t,e){return ae.throwError("not implemented; sub-classes must override getUrl",v.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const ze=new v(H),ye="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class ht extends Ae{constructor(t,e){const r=new qe(t,e),s=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(s,r.network),B(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===ye}}class qe extends W{static getWebSocketProvider(t,e){return new ht(t,e)}static getApiKey(t){return t==null?ye:(t&&typeof t!="string"&&ze.throwArgumentError("invalid apiKey","apiKey",t),t)}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"ropsten":r="eth-ropsten.alchemyapi.io/v2/";break;case"rinkeby":r="eth-rinkeby.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.alchemyapi.io/v2/";break;case"kovan":r="eth-kovan.alchemyapi.io/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-rinkeby":r="arb-rinkeby.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-kovan":r="opt-kovan.g.alchemy.com/v2/";break;default:ze.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+e,throttleCallback:(s,o)=>(e===ye&&he(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===ye}}const Us=new v(H),me="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Ms(n){switch(n){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return Us.throwArgumentError("unsupported network","name",n)}class ft extends W{isCommunityResource(){return this.apiKey===me}static getApiKey(t){return t??me}static getUrl(t,e){e==null&&(e=me);const r={allowGzip:!0,url:"https://"+Ms(t.name)+e,throttleCallback:(s,o)=>(e.apiKey===me&&he(),Promise.resolve(!0))};return e.projectSecret!=null&&(r.user="",r.password=e.projectSecret),r}}var Fs=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function u(l){try{c(r.next(l))}catch(p){a(p)}}function i(l){try{c(r.throw(l))}catch(p){a(p)}}function c(l){l.done?o(l.value):s(l.value).then(u,i)}c((r=r.apply(n,t||[])).next())})};const Ge=new v(H);class gt extends W{static getApiKey(t){return t!=null&&Ge.throwArgumentError("apiKey not supported for cloudflare","apiKey",t),null}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="https://cloudflare-eth.com/";break;default:Ge.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return Fs(this,void 0,void 0,function*(){return t==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,t,e)})}}var be=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function u(l){try{c(r.next(l))}catch(p){a(p)}}function i(l){try{c(r.throw(l))}catch(p){a(p)}}function c(l){l.done?o(l.value):s(l.value).then(u,i)}c((r=r.apply(n,t||[])).next())})};const J=new v(H);function Je(n){const t={};for(let e in n){if(n[e]==null)continue;let r=n[e];e==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[e]?r=rt(Oe(r)):e==="accessList"?r="["+st(r).map(s=>`{address:"${s.address}",storageKeys:["${s.storageKeys.join('","')}"]}`).join(",")+"]":r=Oe(r),t[e]=r)}return t}function qs(n){if(n.status==0&&(n.message==="No records found"||n.message==="No transactions found"))return n.result;if(n.status!=1||n.message!="OK"){const t=new Error("invalid response");throw t.result=JSON.stringify(n),(n.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return n.result}function Ve(n){if(n&&n.status==0&&n.message=="NOTOK"&&(n.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");throw t.result=JSON.stringify(n),t.throttleRetry=!0,t}if(n.jsonrpc!="2.0"){const t=new Error("invalid response");throw t.result=JSON.stringify(n),t}if(n.error){const t=new Error(n.error.message||"unknown error");throw n.error.code&&(t.code=n.error.code),n.error.data&&(t.data=n.error.data),t}return n.result}function Ye(n){if(n==="pending")throw new Error("pending not supported");return n==="latest"?n:parseInt(n.substring(2),16)}const Ke="9D13ZE7XSBTJ94N9BNJ2MA33VMAY2YPIRB";function Re(n,t,e){if(n==="call"&&t.code===v.errors.SERVER_ERROR){const s=t.error;if(s&&(s.message.match(/reverted/i)||s.message.match(/VM execution error/i))){let o=s.data;if(o&&(o="0x"+o.replace(/^.*0x/i,"")),G(o))return o;J.throwError("missing revert data in call exception",v.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let r=t.message;throw t.code===v.errors.SERVER_ERROR&&(t.error&&typeof t.error.message=="string"?r=t.error.message:typeof t.body=="string"?r=t.body:typeof t.responseText=="string"&&(r=t.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&J.throwError("insufficient funds for intrinsic transaction cost",v.errors.INSUFFICIENT_FUNDS,{error:t,method:n,transaction:e}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&J.throwError("nonce has already been used",v.errors.NONCE_EXPIRED,{error:t,method:n,transaction:e}),r.match(/another transaction with same nonce/)&&J.throwError("replacement fee too low",v.errors.REPLACEMENT_UNDERPRICED,{error:t,method:n,transaction:e}),r.match(/execution failed due to an exception|execution reverted/)&&J.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",v.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:n,transaction:e}),t}class pt extends Ue{constructor(t,e){super(t),B(this,"baseUrl",this.getBaseUrl()),B(this,"apiKey",e||Ke)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"ropsten":return"https://api-ropsten.etherscan.io";case"rinkeby":return"https://api-rinkeby.etherscan.io";case"kovan":return"https://api-kovan.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"optimism":return"https://api-optimistic.etherscan.io"}return J.throwArgumentError("unsupported network","network",this.network.name)}getUrl(t,e){const r=Object.keys(e).reduce((o,a)=>{const u=e[a];return u!=null&&(o+=`&${a}=${u}`),o},""),s=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${t}${r}${s}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(t,e){return e.module=t,e.apikey=this.apiKey,e}fetch(t,e,r){return be(this,void 0,void 0,function*(){const s=r?this.getPostUrl():this.getUrl(t,e),o=r?this.getPostData(t,e):null,a=t==="proxy"?Ve:qs;this.emit("debug",{action:"request",request:s,provider:this});const u={url:s,throttleSlotInterval:1e3,throttleCallback:(l,p)=>(this.isCommunityResource()&&he(),Promise.resolve(!0))};let i=null;o&&(u.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},i=Object.keys(o).map(l=>`${l}=${o[l]}`).join("&"));const c=yield Me(u,i,a||Ve);return this.emit("debug",{action:"response",request:s,response:te(c),provider:this}),c})}detectNetwork(){return be(this,void 0,void 0,function*(){return this.network})}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return be(this,void 0,void 0,function*(){switch(t){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch(s=>Re("sendTransaction",s,e.signedTransaction));case"getBlock":if(e.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.transactionHash});case"call":{if(e.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const s=Je(e.transaction);s.module="proxy",s.action="eth_call";try{return yield this.fetch("proxy",s,!0)}catch(o){return Re("call",o,e.transaction)}}case"estimateGas":{const s=Je(e.transaction);s.module="proxy",s.action="eth_estimateGas";try{return yield this.fetch("proxy",s,!0)}catch(o){return Re("estimateGas",o,e.transaction)}}case"getLogs":{const s={action:"getLogs"};if(e.filter.fromBlock&&(s.fromBlock=Ye(e.filter.fromBlock)),e.filter.toBlock&&(s.toBlock=Ye(e.filter.toBlock)),e.filter.address&&(s.address=e.filter.address),e.filter.topics&&e.filter.topics.length>0&&(e.filter.topics.length>1&&J.throwError("unsupported topic count",v.errors.UNSUPPORTED_OPERATION,{topics:e.filter.topics}),e.filter.topics.length===1)){const u=e.filter.topics[0];(typeof u!="string"||u.length!==66)&&J.throwError("unsupported topic format",v.errors.UNSUPPORTED_OPERATION,{topic0:u}),s.topic0=u}const o=yield this.fetch("logs",s);let a={};for(let u=0;u<o.length;u++){const i=o[u];if(i.blockHash==null){if(a[i.blockNumber]==null){const c=yield this.getBlock(i.blockNumber);c&&(a[i.blockNumber]=c.hash)}i.blockHash=a[i.blockNumber]}}return o}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,t,e)})}getHistory(t,e,r){return be(this,void 0,void 0,function*(){const s={action:"txlist",address:yield this.resolveName(t),startblock:e??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",s)).map(a=>{["contractAddress","to"].forEach(function(i){a[i]==""&&delete a[i]}),a.creates==null&&a.contractAddress!=null&&(a.creates=a.contractAddress);const u=this.formatter.transactionResponse(a);return a.timeStamp&&(u.timestamp=parseInt(a.timeStamp)),u})})}isCommunityResource(){return this.apiKey===Ke}}var Te=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function u(l){try{c(r.next(l))}catch(p){a(p)}}function i(l){try{c(r.throw(l))}catch(p){a(p)}}function c(l){l.done?o(l.value):s(l.value).then(u,i)}c((r=r.apply(n,t||[])).next())})};const Z=new v(H);function ve(){return new Date().getTime()}function Ze(n){let t=null;for(let e=0;e<n.length;e++){const r=n[e];if(r==null)return null;t?t.name===r.name&&t.chainId===r.chainId&&(t.ensAddress===r.ensAddress||t.ensAddress==null&&r.ensAddress==null)||Z.throwArgumentError("provider mismatch","networks",n):t=r}return t}function Xe(n,t){n=n.slice().sort();const e=Math.floor(n.length/2);if(n.length%2)return n[e];const r=n[e-1],s=n[e];return t!=null&&Math.abs(r-s)>t?null:(r+s)/2}function ee(n){if(n===null)return"null";if(typeof n=="number"||typeof n=="boolean")return JSON.stringify(n);if(typeof n=="string")return n;if(De.isBigNumber(n))return n.toString();if(Array.isArray(n))return JSON.stringify(n.map(t=>ee(t)));if(typeof n=="object"){const t=Object.keys(n);return t.sort(),"{"+t.map(e=>{let r=n[e];return typeof r=="function"?r="[function]":r=ee(r),JSON.stringify(e)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof n)}let Hs=1;function Qe(n){let t=null,e=null,r=new Promise(a=>{t=function(){e&&(clearTimeout(e),e=null),a()},e=setTimeout(t,n)});const s=a=>(r=r.then(a),r);function o(){return r}return{cancel:t,getPromise:o,wait:s}}const Ls=[v.errors.CALL_EXCEPTION,v.errors.INSUFFICIENT_FUNDS,v.errors.NONCE_EXPIRED,v.errors.REPLACEMENT_UNDERPRICED,v.errors.UNPREDICTABLE_GAS_LIMIT],Ws=["address","args","errorArgs","errorSignature","method","transaction"];function we(n,t){const e={weight:n.weight};return Object.defineProperty(e,"provider",{get:()=>n.provider}),n.start&&(e.start=n.start),t&&(e.duration=t-n.start),n.done&&(n.error?e.error=n.error:e.result=n.result||null),e}function zs(n,t){return function(e){const r={};e.forEach(o=>{const a=n(o.result);r[a]||(r[a]={count:0,result:o.result}),r[a].count++});const s=Object.keys(r);for(let o=0;o<s.length;o++){const a=r[s[o]];if(a.count>=t)return a.result}}}function Gs(n,t,e){let r=ee;switch(t){case"getBlockNumber":return function(s){const o=s.map(u=>u.result);let a=Xe(s.map(u=>u.result),2);if(a!=null)return a=Math.ceil(a),o.indexOf(a+1)>=0&&a++,a>=n._highestBlockNumber&&(n._highestBlockNumber=a),n._highestBlockNumber};case"getGasPrice":return function(s){const o=s.map(a=>a.result);return o.sort(),o[Math.floor(o.length/2)]};case"getEtherPrice":return function(s){return Xe(s.map(o=>o.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(s){return s==null?null:(s=re(s),s.confirmations=-1,ee(s))};break;case"getBlock":e.includeTransactions?r=function(s){return s==null?null:(s=re(s),s.transactions=s.transactions.map(o=>(o=re(o),o.confirmations=-1,o)),ee(s))}:r=function(s){return s==null?null:ee(s)};break;default:throw new Error("unknown method: "+t)}return zs(r,n.quorum)}function ne(n,t){return Te(this,void 0,void 0,function*(){const e=n.provider;return e.blockNumber!=null&&e.blockNumber>=t||t===-1?e:at(()=>new Promise((r,s)=>{setTimeout(function(){return e.blockNumber>=t?r(e):n.cancelled?r(null):r(void 0)},0)}),{oncePoll:e})})}function Js(n,t,e,r){return Te(this,void 0,void 0,function*(){let s=n.provider;switch(e){case"getBlockNumber":case"getGasPrice":return s[e]();case"getEtherPrice":if(s.getEtherPrice)return s.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&G(r.blockTag)&&(s=yield ne(n,t)),s[e](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&G(r.blockTag)&&(s=yield ne(n,t)),s.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&G(r.blockTag)&&(s=yield ne(n,t)),s[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&G(r.blockTag)&&(s=yield ne(n,t)),s[e](r.transaction);case"getTransaction":case"getTransactionReceipt":return s[e](r.transactionHash);case"getLogs":{let o=r.filter;return(o.fromBlock&&G(o.fromBlock)||o.toBlock&&G(o.toBlock))&&(s=yield ne(n,t)),s.getLogs(o)}}return Z.throwError("unknown method error",v.errors.UNKNOWN_ERROR,{method:e,params:r})})}class mt extends Ue{constructor(t,e){t.length===0&&Z.throwArgumentError("missing providers","providers",t);const r=t.map((a,u)=>{if(nt.isProvider(a)){const l=Be(a)?2e3:750;return Object.freeze({provider:a,weight:1,stallTimeout:l,priority:1})}const i=re(a);i.priority==null&&(i.priority=1),i.stallTimeout==null&&(i.stallTimeout=Be(a)?2e3:750),i.weight==null&&(i.weight=1);const c=i.weight;return(c%1||c>512||c<1)&&Z.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${u}].weight`,c),Object.freeze(i)}),s=r.reduce((a,u)=>a+u.weight,0);e==null?e=s/2:e>s&&Z.throwArgumentError("quorum will always fail; larger than total weight","quorum",e);let o=Ze(r.map(a=>a.provider.network));o==null&&(o=new Promise((a,u)=>{setTimeout(()=>{this.detectNetwork().then(a,u)},0)})),super(o),B(this,"providerConfigs",Object.freeze(r)),B(this,"quorum",e),this._highestBlockNumber=-1}detectNetwork(){return Te(this,void 0,void 0,function*(){const t=yield Promise.all(this.providerConfigs.map(e=>e.provider.getNetwork()));return Ze(t)})}perform(t,e){return Te(this,void 0,void 0,function*(){if(t==="sendTransaction"){const i=yield Promise.all(this.providerConfigs.map(c=>c.provider.sendTransaction(e.signedTransaction).then(l=>l.hash,l=>l)));for(let c=0;c<i.length;c++){const l=i[c];if(typeof l=="string")return l}throw i[0]}this._highestBlockNumber===-1&&t!=="getBlockNumber"&&(yield this.getBlockNumber());const r=Gs(this,t,e),s=ot(this.providerConfigs.map(re));s.sort((i,c)=>i.priority-c.priority);const o=this._highestBlockNumber;let a=0,u=!0;for(;;){const i=ve();let c=s.filter(m=>m.runner&&i-m.start<m.stallTimeout).reduce((m,h)=>m+h.weight,0);for(;c<this.quorum&&a<s.length;){const m=s[a++],h=Hs++;m.start=ve(),m.staller=Qe(m.stallTimeout),m.staller.wait(()=>{m.staller=null}),m.runner=Js(m,o,t,e).then(b=>{m.done=!0,m.result=b,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:h,backend:we(m,ve()),request:{method:t,params:te(e)},provider:this})},b=>{m.done=!0,m.error=b,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:h,backend:we(m,ve()),request:{method:t,params:te(e)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:h,backend:we(m,null),request:{method:t,params:te(e)},provider:this}),c+=m.weight}const l=[];s.forEach(m=>{m.done||!m.runner||(l.push(m.runner),m.staller&&l.push(m.staller.getPromise()))}),l.length&&(yield Promise.race(l));const p=s.filter(m=>m.done&&m.error==null);if(p.length>=this.quorum){const m=r(p);if(m!==void 0)return s.forEach(h=>{h.staller&&h.staller.cancel(),h.cancelled=!0}),m;u||(yield Qe(100).getPromise()),u=!1}const C=s.reduce((m,h)=>{if(!h.done||h.error==null)return m;const b=h.error.code;return Ls.indexOf(b)>=0&&(m[b]||(m[b]={error:h.error,weight:0}),m[b].weight+=h.weight),m},{});if(Object.keys(C).forEach(m=>{const h=C[m];if(h.weight<this.quorum)return;s.forEach(d=>{d.staller&&d.staller.cancel(),d.cancelled=!0});const b=h.error,_={};Ws.forEach(d=>{b[d]!=null&&(_[d]=b[d])}),Z.throwError(b.reason||b.message,m,_)}),s.filter(m=>!m.done).length===0)break}return s.forEach(i=>{i.staller&&i.staller.cancel(),i.cancelled=!0}),Z.throwError("failed to meet quorum",v.errors.SERVER_ERROR,{method:t,params:e,results:s.map(i=>we(i)),provider:this})})}}const bt=null,_e=new v(H),ie="84842078b09946638c03157f83405213";class vt extends Ae{constructor(t,e){const r=new He(t,e),s=r.connection;s.password&&_e.throwError("INFURA WebSocket project secrets unsupported",v.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const o=s.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(o,t),B(this,"apiKey",r.projectId),B(this,"projectId",r.projectId),B(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===ie}}class He extends W{static getWebSocketProvider(t,e){return new vt(t,e)}static getApiKey(t){const e={apiKey:ie,projectId:ie,projectSecret:null};return t==null||(typeof t=="string"?e.projectId=t:t.projectSecret!=null?(_e.assertArgument(typeof t.projectId=="string","projectSecret requires a projectId","projectId",t.projectId),_e.assertArgument(typeof t.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),e.projectId=t.projectId,e.projectSecret=t.projectSecret):t.projectId&&(e.projectId=t.projectId),e.apiKey=e.projectId),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"ropsten":r="ropsten.infura.io";break;case"rinkeby":r="rinkeby.infura.io";break;case"kovan":r="kovan.infura.io";break;case"goerli":r="goerli.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-kovan":r="optimism-kovan.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-rinkeby":r="arbitrum-rinkeby.infura.io";break;default:_e.throwError("unsupported network",v.errors.INVALID_ARGUMENT,{argument:"network",value:t})}const s={allowGzip:!0,url:"https://"+r+"/v3/"+e.projectId,throttleCallback:(o,a)=>(e.projectId===ie&&he(),Promise.resolve(!0))};return e.projectSecret!=null&&(s.user="",s.password=e.projectSecret),s}isCommunityResource(){return this.projectId===ie}}class Vs extends se{send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const s={request:r,resolve:null,reject:null},o=new Promise((a,u)=>{s.resolve=a,s.reject=u});return this._pendingBatch.push(s),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const a=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const u=a.map(i=>i.request);return this.emit("debug",{action:"requestBatch",request:te(u),provider:this}),Me(this.connection,JSON.stringify(u)).then(i=>{this.emit("debug",{action:"response",request:u,response:i,provider:this}),a.forEach((c,l)=>{const p=i[l];if(p.error){const C=new Error(p.error.message);C.code=p.error.code,C.data=p.error.data,c.reject(C)}else c.resolve(p.result)})},i=>{this.emit("debug",{action:"response",error:i,request:u,provider:this}),a.forEach(c=>{c.reject(i)})})},10)),o}}const Ce=new v(H),Ys="ETHERS_JS_SHARED";class wt extends W{static getApiKey(t){return t&&typeof t!="string"&&Ce.throwArgumentError("invalid apiKey","apiKey",t),t||Ys}static getUrl(t,e){Ce.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(t.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:Ce.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+e}}const K=new v(H),et={homestead:"6004bcd10040261633ade990",ropsten:"6004bd4d0040261633ade991",rinkeby:"6004bda20040261633ade994",goerli:"6004bd860040261633ade992"};class yt extends W{constructor(t,e){if(e==null){const r=le(new.target,"getNetwork")(t);if(r){const s=et[r.name];s&&(e={applicationId:s,loadBalancer:!0})}e==null&&K.throwError("unsupported network",v.errors.INVALID_ARGUMENT,{argument:"network",value:t})}super(t,e)}static getApiKey(t){t==null&&K.throwArgumentError("PocketProvider.getApiKey does not support null apiKey","apiKey",t);const e={applicationId:null,loadBalancer:!1,applicationSecretKey:null};return typeof t=="string"?e.applicationId=t:t.applicationSecretKey!=null?(K.assertArgument(typeof t.applicationId=="string","applicationSecretKey requires an applicationId","applicationId",t.applicationId),K.assertArgument(typeof t.applicationSecretKey=="string","invalid applicationSecretKey","applicationSecretKey","[REDACTED]"),e.applicationId=t.applicationId,e.applicationSecretKey=t.applicationSecretKey,e.loadBalancer=!!t.loadBalancer):t.applicationId?(K.assertArgument(typeof t.applicationId=="string","apiKey.applicationId must be a string","apiKey.applicationId",t.applicationId),e.applicationId=t.applicationId,e.loadBalancer=!!t.loadBalancer):K.throwArgumentError("unsupported PocketProvider apiKey","apiKey",t),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"goerli":r="eth-goerli.gateway.pokt.network";break;default:K.throwError("unsupported network",v.errors.INVALID_ARGUMENT,{argument:"network",value:t})}let s=null;e.loadBalancer?s=`https://${r}/v1/lb/${e.applicationId}`:s=`https://${r}/v1/${e.applicationId}`;const o={url:s};return o.headers={},e.applicationSecretKey!=null&&(o.user="",o.password=e.applicationSecretKey),o}isCommunityResource(){return this.applicationId===et[this.network.name]}}const tt=new v(H);function _t(n,t){if(n==null&&(n="homestead"),typeof n=="string"){const r=n.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new se(n);case"ws":case"wss":return new Ae(n);default:tt.throwArgumentError("unsupported URL scheme","network",n)}}const e=it(n);return(!e||!e._defaultProvider)&&tt.throwError("unsupported getDefaultProvider network",v.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:n}),e._defaultProvider({FallbackProvider:mt,AlchemyProvider:qe,AnkrProvider:ft,CloudflareProvider:gt,EtherscanProvider:pt,InfuraProvider:He,JsonRpcProvider:se,NodesmithProvider:wt,PocketProvider:yt,Web3Provider:lt,IpcProvider:bt},t)}const Ks=Object.freeze(Object.defineProperty({__proto__:null,AlchemyProvider:qe,AlchemyWebSocketProvider:ht,AnkrProvider:ft,BaseProvider:Ue,CloudflareProvider:gt,EtherscanProvider:pt,FallbackProvider:mt,Formatter:Dt,InfuraProvider:He,InfuraWebSocketProvider:vt,IpcProvider:bt,JsonRpcBatchProvider:Vs,JsonRpcProvider:se,JsonRpcSigner:Ut,NodesmithProvider:wt,PocketProvider:yt,Provider:nt,Resolver:Mt,StaticJsonRpcProvider:dt,UrlJsonRpcProvider:W,Web3Provider:lt,WebSocketProvider:Ae,getDefaultProvider:_t,getNetwork:it,isCommunityResourcable:Ft,isCommunityResource:Be,showThrottleMessage:he},Symbol.toStringTag,{value:"Module"})),Zs=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:qt,ConstructorFragment:Ht,ErrorFragment:Lt,EventFragment:Wt,FormatTypes:zt,Fragment:Gt,FunctionFragment:Jt,HDNode:Vt,Indexed:Yt,Interface:Kt,LogDescription:Zt,Logger:v,ParamType:Xt,RLP:Qt,SigningKey:er,get SupportedAlgorithm(){return tr},TransactionDescription:rr,get TransactionTypes(){return sr},get UnicodeNormalizationForm(){return nr},Utf8ErrorFuncs:or,get Utf8ErrorReason(){return ar},_TypedDataEncoder:ir,_fetchData:lr,_toEscapedUtf8String:cr,accessListify:st,arrayify:ur,base58:dr,base64:hr,checkProperties:fr,checkResultErrors:gr,commify:pr,computeAddress:mr,computeHmac:br,computePublicKey:vr,concat:wr,deepCopy:te,defaultAbiCoder:yr,defaultPath:_r,defineReadOnly:B,dnsEncode:kr,entropyToMnemonic:Er,fetchJson:Me,formatBytes32String:xr,formatEther:Sr,formatUnits:Tr,getAccountPath:Pr,getAddress:Ar,getContractAddress:Nr,getCreate2Address:Ir,getIcapAddress:$r,getJsonWalletAddress:Rr,getStatic:le,hashMessage:Cr,hexConcat:Or,hexDataLength:Br,hexDataSlice:jr,hexStripZeros:Dr,hexValue:rt,hexZeroPad:Ur,hexlify:Oe,id:Mr,isAddress:Fr,isBytes:qr,isBytesLike:Hr,isHexString:G,isValidMnemonic:Lr,isValidName:Wr,joinSignature:zr,keccak256:Gr,mnemonicToEntropy:Jr,mnemonicToSeed:Vr,namehash:Yr,nameprep:Kr,parseBytes32String:Zr,parseEther:Xr,parseTransaction:Qr,parseUnits:es,poll:at,randomBytes:ts,recoverAddress:rs,recoverPublicKey:ss,resolveProperties:ns,ripemd160:os,serializeTransaction:as,sha256:is,sha512:ls,shallowCopy:re,shuffled:ot,solidityKeccak256:cs,solidityPack:us,soliditySha256:ds,splitSignature:hs,stripZeros:fs,toUtf8Bytes:gs,toUtf8CodePoints:ps,toUtf8String:ms,verifyMessage:bs,verifyTypedData:vs,zeroPad:ws},Symbol.toStringTag,{value:"Module"})),kt="ethers/5.6.8",Xs=new v(kt),Et=Object.freeze(Object.defineProperty({__proto__:null,BaseContract:ys,BigNumber:De,Contract:ct,ContractFactory:_s,FixedNumber:ks,Signer:Es,VoidSigner:xs,Wallet:ue,Wordlist:Ss,constants:Bs,get errors(){return Ts},getDefaultProvider:_t,logger:Xs,providers:Ks,utils:Zs,version:kt,wordlists:Ps},Symbol.toStringTag,{value:"Module"}));try{const n=window;n._ethers==null&&(n._ethers=Et)}catch{}var xt={exports:{}};(function(n,t){(function(e,r){n.exports=r()})(As,function(){var e,r,s=1e3,o=6e4,a=36e5,u=864e5,i=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=31536e6,l=2592e6,p=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,C={years:c,months:l,days:u,hours:a,minutes:o,seconds:s,milliseconds:1,weeks:6048e5},m=function(k){return k instanceof T},h=function(k,g,f){return new T(k,f,g.$l)},b=function(k){return r.p(k)+"s"},_=function(k){return k<0},d=function(k){return _(k)?Math.ceil(k):Math.floor(k)},w=function(k){return Math.abs(k)},P=function(k,g){return k?_(k)?{negative:!0,format:""+w(k)+g}:{negative:!1,format:""+k+g}:{negative:!1,format:""}},T=function(){function k(f,A,y){var R=this;if(this.$d={},this.$l=y,f===void 0&&(this.$ms=0,this.parseFromMilliseconds()),A)return h(f*C[b(A)],this);if(typeof f=="number")return this.$ms=f,this.parseFromMilliseconds(),this;if(typeof f=="object")return Object.keys(f).forEach(function(z){R.$d[b(z)]=f[z]}),this.calMilliseconds(),this;if(typeof f=="string"){var U=f.match(p);if(U){var F=U.slice(2).map(function(z){return z!=null?Number(z):0});return this.$d.years=F[0],this.$d.months=F[1],this.$d.weeks=F[2],this.$d.days=F[3],this.$d.hours=F[4],this.$d.minutes=F[5],this.$d.seconds=F[6],this.calMilliseconds(),this}}return this}var g=k.prototype;return g.calMilliseconds=function(){var f=this;this.$ms=Object.keys(this.$d).reduce(function(A,y){return A+(f.$d[y]||0)*C[y]},0)},g.parseFromMilliseconds=function(){var f=this.$ms;this.$d.years=d(f/c),f%=c,this.$d.months=d(f/l),f%=l,this.$d.days=d(f/u),f%=u,this.$d.hours=d(f/a),f%=a,this.$d.minutes=d(f/o),f%=o,this.$d.seconds=d(f/s),f%=s,this.$d.milliseconds=f},g.toISOString=function(){var f=P(this.$d.years,"Y"),A=P(this.$d.months,"M"),y=+this.$d.days||0;this.$d.weeks&&(y+=7*this.$d.weeks);var R=P(y,"D"),U=P(this.$d.hours,"H"),F=P(this.$d.minutes,"M"),z=this.$d.seconds||0;this.$d.milliseconds&&(z+=this.$d.milliseconds/1e3);var Ne=P(z,"S"),St=f.negative||A.negative||R.negative||U.negative||F.negative||Ne.negative,Tt=U.format||F.format||Ne.format?"T":"",Ie=(St?"-":"")+"P"+f.format+A.format+R.format+Tt+U.format+F.format+Ne.format;return Ie==="P"||Ie==="-P"?"P0D":Ie},g.toJSON=function(){return this.toISOString()},g.format=function(f){var A=f||"YYYY-MM-DDTHH:mm:ss",y={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return A.replace(i,function(R,U){return U||String(y[R])})},g.as=function(f){return this.$ms/C[b(f)]},g.get=function(f){var A=this.$ms,y=b(f);return y==="milliseconds"?A%=1e3:A=y==="weeks"?d(A/C[y]):this.$d[y],A===0?0:A},g.add=function(f,A,y){var R;return R=A?f*C[b(A)]:m(f)?f.$ms:h(f,this).$ms,h(this.$ms+R*(y?-1:1),this)},g.subtract=function(f,A){return this.add(f,A,!0)},g.locale=function(f){var A=this.clone();return A.$l=f,A},g.clone=function(){return h(this.$ms,this)},g.humanize=function(f){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!f)},g.milliseconds=function(){return this.get("milliseconds")},g.asMilliseconds=function(){return this.as("milliseconds")},g.seconds=function(){return this.get("seconds")},g.asSeconds=function(){return this.as("seconds")},g.minutes=function(){return this.get("minutes")},g.asMinutes=function(){return this.as("minutes")},g.hours=function(){return this.get("hours")},g.asHours=function(){return this.as("hours")},g.days=function(){return this.get("days")},g.asDays=function(){return this.as("days")},g.weeks=function(){return this.get("weeks")},g.asWeeks=function(){return this.as("weeks")},g.months=function(){return this.get("months")},g.asMonths=function(){return this.as("months")},g.years=function(){return this.get("years")},g.asYears=function(){return this.as("years")},k}();return function(k,g,f){e=f,r=f().$utils(),f.duration=function(R,U){var F=f.locale();return h(R,{$l:F},U)},f.isDuration=m;var A=g.prototype.add,y=g.prototype.subtract;g.prototype.add=function(R,U){return m(R)&&(R=R.asMilliseconds()),A.bind(this)(R,U)},g.prototype.subtract=function(R,U){return m(R)&&(R=R.asMilliseconds()),y.bind(this)(R,U)}}})})(xt);var Qs=xt.exports;const en=Ns(Qs),tn={class:"mr-1"},rn={class:"text-gray-500 text-sm"},sn={class:"text-gray-500 text-sm ml-1"},nn={key:0},on={key:1},an={key:2},Pe=fe({__name:"DragonNft",props:{dragon:{},isShowTransfer:{type:Boolean}},emits:["onRefresh"],setup(n,{emit:t}){const{dragon:e,isShowTransfer:r=!0}=n,s=ge(),o=M(!1),a=M(""),u=()=>{o.value=!0},i=M(!1),c=M([{text:"",value:"",disabled:!0}]),l=()=>{let h=[];for(let b=0;b<s.address.length;b++){let _=s.address[b].nickname+" "+Is(s.address[b].address),d=s.address[b].address,w=!1;b==s.changeAddressIndex&&(w=!0,_+=" <发送地址>"),h.push({text:_,value:d,disabled:w})}c.value=h,i.value=!0},p=({selectedValues:h})=>{a.value=h[0],i.value=!1},C=async()=>{de({duration:0,message:"开蛋抽券中"});let h=s.address[s.changeAddressIndex].address.toLowerCase(),_="dragon_open_egg_"+Math.floor(Date.now()/36e5)+"_"+e.hatch_id;console.log("sign_message",_);let d=s.address[s.changeAddressIndex].key,P=await new ue(d,Ee).signMessage(_),T=await s.openEgg(e.hatch_id,h,P);if(console.log(T),T.code==2e4){Y();let k="随机幸运属性为："+je[T.data.luckyEle],g="没有抽到奖券。";T.data.ticket>0&&(g="抽到奖券："+T.data.ticket),$s({title:"抽券结果",message:k+"。"+g}).then(()=>{t("onRefresh")})}else Y(),xe(T.info)},m=async()=>{de({duration:0,message:"操作执行中"});try{let h=s.address[s.changeAddressIndex].address,b=s.address[s.changeAddressIndex].key,_=new ue(b,Ee);await(await new ct(Le.address,Le.abi,_).safeTransferFrom(h,a.value,e.id,"0x00")).wait()}catch(h){Y(),xe(h.toString()),console.log("Error!"),await Se(2e3)}await Se(1e3),t("onRefresh")};return(h,b)=>{const _=$("van-tag"),d=$("van-count-down"),w=$("van-button"),P=$("van-cell"),T=$("van-field"),k=$("van-cell-group"),g=$("van-dialog"),f=$("van-picker"),A=$("van-popup");return N(),j(V,null,[S("div",{class:oe(["rounded-lg shadow-lg max-w-sm p-1 border-1 text-center","border-"+O(Q).find(y=>y.quality==h.dragon.level).color+"-500"])},[S("div",null,[S("span",tn,I(h.dragon.name),1),E(_,{plain:"",color:O(Q).find(y=>y.quality==h.dragon.level).rgb},{default:x(()=>[D(I(O(Q).find(y=>y.quality==h.dragon.level).name),1)]),_:1},8,["color"])]),S("div",rn,"#"+I(h.dragon.id),1),S("div",null,[(N(!0),j(V,null,ke(h.dragon.elements,(y,R)=>(N(),L(_,{class:"mr-1",plain:"",key:R},{default:x(()=>[D(I(O(je)[y]),1)]),_:2},1024))),128)),S("span",sn,I(h.dragon.attrs[6])+"/7",1)]),h.dragon.diffTimeStamp>0?(N(),j("div",nn,[E(d,{class:"text-xs",time:h.dragon.diffTimeStamp,format:"DD 天 HH 时 mm 分 ss 秒"},null,8,["time"])])):q("",!0),h.dragon.state==0&&h.dragon.hatch_id==0&&h.isShowTransfer?(N(),j("div",on,[E(w,{plain:"",type:"default",size:"small",class:"m-2",onClick:b[0]||(b[0]=y=>u())},{default:x(()=>[D(" 转账 ")]),_:1})])):q("",!0),h.dragon.state==0&&h.dragon.hatch_id!=0&&h.isShowTransfer?(N(),j("div",an,[E(w,{plain:"",type:"primary",size:"small",class:"m-2",onClick:b[1]||(b[1]=y=>C())},{default:x(()=>[D(" 开蛋抽券 ")]),_:1})])):q("",!0),S("div",null,[h.dragon.state==1?(N(),L(_,{key:0,type:"warning"},{default:x(()=>[D("繁殖中")]),_:1})):q("",!0)]),S("div",null,[h.dragon.state==2?(N(),L(_,{key:0,type:"primary"},{default:x(()=>[D("孵化蛋")]),_:1})):q("",!0)])],2),E(g,{show:o.value,"onUpdate:show":b[3]||(b[3]=y=>o.value=y),title:"转账","show-cancel-button":"",onConfirm:m},{default:x(()=>[E(k,{inset:""},{default:x(()=>[E(P,{title:"发送昵称",value:O(s).address[O(s).changeAddressIndex].nickname},null,8,["value"]),E(P,{title:"发送地址",value:O(s).address[O(s).changeAddressIndex].address},null,8,["value"]),E(P,{title:"NFT"},{"right-icon":x(()=>[S("div",null,[D(I(h.dragon.name)+" id:"+I(h.dragon.id)+" ",1),E(_,{plain:"",color:O(Q).find(y=>y.quality==h.dragon.level).rgb},{default:x(()=>[D(I(O(Q).find(y=>y.quality==h.dragon.level).name),1)]),_:1},8,["color"]),D(" "+I(h.dragon.attrs[6])+"/7 ",1)])]),_:1}),E(T,{modelValue:a.value,"onUpdate:modelValue":b[2]||(b[2]=y=>a.value=y),label:"接受地址"},{button:x(()=>[E(w,{size:"small",type:"primary",onClick:l},{default:x(()=>[D("选择")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["show"]),E(A,{show:i.value,"onUpdate:show":b[5]||(b[5]=y=>i.value=y),round:"",position:"bottom",teleport:"body"},{default:x(()=>[E(f,{columns:c.value,onCancel:b[4]||(b[4]=y=>i.value=!1),onConfirm:p,onClickOption:p},null,8,["columns"])]),_:1},8,["show"])],64)}}}),ln={key:0},cn={class:"m-2 text-center"},un={class:"m-2 text-gray-500 text-center text-sm"},dn={class:"text-gray-800"},hn={class:"text-gray-400 ml-1 text-xs"},fn={class:"mt-4 mb-2 text-center"},gn=fe({__name:"DragonBreed",props:{dragons:{}},emits:["onRefresh"],setup(n,{emit:t}){const e=n,r=ge(),s=M(!1),o=M(0),a=M({fa_level:1,ma_level:1,level_1:70,level_2:30,level_3:0,level_4:0}),u=M([{name:"没有可选择的Dragon",disabled:!0,index:-1}]),i=M([-1,-1]),c=M(0),l=()=>{let _=[];for(let d=0;d<e.dragons.length;d++){let w="";for(let g=0;g<e.dragons[d].elements.length;g++)w=w+" "+je[e.dragons[d].elements[g]];let P=Q.find(g=>g.quality==e.dragons[d].level).name+" "+e.dragons[d].name+" "+e.dragons[d].attrs[6]+"/7 "+w,T=!1;(d==i.value[0]||d==i.value[1])&&(T=!0,P+=" <已选>");let k=-1;if(i.value[0]>-1&&(k=i.value[0]),i.value[1]>-1&&(k=i.value[1]),k>-1&&k!=d){let g=e.dragons[k];(e.dragons[d].attrs[8]==g.id||e.dragons[d].attrs[9]==g.id)&&(T=!0,P+=" <父母>"),(e.dragons[d].attrs[8]==g.attrs[8]||e.dragons[d].attrs[8]==g.attrs[9]||e.dragons[d].attrs[9]==g.attrs[8]||e.dragons[d].attrs[9]==g.attrs[9])&&(T=!0,P+=" <同代>")}_.push({name:P,disabled:T,index:d})}e.dragons.length>0?u.value=_:u.value=[{name:"没有可选择的Dragon",disabled:!0,index:-1}]},p=_=>{c.value=_,l(),s.value=!0},C=async _=>{if(i.value[c.value]=_.index,i.value[0]>-1&&i.value[1]>-1){let d=e.dragons[i.value[0]].level,w=e.dragons[i.value[1]].level,P=We.find(T=>T.fa_level==d&&T.ma_level==w);P||(P=We.find(T=>T.fa_level==w&&T.ma_level==d)),console.log("res_chance",P),P&&(a.value=P),await m()}},m=async()=>{o.value=0;let _=e.dragons[i.value[0]].level,d=e.dragons[i.value[1]].level,w=e.dragons[i.value[0]].attrs[6],P=e.dragons[i.value[1]].attrs[6],T="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",k=await X.getBreedPrice(_,d,w,P,T);o.value=k},h=async()=>{const _=de({duration:0,message:"操作执行中"});let d=r.address[r.changeAddressIndex],w=await X.getSuggestIndex(d.address);if(console.log("suggestIndex",w.toString()),w=="255"){Y(),xe("超出单账号同时繁殖数量！");return}let P=e.dragons[i.value[0]].id,T=e.dragons[i.value[1]].id,k="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",g=o.value,f=new ue(d.key,Ee);try{_.message="开始执行繁殖...",await(await X.connect(f).beginBreed(P,T,w,k,g,{value:g})).wait()}catch(A){Y(),xe(A.toString()),console.log(A),await Se(2e3);return}_.message="开始执行孵化...",await b(),i.value=[-1,-1],t("onRefresh")},b=async()=>{let _=r.address[r.changeAddressIndex],d=await X.getHatchData(_.address);for(console.log("hatchData",d.toString());!(d.status=="1"&&d.bHash!=="0x0000000000000000000000000000000000000000000000000000000000000000");)console.log("不符合孵化条件，5秒后再次检测"),await Se(5e3),d=await X.getHatchData(_.address);console.log("do end breed!");let w=new ue(_.key,Ee);await X.connect(w).endBreed()};return Fe(()=>{l()}),(_,d)=>{const w=$("van-grid-item"),P=$("van-grid"),T=$("van-button"),k=$("van-cell-group"),g=$("van-action-sheet");return N(),j(V,null,[E(k,{inset:""},{default:x(()=>[E(P,{"column-num":3,class:"pt-5 pb-2"},{default:x(()=>[i.value[0]==-1?(N(),L(w,{key:0,class:"rounded-lg max-w-sm p-1 border-2 text-center",icon:"plus",text:"添加",onClick:d[0]||(d[0]=f=>p(0))})):q("",!0),i.value[0]>=0?(N(),L(w,{key:1,onClick:d[2]||(d[2]=f=>p(0))},{default:x(()=>[E(Pe,{dragon:e.dragons[i.value[0]],isShowTransfer:!1,onOnRefresh:d[1]||(d[1]=()=>{})},null,8,["dragon"])]),_:1})):q("",!0),E(w,{icon:"like-o",class:"text-gray-400"}),i.value[1]==-1?(N(),L(w,{key:2,class:"rounded-lg max-w-sm p-1 border-2 text-center",icon:"plus",text:"添加",onClick:d[3]||(d[3]=f=>p(1))})):q("",!0),i.value[1]>=0?(N(),L(w,{key:3,onClick:d[5]||(d[5]=f=>p(1))},{default:x(()=>[E(Pe,{dragon:e.dragons[i.value[1]],isShowTransfer:!1,onOnRefresh:d[4]||(d[4]=()=>{})},null,8,["dragon"])]),_:1})):q("",!0)]),_:1}),i.value[0]>-1&&i.value[1]>-1?(N(),j("div",ln,[S("div",cn,[S("span",{class:oe(["text-sm mr-1","text-gray-500"])},"普通 "+I(a.value.level_1.toFixed(1))+"%",1),S("span",{class:oe(["text-sm mr-1","text-green-500"])},"良好 "+I(a.value.level_2.toFixed(1))+"%",1),S("span",{class:oe(["text-sm mr-1","text-blue-500"])},"稀有 "+I(a.value.level_3.toFixed(1))+"%",1),S("span",{class:oe(["text-sm mr-1","text-fuchsia-500"])},"史诗 "+I(a.value.level_4.toFixed(1))+"%",1)]),S("div",un,[D(" 费用："),S("span",dn,I(parseFloat(O(Et).utils.formatUnits(o.value,"ether")).toFixed(5)),1),D("ETH "),S("span",hn,"账号余额："+I(O(r).balances.eth.toFixed(5))+"ETH",1)]),S("div",fn,[E(T,{type:"primary",onClick:h,disabled:!(o.value>0)},{default:x(()=>[D("繁殖")]),_:1},8,["disabled"])])])):q("",!0)]),_:1}),E(g,{show:s.value,"onUpdate:show":d[6]||(d[6]=f=>s.value=f),actions:u.value,title:"选择MoDragon","close-on-click-action":"",onSelect:C,teleport:"body"},null,8,["show","actions"])],64)}}}),pn={key:0},mn={key:1},bn={class:"text-gray-800"},vn=S("span",{class:"text-xs text-gray-500"},"MoDragon",-1),wn=S("span",{class:"text-xs text-gray-500"},"ETH",-1),yn=S("span",{class:"text-xs text-gray-500"},"ARB",-1),_n=S("span",{class:"text-xs text-gray-500"},"MBOX",-1),kn={class:"m-2"},En={class:"text-lg text-gray-500 ml-3"},xn={class:"grid grid-cols-3 md:lg:xl:grid-cols-6 group bg-white shadow-xl shadow-neutral-100 border"},Sn=S("div",{class:"m-2"},[S("span",{class:"text-lg text-gray-500 ml-3"},"繁殖操作")],-1),Tn={class:"m-2"},Pn={class:"text-lg text-gray-500 ml-3"},An={class:"grid grid-cols-3 md:lg:xl:grid-cols-6 group bg-white shadow-xl shadow-neutral-100 border"},Nn=fe({__name:"account",setup(n){ut.extend(en);const{onActivated:t}=Rs(),e=ge(),r=M([]),s=M([]);Cs(()=>[e.address,e.changeAddressIndex],async(a,u)=>{await o(),await e.getChangeAddressBalance()}),t(async({address:a})=>{await o(),await e.getChangeAddressBalance()}),Fe(async()=>{await o(),await e.getChangeAddressBalance()});async function o(){if(de({duration:0,forbidClick:!0,message:"更新数据"}),e.address.length==0||e.changeAddressIndex<0){Y();return}let a=await e.upOneAddressNft(e.changeAddressIndex);r.value=a.nfts,s.value=a.nfts.filter(u=>u.state==0&&u.hatch_id==0),Y()}return(a,u)=>{const i=$("van-empty"),c=$("van-grid-item"),l=$("van-grid");return N(),j(V,null,[r.value.length==0?(N(),j("div",pn,[E(i,{image:"search",description:"没有发现龙蛋NFT"})])):q("",!0),r.value.length>0?(N(),j("div",mn,[E(l,{class:"m-2","column-num":4},{default:x(()=>[E(c,null,{icon:x(()=>[S("span",bn,I(r.value.length),1)]),text:x(()=>[vn]),_:1}),E(c,null,{icon:x(()=>[S("span",null,I(O(e).balances.eth.toFixed(2)),1)]),text:x(()=>[wn]),_:1}),E(c,null,{icon:x(()=>[S("span",null,I(O(e).balances.arb.toFixed(0)),1)]),text:x(()=>[yn]),_:1}),E(c,null,{icon:x(()=>[S("span",null,I(O(e).balances.mbox.toFixed(0)),1)]),text:x(()=>[_n]),_:1})]),_:1}),S("div",kn,[S("span",En,"空闲状态: "+I(r.value.filter(p=>p.state==0).length),1)]),S("div",xn,[(N(!0),j(V,null,ke(r.value.filter(p=>p.state==0),(p,C)=>(N(),j("div",{key:"dragon0"+C+p.id,class:"m-3"},[E(Pe,{dragon:p,isShowTransfer:!0,onOnRefresh:o},null,8,["dragon"])]))),128))]),Sn,(N(),L(gn,{dragons:s.value,key:O(e).address[O(e).changeAddressIndex].address,onOnRefresh:o},null,8,["dragons"])),S("div",Tn,[S("span",Pn,"繁殖状态: "+I(r.value.filter(p=>p.state>0).length),1)]),S("div",An,[(N(!0),j(V,null,ke(r.value.filter(p=>p.state>0),(p,C)=>(N(),j("div",{key:"dragon"+C,class:"m-3"},[E(Pe,{dragon:p,isShowTransfer:!1,onOnRefresh:o},null,8,["dragon"])]))),128))])])):q("",!0)],64)}}}),In={key:0},$n={class:"text-gray-600 text-sm ml-1"},Rn=S("span",null,null,-1),Cn=S("span",{class:"ml-5 text-gray-500"},"最近一次繁殖结束： ",-1),On={key:1},Bn=fe({__name:"collect",setup(n){const t=ge(),e=M(!1),r=M(0),s=[{text:"空闲数量降序",value:0},{text:"孵蛋时间降序",value:1},{text:"账号顺序降序",value:2}],o=()=>{switch(console.log(r.value),r.value){case 0:t.nftinfos.sort((i,c)=>c.nfts.filter(l=>l.state==0).length-i.nfts.filter(l=>l.state==0).length);break;case 1:t.nftinfos.sort((i,c)=>i.nfts.findIndex(l=>l.state>0)==-1?1:c.nfts.findIndex(l=>l.state>0)==-1?-1:i.nfts.find(l=>l.state>0).attrs[7]-c.nfts.find(l=>l.state>0).attrs[7]);break;case 2:t.nftinfos.sort((i,c)=>i.id-c.id);break}};Fe(()=>{t.getLocalNftinfos()});const a=async()=>{de({duration:0,forbidClick:!0,message:"更新数据"}),e.value=!0,await t.upAllAddressNfts(),o(),e.value=!1,console.log("更新状态"),Y()},u={dropdownMenuHeight:"36px"};return(i,c)=>{const l=$("van-button"),p=$("van-dropdown-item"),C=$("van-dropdown-menu"),m=$("van-config-provider"),h=$("van-cell"),b=$("van-tag"),_=$("van-cell-group"),d=$("van-empty");return O(t).address.length>0?(N(),j("div",In,[E(_,{class:"my-2",inset:""},{default:x(()=>[E(h,{title:"各账号详情",icon:"user-o"},{value:x(()=>[E(l,{type:"success",size:"mini",class:"mr-2",loading:e.value,"loading-text":"读取中",onClick:a},{default:x(()=>[D(" 更新数据 ")]),_:1},8,["loading"])]),extra:x(()=>[E(m,{"theme-vars":u},{default:x(()=>[E(C,null,{default:x(()=>[E(p,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=w=>r.value=w),options:s,onChange:o},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(N(!0),j(V,null,ke(O(t).nftinfos,(w,P)=>(N(),j(V,{key:P+w.address},[E(h,null,{title:x(()=>[E(b,{round:"",plain:"",type:"primary"},{default:x(()=>[D(I(w.id+1),1)]),_:2},1024),S("span",$n,I(w.nickname),1),Rn]),value:x(()=>[D(" 空闲:"+I(w.nfts.filter(T=>T.state==0).length)+"/繁殖:"+I(w.nfts.filter(T=>T.state>0).length),1)]),_:2},1024),w.nfts.findIndex(T=>T.state>0)!=-1?(N(),L(h,{key:0},{title:x(()=>[Cn]),value:x(()=>[D(I(O(ut).unix(w.nfts.find(T=>T.state>0).attrs[7]).format("MM/DDTHH:mm")),1)]),_:2},1024)):q("",!0)],64))),128))]),_:1})])):(N(),j("div",On,[E(d,{description:"账号数量为空"})]))}}}),Dn=fe({__name:"index",setup(n){const t=ge();return(e,r)=>O(t).changeAddressIndex>=0?(N(),L(Nn,{key:0})):(N(),L(Bn,{key:1}))}});export{Dn as default};
