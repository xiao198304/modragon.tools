import{r as mt,c as Ie,g as qt,a as Wr,s as ys}from"./index-d1f37ab9.js";import{t as bs,b as Ms}from"./index-e56acbba.js";var zr={},V={};Object.defineProperty(V,"__esModule",{value:!0});var Ei=V.getLocalStorage=Bi=V.getLocalStorageOrThrow=Ni=V.getCrypto=Oi=V.getCryptoOrThrow=Ai=V.getLocation=Ii=V.getLocationOrThrow=Ti=V.getNavigator=Ri=V.getNavigatorOrThrow=ki=V.getDocument=Ci=V.getDocumentOrThrow=Si=V.getFromWindowOrThrow=xi=V.getFromWindow=void 0;function Ke(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}var xi=V.getFromWindow=Ke;function st(t){const e=Ke(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}var Si=V.getFromWindowOrThrow=st;function Es(){return st("document")}var Ci=V.getDocumentOrThrow=Es;function xs(){return Ke("document")}var ki=V.getDocument=xs;function Ss(){return st("navigator")}var Ri=V.getNavigatorOrThrow=Ss;function Cs(){return Ke("navigator")}var Ti=V.getNavigator=Cs;function ks(){return st("location")}var Ii=V.getLocationOrThrow=ks;function Rs(){return Ke("location")}var Ai=V.getLocation=Rs;function Ts(){return st("crypto")}var Oi=V.getCryptoOrThrow=Ts;function Is(){return Ke("crypto")}var Ni=V.getCrypto=Is;function As(){return st("localStorage")}var Bi=V.getLocalStorageOrThrow=As;function Os(){return Ke("localStorage")}Ei=V.getLocalStorage=Os;Object.defineProperty(zr,"__esModule",{value:!0});var Li=zr.getWindowMetadata=void 0;const qn=V;function Ns(){let t,e;try{t=qn.getDocumentOrThrow(),e=qn.getLocationOrThrow()}catch{return null}function r(){const S=t.getElementsByTagName("link"),k=[];for(let I=0;I<S.length;I++){const T=S[I],A=T.getAttribute("rel");if(A&&A.toLowerCase().indexOf("icon")>-1){const y=T.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let M=e.protocol+"//"+e.host;if(y.indexOf("/")===0)M+=y;else{const C=e.pathname.split("/");C.pop();const E=C.join("/");M+=E+"/"+y}k.push(M)}else if(y.indexOf("//")===0){const M=e.protocol+y;k.push(M)}else k.push(y)}}return k}function n(...S){const k=t.getElementsByTagName("meta");for(let I=0;I<k.length;I++){const T=k[I],A=["itemprop","property","name"].map(y=>T.getAttribute(y)).filter(y=>y?S.includes(y):!1);if(A.length&&A){const y=T.getAttribute("content");if(y)return y}}return""}function s(){let S=n("name","og:site_name","og:title","twitter:title");return S||(S=t.title),S}function i(){return n("description","og:description","twitter:description","keywords")}const c=s(),h=i(),d=e.origin,w=r();return{description:h,url:d,icons:w,name:c}}Li=zr.getWindowMetadata=Ns;var Bs=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],c=0,h=i.length;c<h;c++,s++)n[s]=i[c];return n},Ls=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Ps=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),qs=function(){function t(e,r,n,s){this.name=e,this.version=r,this.os=n,this.bot=s,this.type="bot-device"}return t}(),Us=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Ds=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Hs=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Fs=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Un=3,$s=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",Hs]],Dn=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Ws(t){return t?Hn(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ds:typeof navigator<"u"?Hn(navigator.userAgent):Vs()}function zs(t){return t!==""&&$s.reduce(function(e,r){var n=r[0],s=r[1];if(e)return e;var i=s.exec(t);return!!i&&[n,i]},!1)}function Hn(t){var e=zs(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Us;var s=n[1]&&n[1].split(/[._]/).slice(0,3);s?s.length<Un&&(s=Bs(s,Js(Un-s.length))):s=[];var i=s.join("."),c=js(t),h=Fs.exec(t);return h&&h[1]?new qs(r,i,c,h[1]):new Ls(r,i,c)}function js(t){for(var e=0,r=Dn.length;e<r;e++){var n=Dn[e],s=n[0],i=n[1],c=i.exec(t);if(c)return s}return null}function Vs(){var t=typeof process<"u"&&process.version;return t?new Ps(process.version.slice(1)):null}function Js(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}function Ut(t){return Ws(t)}function Dt(){const t=Ut();return t&&t.os?t.os:void 0}function Pi(){const t=Dt();return t?t.toLowerCase().includes("android"):!1}function qi(){const t=Dt();return t?t.toLowerCase().includes("ios")||t.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function Ui(){return Dt()?Pi()||qi():!1}function Di(){const t=Ut();return t&&t.name?t.name.toLowerCase()==="node":!1}function Hi(){return!Di()&&!!$i()}const Fi=xi,Ks=Si,Qs=Ci,Gs=ki,Ys=Ri,$i=Ti,Xs=Ii,Wi=Ai,Zs=Oi,ea=Ni,ta=Bi,Ht=Ei;function kr(){return Li()}function ra(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function na(t){return typeof t=="string"?t:JSON.stringify(t)}const zi=ra,ji=na;function jr(t,e){const r=ji(e),n=Ht();n&&n.setItem(t,r)}function Vr(t){let e=null,r=null;const n=Ht();return n&&(r=n.getItem(t)),e=r&&zi(r),e}function Jr(t){const e=Ht();e&&e.removeItem(t)}const Tt="WALLETCONNECT_DEEPLINK_CHOICE";function ia(t,e){const r=encodeURIComponent(t);return e.universalLink?`${e.universalLink}/wc?uri=${r}`:e.deepLink?`${e.deepLink}${e.deepLink.endsWith(":")?"//":"/"}wc?uri=${r}`:""}function oa(t){const e=t.href.split("?")[0];jr(Tt,Object.assign(Object.assign({},t),{href:e}))}function Vi(t,e){return t.filter(r=>r.name.toLowerCase().includes(e.toLowerCase()))[0]}function sa(t,e){let r=t;return e&&(r=e.map(n=>Vi(t,n)).filter(Boolean)),r}const Ji="https://registry.walletconnect.com";function aa(){return Ji+"/api/v2/wallets"}function la(){return Ji+"/api/v2/dapps"}function Ki(t,e="mobile"){var r;return{name:t.name||"",shortName:t.metadata.shortName||"",color:t.metadata.colors.primary||"",logo:(r=t.image_url.sm)!==null&&r!==void 0?r:"",universalLink:t[e].universal||"",deepLink:t[e].native||""}}function ca(t,e="mobile"){return Object.values(t).filter(r=>!!r[e].universal||!!r[e].native).map(r=>Ki(r,e))}const ua=Object.freeze(Object.defineProperty({__proto__:null,detectEnv:Ut,detectOS:Dt,formatIOSMobile:ia,formatMobileRegistry:ca,formatMobileRegistryEntry:Ki,getClientMeta:kr,getCrypto:ea,getCryptoOrThrow:Zs,getDappRegistryUrl:la,getDocument:Gs,getDocumentOrThrow:Qs,getFromWindow:Fi,getFromWindowOrThrow:Ks,getLocal:Vr,getLocalStorage:Ht,getLocalStorageOrThrow:ta,getLocation:Wi,getLocationOrThrow:Xs,getMobileLinkRegistry:sa,getMobileRegistryEntry:Vi,getNavigator:$i,getNavigatorOrThrow:Ys,getWalletRegistryUrl:aa,isAndroid:Pi,isBrowser:Hi,isIOS:qi,isMobile:Ui,isNode:Di,mobileLinkChoiceKey:Tt,removeLocal:Jr,safeJsonParse:zi,safeJsonStringify:ji,saveMobileLinkInfo:oa,setLocal:jr},Symbol.toStringTag,{value:"Module"})),ha=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],Kr=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],fa={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",42:"kovan"};var Qr={exports:{}};Qr.exports;(function(t){(function(e,r){function n(m,o){if(!m)throw new Error(o||"Assertion failed")}function s(m,o){m.super_=o;var l=function(){};l.prototype=o.prototype,m.prototype=new l,m.prototype.constructor=m}function i(m,o,l){if(i.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((o==="le"||o==="be")&&(l=o,o=10),this._init(m||0,o||10,l||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var c;try{c=mt.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,l){return o.cmp(l)>0?o:l},i.min=function(o,l){return o.cmp(l)<0?o:l},i.prototype._init=function(o,l,u){if(typeof o=="number")return this._initNumber(o,l,u);if(typeof o=="object")return this._initArray(o,l,u);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),o=o.toString().replace(/\s+/g,"");var f=0;o[0]==="-"&&f++,l===16?this._parseHex(o,f):this._parseBase(o,l,f),o[0]==="-"&&(this.negative=1),this.strip(),u==="le"&&this._initArray(this.toArray(),l,u)},i.prototype._initNumber=function(o,l,u){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),u==="le"&&this._initArray(this.toArray(),l,u)},i.prototype._initArray=function(o,l,u){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var g,b,x=0;if(u==="be")for(f=o.length-1,g=0;f>=0;f-=3)b=o[f]|o[f-1]<<8|o[f-2]<<16,this.words[g]|=b<<x&67108863,this.words[g+1]=b>>>26-x&67108863,x+=24,x>=26&&(x-=26,g++);else if(u==="le")for(f=0,g=0;f<o.length;f+=3)b=o[f]|o[f+1]<<8|o[f+2]<<16,this.words[g]|=b<<x&67108863,this.words[g+1]=b>>>26-x&67108863,x+=24,x>=26&&(x-=26,g++);return this.strip()};function h(m,o,l){for(var u=0,f=Math.min(m.length,l),g=o;g<f;g++){var b=m.charCodeAt(g)-48;u<<=4,b>=49&&b<=54?u|=b-49+10:b>=17&&b<=22?u|=b-17+10:u|=b&15}return u}i.prototype._parseHex=function(o,l){this.length=Math.ceil((o.length-l)/6),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var f,g,b=0;for(u=o.length-6,f=0;u>=l;u-=6)g=h(o,u,u+6),this.words[f]|=g<<b&67108863,this.words[f+1]|=g>>>26-b&4194303,b+=24,b>=26&&(b-=26,f++);u+6!==l&&(g=h(o,l,u+6),this.words[f]|=g<<b&67108863,this.words[f+1]|=g>>>26-b&4194303),this.strip()};function d(m,o,l,u){for(var f=0,g=Math.min(m.length,l),b=o;b<g;b++){var x=m.charCodeAt(b)-48;f*=u,x>=49?f+=x-49+10:x>=17?f+=x-17+10:f+=x}return f}i.prototype._parseBase=function(o,l,u){this.words=[0],this.length=1;for(var f=0,g=1;g<=67108863;g*=l)f++;f--,g=g/l|0;for(var b=o.length-u,x=b%f,p=Math.min(b,b-x)+u,a=0,_=u;_<p;_+=f)a=d(o,_,_+f,l),this.imuln(g),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(x!==0){var L=1;for(a=d(o,_,o.length,l),_=0;_<x;_++)L*=l;this.imuln(L),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}},i.prototype.copy=function(o){o.words=new Array(this.length);for(var l=0;l<this.length;l++)o.words[l]=this.words[l];o.length=this.length,o.negative=this.negative,o.red=this.red},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,l){o=o||10,l=l|0||1;var u;if(o===16||o==="hex"){u="";for(var f=0,g=0,b=0;b<this.length;b++){var x=this.words[b],p=((x<<f|g)&16777215).toString(16);g=x>>>24-f&16777215,g!==0||b!==this.length-1?u=w[6-p.length]+p+u:u=p+u,f+=2,f>=26&&(f-=26,b--)}for(g!==0&&(u=g.toString(16)+u);u.length%l!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}if(o===(o|0)&&o>=2&&o<=36){var a=v[o],_=S[o];u="";var L=this.clone();for(L.negative=0;!L.isZero();){var P=L.modn(_).toString(o);L=L.idivn(_),L.isZero()?u=P+u:u=w[a-P.length]+P+u}for(this.isZero()&&(u="0"+u);u.length%l!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(o,l){return n(typeof c<"u"),this.toArrayLike(c,o,l)},i.prototype.toArray=function(o,l){return this.toArrayLike(Array,o,l)},i.prototype.toArrayLike=function(o,l,u){var f=this.byteLength(),g=u||Math.max(1,f);n(f<=g,"byte array longer than desired length"),n(g>0,"Requested array length <= 0"),this.strip();var b=l==="le",x=new o(g),p,a,_=this.clone();if(b){for(a=0;!_.isZero();a++)p=_.andln(255),_.iushrn(8),x[a]=p;for(;a<g;a++)x[a]=0}else{for(a=0;a<g-f;a++)x[a]=0;for(a=0;!_.isZero();a++)p=_.andln(255),_.iushrn(8),x[g-a-1]=p}return x},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var l=o,u=0;return l>=4096&&(u+=13,l>>>=13),l>=64&&(u+=7,l>>>=7),l>=8&&(u+=4,l>>>=4),l>=2&&(u+=2,l>>>=2),u+l},i.prototype._zeroBits=function(o){if(o===0)return 26;var l=o,u=0;return l&8191||(u+=13,l>>>=13),l&127||(u+=7,l>>>=7),l&15||(u+=4,l>>>=4),l&3||(u+=2,l>>>=2),l&1||u++,u},i.prototype.bitLength=function(){var o=this.words[this.length-1],l=this._countBits(o);return(this.length-1)*26+l};function k(m){for(var o=new Array(m.bitLength()),l=0;l<o.length;l++){var u=l/26|0,f=l%26;o[l]=(m.words[u]&1<<f)>>>f}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,l=0;l<this.length;l++){var u=this._zeroBits(this.words[l]);if(o+=u,u!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]|o.words[l];return this.strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var l;this.length>o.length?l=o:l=this;for(var u=0;u<l.length;u++)this.words[u]=this.words[u]&o.words[u];return this.length=l.length,this.strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var l,u;this.length>o.length?(l=this,u=o):(l=o,u=this);for(var f=0;f<u.length;f++)this.words[f]=l.words[f]^u.words[f];if(this!==l)for(;f<l.length;f++)this.words[f]=l.words[f];return this.length=l.length,this.strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var l=Math.ceil(o/26)|0,u=o%26;this._expand(l),u>0&&l--;for(var f=0;f<l;f++)this.words[f]=~this.words[f]&67108863;return u>0&&(this.words[f]=~this.words[f]&67108863>>26-u),this.strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,l){n(typeof o=="number"&&o>=0);var u=o/26|0,f=o%26;return this._expand(u+1),l?this.words[u]=this.words[u]|1<<f:this.words[u]=this.words[u]&~(1<<f),this.strip()},i.prototype.iadd=function(o){var l;if(this.negative!==0&&o.negative===0)return this.negative=0,l=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,l=this.isub(o),o.negative=1,l._normSign();var u,f;this.length>o.length?(u=this,f=o):(u=o,f=this);for(var g=0,b=0;b<f.length;b++)l=(u.words[b]|0)+(f.words[b]|0)+g,this.words[b]=l&67108863,g=l>>>26;for(;g!==0&&b<u.length;b++)l=(u.words[b]|0)+g,this.words[b]=l&67108863,g=l>>>26;if(this.length=u.length,g!==0)this.words[this.length]=g,this.length++;else if(u!==this)for(;b<u.length;b++)this.words[b]=u.words[b];return this},i.prototype.add=function(o){var l;return o.negative!==0&&this.negative===0?(o.negative=0,l=this.sub(o),o.negative^=1,l):o.negative===0&&this.negative!==0?(this.negative=0,l=o.sub(this),this.negative=1,l):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var l=this.iadd(o);return o.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var u=this.cmp(o);if(u===0)return this.negative=0,this.length=1,this.words[0]=0,this;var f,g;u>0?(f=this,g=o):(f=o,g=this);for(var b=0,x=0;x<g.length;x++)l=(f.words[x]|0)-(g.words[x]|0)+b,b=l>>26,this.words[x]=l&67108863;for(;b!==0&&x<f.length;x++)l=(f.words[x]|0)+b,b=l>>26,this.words[x]=l&67108863;if(b===0&&x<f.length&&f!==this)for(;x<f.length;x++)this.words[x]=f.words[x];return this.length=Math.max(this.length,x),f!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function I(m,o,l){l.negative=o.negative^m.negative;var u=m.length+o.length|0;l.length=u,u=u-1|0;var f=m.words[0]|0,g=o.words[0]|0,b=f*g,x=b&67108863,p=b/67108864|0;l.words[0]=x;for(var a=1;a<u;a++){for(var _=p>>>26,L=p&67108863,P=Math.min(a,o.length-1),q=Math.max(0,a-m.length+1);q<=P;q++){var F=a-q|0;f=m.words[F]|0,g=o.words[q]|0,b=f*g+L,_+=b/67108864|0,L=b&67108863}l.words[a]=L|0,p=_|0}return p!==0?l.words[a]=p|0:l.length--,l.strip()}var T=function(o,l,u){var f=o.words,g=l.words,b=u.words,x=0,p,a,_,L=f[0]|0,P=L&8191,q=L>>>13,F=f[1]|0,W=F&8191,z=F>>>13,He=f[2]|0,j=He&8191,J=He>>>13,yn=f[3]|0,Q=yn&8191,G=yn>>>13,bn=f[4]|0,Y=bn&8191,X=bn>>>13,Mn=f[5]|0,Z=Mn&8191,ee=Mn>>>13,En=f[6]|0,te=En&8191,re=En>>>13,xn=f[7]|0,ne=xn&8191,ie=xn>>>13,Sn=f[8]|0,oe=Sn&8191,se=Sn>>>13,Cn=f[9]|0,ae=Cn&8191,le=Cn>>>13,kn=g[0]|0,ce=kn&8191,ue=kn>>>13,Rn=g[1]|0,he=Rn&8191,fe=Rn>>>13,Tn=g[2]|0,de=Tn&8191,pe=Tn>>>13,In=g[3]|0,_e=In&8191,ge=In>>>13,An=g[4]|0,ve=An&8191,me=An>>>13,On=g[5]|0,we=On&8191,ye=On>>>13,Nn=g[6]|0,be=Nn&8191,Me=Nn>>>13,Bn=g[7]|0,Ee=Bn&8191,xe=Bn>>>13,Ln=g[8]|0,Se=Ln&8191,Ce=Ln>>>13,Pn=g[9]|0,ke=Pn&8191,Re=Pn>>>13;u.negative=o.negative^l.negative,u.length=19,p=Math.imul(P,ce),a=Math.imul(P,ue),a=a+Math.imul(q,ce)|0,_=Math.imul(q,ue);var Yt=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,p=Math.imul(W,ce),a=Math.imul(W,ue),a=a+Math.imul(z,ce)|0,_=Math.imul(z,ue),p=p+Math.imul(P,he)|0,a=a+Math.imul(P,fe)|0,a=a+Math.imul(q,he)|0,_=_+Math.imul(q,fe)|0;var Xt=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,p=Math.imul(j,ce),a=Math.imul(j,ue),a=a+Math.imul(J,ce)|0,_=Math.imul(J,ue),p=p+Math.imul(W,he)|0,a=a+Math.imul(W,fe)|0,a=a+Math.imul(z,he)|0,_=_+Math.imul(z,fe)|0,p=p+Math.imul(P,de)|0,a=a+Math.imul(P,pe)|0,a=a+Math.imul(q,de)|0,_=_+Math.imul(q,pe)|0;var Zt=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,p=Math.imul(Q,ce),a=Math.imul(Q,ue),a=a+Math.imul(G,ce)|0,_=Math.imul(G,ue),p=p+Math.imul(j,he)|0,a=a+Math.imul(j,fe)|0,a=a+Math.imul(J,he)|0,_=_+Math.imul(J,fe)|0,p=p+Math.imul(W,de)|0,a=a+Math.imul(W,pe)|0,a=a+Math.imul(z,de)|0,_=_+Math.imul(z,pe)|0,p=p+Math.imul(P,_e)|0,a=a+Math.imul(P,ge)|0,a=a+Math.imul(q,_e)|0,_=_+Math.imul(q,ge)|0;var er=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(er>>>26)|0,er&=67108863,p=Math.imul(Y,ce),a=Math.imul(Y,ue),a=a+Math.imul(X,ce)|0,_=Math.imul(X,ue),p=p+Math.imul(Q,he)|0,a=a+Math.imul(Q,fe)|0,a=a+Math.imul(G,he)|0,_=_+Math.imul(G,fe)|0,p=p+Math.imul(j,de)|0,a=a+Math.imul(j,pe)|0,a=a+Math.imul(J,de)|0,_=_+Math.imul(J,pe)|0,p=p+Math.imul(W,_e)|0,a=a+Math.imul(W,ge)|0,a=a+Math.imul(z,_e)|0,_=_+Math.imul(z,ge)|0,p=p+Math.imul(P,ve)|0,a=a+Math.imul(P,me)|0,a=a+Math.imul(q,ve)|0,_=_+Math.imul(q,me)|0;var tr=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(tr>>>26)|0,tr&=67108863,p=Math.imul(Z,ce),a=Math.imul(Z,ue),a=a+Math.imul(ee,ce)|0,_=Math.imul(ee,ue),p=p+Math.imul(Y,he)|0,a=a+Math.imul(Y,fe)|0,a=a+Math.imul(X,he)|0,_=_+Math.imul(X,fe)|0,p=p+Math.imul(Q,de)|0,a=a+Math.imul(Q,pe)|0,a=a+Math.imul(G,de)|0,_=_+Math.imul(G,pe)|0,p=p+Math.imul(j,_e)|0,a=a+Math.imul(j,ge)|0,a=a+Math.imul(J,_e)|0,_=_+Math.imul(J,ge)|0,p=p+Math.imul(W,ve)|0,a=a+Math.imul(W,me)|0,a=a+Math.imul(z,ve)|0,_=_+Math.imul(z,me)|0,p=p+Math.imul(P,we)|0,a=a+Math.imul(P,ye)|0,a=a+Math.imul(q,we)|0,_=_+Math.imul(q,ye)|0;var rr=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(rr>>>26)|0,rr&=67108863,p=Math.imul(te,ce),a=Math.imul(te,ue),a=a+Math.imul(re,ce)|0,_=Math.imul(re,ue),p=p+Math.imul(Z,he)|0,a=a+Math.imul(Z,fe)|0,a=a+Math.imul(ee,he)|0,_=_+Math.imul(ee,fe)|0,p=p+Math.imul(Y,de)|0,a=a+Math.imul(Y,pe)|0,a=a+Math.imul(X,de)|0,_=_+Math.imul(X,pe)|0,p=p+Math.imul(Q,_e)|0,a=a+Math.imul(Q,ge)|0,a=a+Math.imul(G,_e)|0,_=_+Math.imul(G,ge)|0,p=p+Math.imul(j,ve)|0,a=a+Math.imul(j,me)|0,a=a+Math.imul(J,ve)|0,_=_+Math.imul(J,me)|0,p=p+Math.imul(W,we)|0,a=a+Math.imul(W,ye)|0,a=a+Math.imul(z,we)|0,_=_+Math.imul(z,ye)|0,p=p+Math.imul(P,be)|0,a=a+Math.imul(P,Me)|0,a=a+Math.imul(q,be)|0,_=_+Math.imul(q,Me)|0;var nr=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(nr>>>26)|0,nr&=67108863,p=Math.imul(ne,ce),a=Math.imul(ne,ue),a=a+Math.imul(ie,ce)|0,_=Math.imul(ie,ue),p=p+Math.imul(te,he)|0,a=a+Math.imul(te,fe)|0,a=a+Math.imul(re,he)|0,_=_+Math.imul(re,fe)|0,p=p+Math.imul(Z,de)|0,a=a+Math.imul(Z,pe)|0,a=a+Math.imul(ee,de)|0,_=_+Math.imul(ee,pe)|0,p=p+Math.imul(Y,_e)|0,a=a+Math.imul(Y,ge)|0,a=a+Math.imul(X,_e)|0,_=_+Math.imul(X,ge)|0,p=p+Math.imul(Q,ve)|0,a=a+Math.imul(Q,me)|0,a=a+Math.imul(G,ve)|0,_=_+Math.imul(G,me)|0,p=p+Math.imul(j,we)|0,a=a+Math.imul(j,ye)|0,a=a+Math.imul(J,we)|0,_=_+Math.imul(J,ye)|0,p=p+Math.imul(W,be)|0,a=a+Math.imul(W,Me)|0,a=a+Math.imul(z,be)|0,_=_+Math.imul(z,Me)|0,p=p+Math.imul(P,Ee)|0,a=a+Math.imul(P,xe)|0,a=a+Math.imul(q,Ee)|0,_=_+Math.imul(q,xe)|0;var ir=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(ir>>>26)|0,ir&=67108863,p=Math.imul(oe,ce),a=Math.imul(oe,ue),a=a+Math.imul(se,ce)|0,_=Math.imul(se,ue),p=p+Math.imul(ne,he)|0,a=a+Math.imul(ne,fe)|0,a=a+Math.imul(ie,he)|0,_=_+Math.imul(ie,fe)|0,p=p+Math.imul(te,de)|0,a=a+Math.imul(te,pe)|0,a=a+Math.imul(re,de)|0,_=_+Math.imul(re,pe)|0,p=p+Math.imul(Z,_e)|0,a=a+Math.imul(Z,ge)|0,a=a+Math.imul(ee,_e)|0,_=_+Math.imul(ee,ge)|0,p=p+Math.imul(Y,ve)|0,a=a+Math.imul(Y,me)|0,a=a+Math.imul(X,ve)|0,_=_+Math.imul(X,me)|0,p=p+Math.imul(Q,we)|0,a=a+Math.imul(Q,ye)|0,a=a+Math.imul(G,we)|0,_=_+Math.imul(G,ye)|0,p=p+Math.imul(j,be)|0,a=a+Math.imul(j,Me)|0,a=a+Math.imul(J,be)|0,_=_+Math.imul(J,Me)|0,p=p+Math.imul(W,Ee)|0,a=a+Math.imul(W,xe)|0,a=a+Math.imul(z,Ee)|0,_=_+Math.imul(z,xe)|0,p=p+Math.imul(P,Se)|0,a=a+Math.imul(P,Ce)|0,a=a+Math.imul(q,Se)|0,_=_+Math.imul(q,Ce)|0;var or=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(or>>>26)|0,or&=67108863,p=Math.imul(ae,ce),a=Math.imul(ae,ue),a=a+Math.imul(le,ce)|0,_=Math.imul(le,ue),p=p+Math.imul(oe,he)|0,a=a+Math.imul(oe,fe)|0,a=a+Math.imul(se,he)|0,_=_+Math.imul(se,fe)|0,p=p+Math.imul(ne,de)|0,a=a+Math.imul(ne,pe)|0,a=a+Math.imul(ie,de)|0,_=_+Math.imul(ie,pe)|0,p=p+Math.imul(te,_e)|0,a=a+Math.imul(te,ge)|0,a=a+Math.imul(re,_e)|0,_=_+Math.imul(re,ge)|0,p=p+Math.imul(Z,ve)|0,a=a+Math.imul(Z,me)|0,a=a+Math.imul(ee,ve)|0,_=_+Math.imul(ee,me)|0,p=p+Math.imul(Y,we)|0,a=a+Math.imul(Y,ye)|0,a=a+Math.imul(X,we)|0,_=_+Math.imul(X,ye)|0,p=p+Math.imul(Q,be)|0,a=a+Math.imul(Q,Me)|0,a=a+Math.imul(G,be)|0,_=_+Math.imul(G,Me)|0,p=p+Math.imul(j,Ee)|0,a=a+Math.imul(j,xe)|0,a=a+Math.imul(J,Ee)|0,_=_+Math.imul(J,xe)|0,p=p+Math.imul(W,Se)|0,a=a+Math.imul(W,Ce)|0,a=a+Math.imul(z,Se)|0,_=_+Math.imul(z,Ce)|0,p=p+Math.imul(P,ke)|0,a=a+Math.imul(P,Re)|0,a=a+Math.imul(q,ke)|0,_=_+Math.imul(q,Re)|0;var sr=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(sr>>>26)|0,sr&=67108863,p=Math.imul(ae,he),a=Math.imul(ae,fe),a=a+Math.imul(le,he)|0,_=Math.imul(le,fe),p=p+Math.imul(oe,de)|0,a=a+Math.imul(oe,pe)|0,a=a+Math.imul(se,de)|0,_=_+Math.imul(se,pe)|0,p=p+Math.imul(ne,_e)|0,a=a+Math.imul(ne,ge)|0,a=a+Math.imul(ie,_e)|0,_=_+Math.imul(ie,ge)|0,p=p+Math.imul(te,ve)|0,a=a+Math.imul(te,me)|0,a=a+Math.imul(re,ve)|0,_=_+Math.imul(re,me)|0,p=p+Math.imul(Z,we)|0,a=a+Math.imul(Z,ye)|0,a=a+Math.imul(ee,we)|0,_=_+Math.imul(ee,ye)|0,p=p+Math.imul(Y,be)|0,a=a+Math.imul(Y,Me)|0,a=a+Math.imul(X,be)|0,_=_+Math.imul(X,Me)|0,p=p+Math.imul(Q,Ee)|0,a=a+Math.imul(Q,xe)|0,a=a+Math.imul(G,Ee)|0,_=_+Math.imul(G,xe)|0,p=p+Math.imul(j,Se)|0,a=a+Math.imul(j,Ce)|0,a=a+Math.imul(J,Se)|0,_=_+Math.imul(J,Ce)|0,p=p+Math.imul(W,ke)|0,a=a+Math.imul(W,Re)|0,a=a+Math.imul(z,ke)|0,_=_+Math.imul(z,Re)|0;var ar=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(ar>>>26)|0,ar&=67108863,p=Math.imul(ae,de),a=Math.imul(ae,pe),a=a+Math.imul(le,de)|0,_=Math.imul(le,pe),p=p+Math.imul(oe,_e)|0,a=a+Math.imul(oe,ge)|0,a=a+Math.imul(se,_e)|0,_=_+Math.imul(se,ge)|0,p=p+Math.imul(ne,ve)|0,a=a+Math.imul(ne,me)|0,a=a+Math.imul(ie,ve)|0,_=_+Math.imul(ie,me)|0,p=p+Math.imul(te,we)|0,a=a+Math.imul(te,ye)|0,a=a+Math.imul(re,we)|0,_=_+Math.imul(re,ye)|0,p=p+Math.imul(Z,be)|0,a=a+Math.imul(Z,Me)|0,a=a+Math.imul(ee,be)|0,_=_+Math.imul(ee,Me)|0,p=p+Math.imul(Y,Ee)|0,a=a+Math.imul(Y,xe)|0,a=a+Math.imul(X,Ee)|0,_=_+Math.imul(X,xe)|0,p=p+Math.imul(Q,Se)|0,a=a+Math.imul(Q,Ce)|0,a=a+Math.imul(G,Se)|0,_=_+Math.imul(G,Ce)|0,p=p+Math.imul(j,ke)|0,a=a+Math.imul(j,Re)|0,a=a+Math.imul(J,ke)|0,_=_+Math.imul(J,Re)|0;var lr=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(lr>>>26)|0,lr&=67108863,p=Math.imul(ae,_e),a=Math.imul(ae,ge),a=a+Math.imul(le,_e)|0,_=Math.imul(le,ge),p=p+Math.imul(oe,ve)|0,a=a+Math.imul(oe,me)|0,a=a+Math.imul(se,ve)|0,_=_+Math.imul(se,me)|0,p=p+Math.imul(ne,we)|0,a=a+Math.imul(ne,ye)|0,a=a+Math.imul(ie,we)|0,_=_+Math.imul(ie,ye)|0,p=p+Math.imul(te,be)|0,a=a+Math.imul(te,Me)|0,a=a+Math.imul(re,be)|0,_=_+Math.imul(re,Me)|0,p=p+Math.imul(Z,Ee)|0,a=a+Math.imul(Z,xe)|0,a=a+Math.imul(ee,Ee)|0,_=_+Math.imul(ee,xe)|0,p=p+Math.imul(Y,Se)|0,a=a+Math.imul(Y,Ce)|0,a=a+Math.imul(X,Se)|0,_=_+Math.imul(X,Ce)|0,p=p+Math.imul(Q,ke)|0,a=a+Math.imul(Q,Re)|0,a=a+Math.imul(G,ke)|0,_=_+Math.imul(G,Re)|0;var cr=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(cr>>>26)|0,cr&=67108863,p=Math.imul(ae,ve),a=Math.imul(ae,me),a=a+Math.imul(le,ve)|0,_=Math.imul(le,me),p=p+Math.imul(oe,we)|0,a=a+Math.imul(oe,ye)|0,a=a+Math.imul(se,we)|0,_=_+Math.imul(se,ye)|0,p=p+Math.imul(ne,be)|0,a=a+Math.imul(ne,Me)|0,a=a+Math.imul(ie,be)|0,_=_+Math.imul(ie,Me)|0,p=p+Math.imul(te,Ee)|0,a=a+Math.imul(te,xe)|0,a=a+Math.imul(re,Ee)|0,_=_+Math.imul(re,xe)|0,p=p+Math.imul(Z,Se)|0,a=a+Math.imul(Z,Ce)|0,a=a+Math.imul(ee,Se)|0,_=_+Math.imul(ee,Ce)|0,p=p+Math.imul(Y,ke)|0,a=a+Math.imul(Y,Re)|0,a=a+Math.imul(X,ke)|0,_=_+Math.imul(X,Re)|0;var ur=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(ur>>>26)|0,ur&=67108863,p=Math.imul(ae,we),a=Math.imul(ae,ye),a=a+Math.imul(le,we)|0,_=Math.imul(le,ye),p=p+Math.imul(oe,be)|0,a=a+Math.imul(oe,Me)|0,a=a+Math.imul(se,be)|0,_=_+Math.imul(se,Me)|0,p=p+Math.imul(ne,Ee)|0,a=a+Math.imul(ne,xe)|0,a=a+Math.imul(ie,Ee)|0,_=_+Math.imul(ie,xe)|0,p=p+Math.imul(te,Se)|0,a=a+Math.imul(te,Ce)|0,a=a+Math.imul(re,Se)|0,_=_+Math.imul(re,Ce)|0,p=p+Math.imul(Z,ke)|0,a=a+Math.imul(Z,Re)|0,a=a+Math.imul(ee,ke)|0,_=_+Math.imul(ee,Re)|0;var hr=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(hr>>>26)|0,hr&=67108863,p=Math.imul(ae,be),a=Math.imul(ae,Me),a=a+Math.imul(le,be)|0,_=Math.imul(le,Me),p=p+Math.imul(oe,Ee)|0,a=a+Math.imul(oe,xe)|0,a=a+Math.imul(se,Ee)|0,_=_+Math.imul(se,xe)|0,p=p+Math.imul(ne,Se)|0,a=a+Math.imul(ne,Ce)|0,a=a+Math.imul(ie,Se)|0,_=_+Math.imul(ie,Ce)|0,p=p+Math.imul(te,ke)|0,a=a+Math.imul(te,Re)|0,a=a+Math.imul(re,ke)|0,_=_+Math.imul(re,Re)|0;var fr=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(fr>>>26)|0,fr&=67108863,p=Math.imul(ae,Ee),a=Math.imul(ae,xe),a=a+Math.imul(le,Ee)|0,_=Math.imul(le,xe),p=p+Math.imul(oe,Se)|0,a=a+Math.imul(oe,Ce)|0,a=a+Math.imul(se,Se)|0,_=_+Math.imul(se,Ce)|0,p=p+Math.imul(ne,ke)|0,a=a+Math.imul(ne,Re)|0,a=a+Math.imul(ie,ke)|0,_=_+Math.imul(ie,Re)|0;var dr=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(dr>>>26)|0,dr&=67108863,p=Math.imul(ae,Se),a=Math.imul(ae,Ce),a=a+Math.imul(le,Se)|0,_=Math.imul(le,Ce),p=p+Math.imul(oe,ke)|0,a=a+Math.imul(oe,Re)|0,a=a+Math.imul(se,ke)|0,_=_+Math.imul(se,Re)|0;var pr=(x+p|0)+((a&8191)<<13)|0;x=(_+(a>>>13)|0)+(pr>>>26)|0,pr&=67108863,p=Math.imul(ae,ke),a=Math.imul(ae,Re),a=a+Math.imul(le,ke)|0,_=Math.imul(le,Re);var _r=(x+p|0)+((a&8191)<<13)|0;return x=(_+(a>>>13)|0)+(_r>>>26)|0,_r&=67108863,b[0]=Yt,b[1]=Xt,b[2]=Zt,b[3]=er,b[4]=tr,b[5]=rr,b[6]=nr,b[7]=ir,b[8]=or,b[9]=sr,b[10]=ar,b[11]=lr,b[12]=cr,b[13]=ur,b[14]=hr,b[15]=fr,b[16]=dr,b[17]=pr,b[18]=_r,x!==0&&(b[19]=x,u.length++),u};Math.imul||(T=I);function A(m,o,l){l.negative=o.negative^m.negative,l.length=m.length+o.length;for(var u=0,f=0,g=0;g<l.length-1;g++){var b=f;f=0;for(var x=u&67108863,p=Math.min(g,o.length-1),a=Math.max(0,g-m.length+1);a<=p;a++){var _=g-a,L=m.words[_]|0,P=o.words[a]|0,q=L*P,F=q&67108863;b=b+(q/67108864|0)|0,F=F+x|0,x=F&67108863,b=b+(F>>>26)|0,f+=b>>>26,b&=67108863}l.words[g]=x,u=b,b=f}return u!==0?l.words[g]=u:l.length--,l.strip()}function y(m,o,l){var u=new M;return u.mulp(m,o,l)}i.prototype.mulTo=function(o,l){var u,f=this.length+o.length;return this.length===10&&o.length===10?u=T(this,o,l):f<63?u=I(this,o,l):f<1024?u=A(this,o,l):u=y(this,o,l),u};function M(m,o){this.x=m,this.y=o}M.prototype.makeRBT=function(o){for(var l=new Array(o),u=i.prototype._countBits(o)-1,f=0;f<o;f++)l[f]=this.revBin(f,u,o);return l},M.prototype.revBin=function(o,l,u){if(o===0||o===u-1)return o;for(var f=0,g=0;g<l;g++)f|=(o&1)<<l-g-1,o>>=1;return f},M.prototype.permute=function(o,l,u,f,g,b){for(var x=0;x<b;x++)f[x]=l[o[x]],g[x]=u[o[x]]},M.prototype.transform=function(o,l,u,f,g,b){this.permute(b,o,l,u,f,g);for(var x=1;x<g;x<<=1)for(var p=x<<1,a=Math.cos(2*Math.PI/p),_=Math.sin(2*Math.PI/p),L=0;L<g;L+=p)for(var P=a,q=_,F=0;F<x;F++){var W=u[L+F],z=f[L+F],He=u[L+F+x],j=f[L+F+x],J=P*He-q*j;j=P*j+q*He,He=J,u[L+F]=W+He,f[L+F]=z+j,u[L+F+x]=W-He,f[L+F+x]=z-j,F!==p&&(J=a*P-_*q,q=a*q+_*P,P=J)}},M.prototype.guessLen13b=function(o,l){var u=Math.max(l,o)|1,f=u&1,g=0;for(u=u/2|0;u;u=u>>>1)g++;return 1<<g+1+f},M.prototype.conjugate=function(o,l,u){if(!(u<=1))for(var f=0;f<u/2;f++){var g=o[f];o[f]=o[u-f-1],o[u-f-1]=g,g=l[f],l[f]=-l[u-f-1],l[u-f-1]=-g}},M.prototype.normalize13b=function(o,l){for(var u=0,f=0;f<l/2;f++){var g=Math.round(o[2*f+1]/l)*8192+Math.round(o[2*f]/l)+u;o[f]=g&67108863,g<67108864?u=0:u=g/67108864|0}return o},M.prototype.convert13b=function(o,l,u,f){for(var g=0,b=0;b<l;b++)g=g+(o[b]|0),u[2*b]=g&8191,g=g>>>13,u[2*b+1]=g&8191,g=g>>>13;for(b=2*l;b<f;++b)u[b]=0;n(g===0),n((g&-8192)===0)},M.prototype.stub=function(o){for(var l=new Array(o),u=0;u<o;u++)l[u]=0;return l},M.prototype.mulp=function(o,l,u){var f=2*this.guessLen13b(o.length,l.length),g=this.makeRBT(f),b=this.stub(f),x=new Array(f),p=new Array(f),a=new Array(f),_=new Array(f),L=new Array(f),P=new Array(f),q=u.words;q.length=f,this.convert13b(o.words,o.length,x,f),this.convert13b(l.words,l.length,_,f),this.transform(x,b,p,a,f,g),this.transform(_,b,L,P,f,g);for(var F=0;F<f;F++){var W=p[F]*L[F]-a[F]*P[F];a[F]=p[F]*P[F]+a[F]*L[F],p[F]=W}return this.conjugate(p,a,f),this.transform(p,a,q,b,f,g),this.conjugate(q,b,f),this.normalize13b(q,f),u.negative=o.negative^l.negative,u.length=o.length+l.length,u.strip()},i.prototype.mul=function(o){var l=new i(null);return l.words=new Array(this.length+o.length),this.mulTo(o,l)},i.prototype.mulf=function(o){var l=new i(null);return l.words=new Array(this.length+o.length),y(this,o,l)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){n(typeof o=="number"),n(o<67108864);for(var l=0,u=0;u<this.length;u++){var f=(this.words[u]|0)*o,g=(f&67108863)+(l&67108863);l>>=26,l+=f/67108864|0,l+=g>>>26,this.words[u]=g&67108863}return l!==0&&(this.words[u]=l,this.length++),this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var l=k(o);if(l.length===0)return new i(1);for(var u=this,f=0;f<l.length&&l[f]===0;f++,u=u.sqr());if(++f<l.length)for(var g=u.sqr();f<l.length;f++,g=g.sqr())l[f]!==0&&(u=u.mul(g));return u},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var l=o%26,u=(o-l)/26,f=67108863>>>26-l<<26-l,g;if(l!==0){var b=0;for(g=0;g<this.length;g++){var x=this.words[g]&f,p=(this.words[g]|0)-x<<l;this.words[g]=p|b,b=x>>>26-l}b&&(this.words[g]=b,this.length++)}if(u!==0){for(g=this.length-1;g>=0;g--)this.words[g+u]=this.words[g];for(g=0;g<u;g++)this.words[g]=0;this.length+=u}return this.strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,l,u){n(typeof o=="number"&&o>=0);var f;l?f=(l-l%26)/26:f=0;var g=o%26,b=Math.min((o-g)/26,this.length),x=67108863^67108863>>>g<<g,p=u;if(f-=b,f=Math.max(0,f),p){for(var a=0;a<b;a++)p.words[a]=this.words[a];p.length=b}if(b!==0)if(this.length>b)for(this.length-=b,a=0;a<this.length;a++)this.words[a]=this.words[a+b];else this.words[0]=0,this.length=1;var _=0;for(a=this.length-1;a>=0&&(_!==0||a>=f);a--){var L=this.words[a]|0;this.words[a]=_<<26-g|L>>>g,_=L&x}return p&&_!==0&&(p.words[p.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(o,l,u){return n(this.negative===0),this.iushrn(o,l,u)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var l=o%26,u=(o-l)/26,f=1<<l;if(this.length<=u)return!1;var g=this.words[u];return!!(g&f)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var l=o%26,u=(o-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=u)return this;if(l!==0&&u++,this.length=Math.min(u,this.length),l!==0){var f=67108863^67108863>>>l<<l;this.words[this.length-1]&=f}return this.strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,l,u){var f=o.length+u,g;this._expand(f);var b,x=0;for(g=0;g<o.length;g++){b=(this.words[g+u]|0)+x;var p=(o.words[g]|0)*l;b-=p&67108863,x=(b>>26)-(p/67108864|0),this.words[g+u]=b&67108863}for(;g<this.length-u;g++)b=(this.words[g+u]|0)+x,x=b>>26,this.words[g+u]=b&67108863;if(x===0)return this.strip();for(n(x===-1),x=0,g=0;g<this.length;g++)b=-(this.words[g]|0)+x,x=b>>26,this.words[g]=b&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(o,l){var u=this.length-o.length,f=this.clone(),g=o,b=g.words[g.length-1]|0,x=this._countBits(b);u=26-x,u!==0&&(g=g.ushln(u),f.iushln(u),b=g.words[g.length-1]|0);var p=f.length-g.length,a;if(l!=="mod"){a=new i(null),a.length=p+1,a.words=new Array(a.length);for(var _=0;_<a.length;_++)a.words[_]=0}var L=f.clone()._ishlnsubmul(g,1,p);L.negative===0&&(f=L,a&&(a.words[p]=1));for(var P=p-1;P>=0;P--){var q=(f.words[g.length+P]|0)*67108864+(f.words[g.length+P-1]|0);for(q=Math.min(q/b|0,67108863),f._ishlnsubmul(g,q,P);f.negative!==0;)q--,f.negative=0,f._ishlnsubmul(g,1,P),f.isZero()||(f.negative^=1);a&&(a.words[P]=q)}return a&&a.strip(),f.strip(),l!=="div"&&u!==0&&f.iushrn(u),{div:a||null,mod:f}},i.prototype.divmod=function(o,l,u){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var f,g,b;return this.negative!==0&&o.negative===0?(b=this.neg().divmod(o,l),l!=="mod"&&(f=b.div.neg()),l!=="div"&&(g=b.mod.neg(),u&&g.negative!==0&&g.iadd(o)),{div:f,mod:g}):this.negative===0&&o.negative!==0?(b=this.divmod(o.neg(),l),l!=="mod"&&(f=b.div.neg()),{div:f,mod:b.mod}):this.negative&o.negative?(b=this.neg().divmod(o.neg(),l),l!=="div"&&(g=b.mod.neg(),u&&g.negative!==0&&g.isub(o)),{div:b.div,mod:g}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?l==="div"?{div:this.divn(o.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modn(o.words[0]))}:this._wordDiv(o,l)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var l=this.divmod(o);if(l.mod.isZero())return l.div;var u=l.div.negative!==0?l.mod.isub(o):l.mod,f=o.ushrn(1),g=o.andln(1),b=u.cmp(f);return b<0||g===1&&b===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(o){n(o<=67108863);for(var l=(1<<26)%o,u=0,f=this.length-1;f>=0;f--)u=(l*u+(this.words[f]|0))%o;return u},i.prototype.idivn=function(o){n(o<=67108863);for(var l=0,u=this.length-1;u>=0;u--){var f=(this.words[u]|0)+l*67108864;this.words[u]=f/o|0,l=f%o}return this.strip()},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var l=this,u=o.clone();l.negative!==0?l=l.umod(o):l=l.clone();for(var f=new i(1),g=new i(0),b=new i(0),x=new i(1),p=0;l.isEven()&&u.isEven();)l.iushrn(1),u.iushrn(1),++p;for(var a=u.clone(),_=l.clone();!l.isZero();){for(var L=0,P=1;!(l.words[0]&P)&&L<26;++L,P<<=1);if(L>0)for(l.iushrn(L);L-- >0;)(f.isOdd()||g.isOdd())&&(f.iadd(a),g.isub(_)),f.iushrn(1),g.iushrn(1);for(var q=0,F=1;!(u.words[0]&F)&&q<26;++q,F<<=1);if(q>0)for(u.iushrn(q);q-- >0;)(b.isOdd()||x.isOdd())&&(b.iadd(a),x.isub(_)),b.iushrn(1),x.iushrn(1);l.cmp(u)>=0?(l.isub(u),f.isub(b),g.isub(x)):(u.isub(l),b.isub(f),x.isub(g))}return{a:b,b:x,gcd:u.iushln(p)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var l=this,u=o.clone();l.negative!==0?l=l.umod(o):l=l.clone();for(var f=new i(1),g=new i(0),b=u.clone();l.cmpn(1)>0&&u.cmpn(1)>0;){for(var x=0,p=1;!(l.words[0]&p)&&x<26;++x,p<<=1);if(x>0)for(l.iushrn(x);x-- >0;)f.isOdd()&&f.iadd(b),f.iushrn(1);for(var a=0,_=1;!(u.words[0]&_)&&a<26;++a,_<<=1);if(a>0)for(u.iushrn(a);a-- >0;)g.isOdd()&&g.iadd(b),g.iushrn(1);l.cmp(u)>=0?(l.isub(u),f.isub(g)):(u.isub(l),g.isub(f))}var L;return l.cmpn(1)===0?L=f:L=g,L.cmpn(0)<0&&L.iadd(o),L},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var l=this.clone(),u=o.clone();l.negative=0,u.negative=0;for(var f=0;l.isEven()&&u.isEven();f++)l.iushrn(1),u.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;u.isEven();)u.iushrn(1);var g=l.cmp(u);if(g<0){var b=l;l=u,u=b}else if(g===0||u.cmpn(1)===0)break;l.isub(u)}while(!0);return u.iushln(f)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var l=o%26,u=(o-l)/26,f=1<<l;if(this.length<=u)return this._expand(u+1),this.words[u]|=f,this;for(var g=f,b=u;g!==0&&b<this.length;b++){var x=this.words[b]|0;x+=g,g=x>>>26,x&=67108863,this.words[b]=x}return g!==0&&(this.words[b]=g,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var l=o<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var u;if(this.length>1)u=1;else{l&&(o=-o),n(o<=67108863,"Number is too big");var f=this.words[0]|0;u=f===o?0:f<o?-1:1}return this.negative!==0?-u|0:u},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var l=this.ucmp(o);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var l=0,u=this.length-1;u>=0;u--){var f=this.words[u]|0,g=o.words[u]|0;if(f!==g){f<g?l=-1:f>g&&(l=1);break}}return l},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new D(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var C={k256:null,p224:null,p192:null,p25519:null};function E(m,o){this.name=m,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}E.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},E.prototype.ireduce=function(o){var l=o,u;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),u=l.bitLength();while(u>this.n);var f=u<this.n?-1:l.ucmp(this.p);return f===0?(l.words[0]=0,l.length=1):f>0?l.isub(this.p):l.strip(),l},E.prototype.split=function(o,l){o.iushrn(this.n,0,l)},E.prototype.imulK=function(o){return o.imul(this.k)};function R(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(R,E),R.prototype.split=function(o,l){for(var u=4194303,f=Math.min(o.length,9),g=0;g<f;g++)l.words[g]=o.words[g];if(l.length=f,o.length<=9){o.words[0]=0,o.length=1;return}var b=o.words[9];for(l.words[l.length++]=b&u,g=10;g<o.length;g++){var x=o.words[g]|0;o.words[g-10]=(x&u)<<4|b>>>22,b=x}b>>>=22,o.words[g-10]=b,b===0&&o.length>10?o.length-=10:o.length-=9},R.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var l=0,u=0;u<o.length;u++){var f=o.words[u]|0;l+=f*977,o.words[u]=l&67108863,l=f*64+(l/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function N(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(N,E);function B(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(B,E);function H(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(H,E),H.prototype.imulK=function(o){for(var l=0,u=0;u<o.length;u++){var f=(o.words[u]|0)*19+l,g=f&67108863;f>>>=26,o.words[u]=g,l=f}return l!==0&&(o.words[o.length++]=l),o},i._prime=function(o){if(C[o])return C[o];var l;if(o==="k256")l=new R;else if(o==="p224")l=new N;else if(o==="p192")l=new B;else if(o==="p25519")l=new H;else throw new Error("Unknown prime "+o);return C[o]=l,l};function D(m){if(typeof m=="string"){var o=i._prime(m);this.m=o.p,this.prime=o}else n(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}D.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},D.prototype._verify2=function(o,l){n((o.negative|l.negative)===0,"red works only with positives"),n(o.red&&o.red===l.red,"red works only with red numbers")},D.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},D.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},D.prototype.add=function(o,l){this._verify2(o,l);var u=o.add(l);return u.cmp(this.m)>=0&&u.isub(this.m),u._forceRed(this)},D.prototype.iadd=function(o,l){this._verify2(o,l);var u=o.iadd(l);return u.cmp(this.m)>=0&&u.isub(this.m),u},D.prototype.sub=function(o,l){this._verify2(o,l);var u=o.sub(l);return u.cmpn(0)<0&&u.iadd(this.m),u._forceRed(this)},D.prototype.isub=function(o,l){this._verify2(o,l);var u=o.isub(l);return u.cmpn(0)<0&&u.iadd(this.m),u},D.prototype.shl=function(o,l){return this._verify1(o),this.imod(o.ushln(l))},D.prototype.imul=function(o,l){return this._verify2(o,l),this.imod(o.imul(l))},D.prototype.mul=function(o,l){return this._verify2(o,l),this.imod(o.mul(l))},D.prototype.isqr=function(o){return this.imul(o,o.clone())},D.prototype.sqr=function(o){return this.mul(o,o)},D.prototype.sqrt=function(o){if(o.isZero())return o.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var u=this.m.add(new i(1)).iushrn(2);return this.pow(o,u)}for(var f=this.m.subn(1),g=0;!f.isZero()&&f.andln(1)===0;)g++,f.iushrn(1);n(!f.isZero());var b=new i(1).toRed(this),x=b.redNeg(),p=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,p).cmp(x)!==0;)a.redIAdd(x);for(var _=this.pow(a,f),L=this.pow(o,f.addn(1).iushrn(1)),P=this.pow(o,f),q=g;P.cmp(b)!==0;){for(var F=P,W=0;F.cmp(b)!==0;W++)F=F.redSqr();n(W<q);var z=this.pow(_,new i(1).iushln(q-W-1));L=L.redMul(z),_=z.redSqr(),P=P.redMul(_),q=W}return L},D.prototype.invm=function(o){var l=o._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},D.prototype.pow=function(o,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return o.clone();var u=4,f=new Array(1<<u);f[0]=new i(1).toRed(this),f[1]=o;for(var g=2;g<f.length;g++)f[g]=this.mul(f[g-1],o);var b=f[0],x=0,p=0,a=l.bitLength()%26;for(a===0&&(a=26),g=l.length-1;g>=0;g--){for(var _=l.words[g],L=a-1;L>=0;L--){var P=_>>L&1;if(b!==f[0]&&(b=this.sqr(b)),P===0&&x===0){p=0;continue}x<<=1,x|=P,p++,!(p!==u&&(g!==0||L!==0))&&(b=this.mul(b,f[x]),p=0,x=0)}a=26}return b},D.prototype.convertTo=function(o){var l=o.umod(this.m);return l===o?l.clone():l},D.prototype.convertFrom=function(o){var l=o.clone();return l.red=null,l},i.mont=function(o){return new K(o)};function K(m){D.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(K,D),K.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},K.prototype.convertFrom=function(o){var l=this.imod(o.mul(this.rinv));return l.red=null,l},K.prototype.imul=function(o,l){if(o.isZero()||l.isZero())return o.words[0]=0,o.length=1,o;var u=o.imul(l),f=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=u.isub(f).iushrn(this.shift),b=g;return g.cmp(this.m)>=0?b=g.isub(this.m):g.cmpn(0)<0&&(b=g.iadd(this.m)),b._forceRed(this)},K.prototype.mul=function(o,l){if(o.isZero()||l.isZero())return new i(0)._forceRed(this);var u=o.mul(l),f=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=u.isub(f).iushrn(this.shift),b=g;return g.cmp(this.m)>=0?b=g.isub(this.m):g.cmpn(0)<0&&(b=g.iadd(this.m)),b._forceRed(this)},K.prototype.invm=function(o){var l=this.imod(o._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,Ie)})(Qr);var da=Qr.exports;const pa=qt(da);var _a=Gr;Gr.strict=Qi;Gr.loose=Gi;var ga=Object.prototype.toString,va={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function Gr(t){return Qi(t)||Gi(t)}function Qi(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function Gi(t){return va[ga.call(t)]}var ma=_a.strict,wa=function(e){if(ma(e)){var r=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(r=r.slice(e.byteOffset,e.byteOffset+e.byteLength)),r}else return Buffer.from(e)};const ya=qt(wa),Yi="hex",Xi="utf8",Ft="0";function Ze(t){return new Uint8Array(t)}function Zi(t,e=!1){const r=t.toString(Yi);return e?at(r):r}function ba(t){return t.toString(Xi)}function $t(t){return ya(t)}function Ye(t,e=!1){return Zi($t(t),e)}function Ma(t){return ba($t(t))}function Ea(t){return Buffer.from(We(t),Yi)}function Xe(t){return Ze(Ea(t))}function Yr(t){return Buffer.from(t,Xi)}function xa(t){return Ze(Yr(t))}function Sa(t,e=!1){return Zi(Yr(t),e)}function Ca(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}function eo(...t){let e=[];return t.forEach(r=>e=e.concat(Array.from(r))),new Uint8Array([...e])}function ka(t,e=8){const r=t%e;return r?(t-r)/e*e+e:t}function Ra(t,e=8,r=Ft){return Ta(t,ka(t.length,e),r)}function Ta(t,e,r=Ft){return Aa(t,e,!0,r)}function We(t){return t.replace(/^0x/,"")}function at(t){return t.startsWith("0x")?t:`0x${t}`}function to(t){return t=We(t),t=Ra(t,2),t&&(t=at(t)),t}function Ia(t){const e=t.startsWith("0x");return t=We(t),t=t.startsWith(Ft)?t.substring(1):t,e?at(t):t}function Aa(t,e,r,n=Ft){const s=e-t.length;let i=t;if(s>0){const c=n.repeat(s);i=r?c+t:t+c}return i}function Rr(t){return $t(new Uint8Array(t))}function Oa(t,e){return Ye(new Uint8Array(t),!e)}function Na(t){return Ze(t).buffer}function Ba(t){return Yr(t)}function La(t,e){return Sa(t,!e)}function Pa(t){return Xe(t).buffer}function ro(t,e){const r=We(to(new pa(t).toString(16)));return e?r:at(r)}var lt={};const qa=Wr(bs);var Le={},Fn;function Ua(){if(Fn)return Le;Fn=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.isBrowserCryptoAvailable=Le.getSubtleCrypto=Le.getBrowerCrypto=void 0;function t(){return(Ie===null||Ie===void 0?void 0:Ie.crypto)||(Ie===null||Ie===void 0?void 0:Ie.msCrypto)||{}}Le.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Le.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Le.isBrowserCryptoAvailable=r,Le}var Pe={},$n;function Da(){if($n)return Pe;$n=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.isBrowser=Pe.isNode=Pe.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Pe.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Pe.isNode=e;function r(){return!t()&&!e()}return Pe.isBrowser=r,Pe}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=qa;e.__exportStar(Ua(),t),e.__exportStar(Da(),t)})(lt);function Ha(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Et(t){return to(t)}function Fa(t){return Ia(at(t))}const Tr=Ha;function gr(){return((e,r)=>{for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r})()}function $a(t,e){let r;const n=fa[t];return n&&(r=`https://${n}.infura.io/v3/${e}`),r}function Wa(t,e){let r;const n=$a(t,e.infuraId);return e.custom&&e.custom[t]?r=e.custom[t]:n&&(r=n),r}function za(t){return t===""||typeof t=="string"&&t.trim()===""}function ja(t){return!(t&&t.length)}function no(t,e){return Ca(t,e)}function Va(t){return typeof t.method<"u"}function ht(t){return typeof t.result<"u"}function It(t){return typeof t.error<"u"}function Wn(t){return typeof t.event<"u"}function Ja(t){return ha.includes(t)||t.startsWith("wc_")}function Ka(t){return t.method.startsWith("wc_")?!0:!Kr.includes(t.method)}function Qa(t){t=We(t.toLowerCase());const e=We(ys.keccak_256(Ba(t)));let r="";for(let n=0;n<t.length;n++)parseInt(e[n],16)>7?r+=t[n].toUpperCase():r+=t[n];return at(r)}const Ga=t=>t?t.toLowerCase().substring(0,2)!=="0x"?!1:/^(0x)?[0-9a-f]{40}$/i.test(t)?/^(0x)?[0-9a-f]{40}$/.test(t)||/^(0x)?[0-9A-F]{40}$/.test(t)?!0:t===Qa(t):!1:!1;function At(t){return!ja(t)&&!no(t[0])&&(t[0]=La(t[0])),t}function vr(t){if(typeof t.type<"u"&&t.type!=="0")return t;if(typeof t.from>"u"||!Ga(t.from))throw new Error("Transaction object must include a valid 'from' value.");function e(s){let i=s;return(typeof s=="number"||typeof s=="string"&&!za(s))&&(no(s)?typeof s=="string"&&(i=Et(s)):i=ro(s)),typeof i=="string"&&(i=Fa(i)),i}const r={from:Et(t.from),to:typeof t.to>"u"?void 0:Et(t.to),gasPrice:typeof t.gasPrice>"u"?"":e(t.gasPrice),gas:typeof t.gas>"u"?typeof t.gasLimit>"u"?"":e(t.gasLimit):e(t.gas),value:typeof t.value>"u"?"":e(t.value),nonce:typeof t.nonce>"u"?"":e(t.nonce),data:typeof t.data>"u"?"":Et(t.data)||"0x"},n=["gasPrice","gas","value","nonce"];return Object.keys(r).forEach(s=>{(typeof r[s]>"u"||typeof r[s]=="string"&&!r[s].trim().length)&&n.includes(s)&&delete r[s]}),r}function Ya(t){const e=t.message||"Failed or Rejected Request";let r=-32e3;if(t&&!t.code)switch(e){case"Parse error":r=-32700;break;case"Invalid request":r=-32600;break;case"Method not found":r=-32601;break;case"Invalid params":r=-32602;break;case"Internal error":r=-32603;break;default:r=-32e3;break}const n={code:r,message:e};return t.data&&(n.data=t.data),n}var Xr={},Xa=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),io="%[a-f0-9]{2}",zn=new RegExp("("+io+")|([^%]+?)","gi"),jn=new RegExp("("+io+")+","gi");function Ir(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Ir(r),Ir(n))}function Za(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(zn)||[],r=1;r<e.length;r++)t=Ir(e,r).join(""),e=t.match(zn)||[];return t}}function el(t){for(var e={"%FE%FF":"","%FF%FE":""},r=jn.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Za(r[0]);n!==r[0]&&(e[r[0]]=n)}r=jn.exec(t)}e["%C2"]="";for(var s=Object.keys(e),i=0;i<s.length;i++){var c=s[i];t=t.replace(new RegExp(c,"g"),e[c])}return t}var tl=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return el(t)}},rl=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]};(function(t){const e=Xa,r=tl,n=rl,s=y=>y==null;function i(y){switch(y.arrayFormat){case"index":return M=>(C,E)=>{const R=C.length;return E===void 0||y.skipNull&&E===null||y.skipEmptyString&&E===""?C:E===null?[...C,[d(M,y),"[",R,"]"].join("")]:[...C,[d(M,y),"[",d(R,y),"]=",d(E,y)].join("")]};case"bracket":return M=>(C,E)=>E===void 0||y.skipNull&&E===null||y.skipEmptyString&&E===""?C:E===null?[...C,[d(M,y),"[]"].join("")]:[...C,[d(M,y),"[]=",d(E,y)].join("")];case"comma":case"separator":return M=>(C,E)=>E==null||E.length===0?C:C.length===0?[[d(M,y),"=",d(E,y)].join("")]:[[C,d(E,y)].join(y.arrayFormatSeparator)];default:return M=>(C,E)=>E===void 0||y.skipNull&&E===null||y.skipEmptyString&&E===""?C:E===null?[...C,d(M,y)]:[...C,[d(M,y),"=",d(E,y)].join("")]}}function c(y){let M;switch(y.arrayFormat){case"index":return(C,E,R)=>{if(M=/\[(\d*)\]$/.exec(C),C=C.replace(/\[\d*\]$/,""),!M){R[C]=E;return}R[C]===void 0&&(R[C]={}),R[C][M[1]]=E};case"bracket":return(C,E,R)=>{if(M=/(\[\])$/.exec(C),C=C.replace(/\[\]$/,""),!M){R[C]=E;return}if(R[C]===void 0){R[C]=[E];return}R[C]=[].concat(R[C],E)};case"comma":case"separator":return(C,E,R)=>{const B=typeof E=="string"&&E.split("").indexOf(y.arrayFormatSeparator)>-1?E.split(y.arrayFormatSeparator).map(H=>w(H,y)):E===null?E:w(E,y);R[C]=B};default:return(C,E,R)=>{if(R[C]===void 0){R[C]=E;return}R[C]=[].concat(R[C],E)}}}function h(y){if(typeof y!="string"||y.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(y,M){return M.encode?M.strict?e(y):encodeURIComponent(y):y}function w(y,M){return M.decode?r(y):y}function v(y){return Array.isArray(y)?y.sort():typeof y=="object"?v(Object.keys(y)).sort((M,C)=>Number(M)-Number(C)).map(M=>y[M]):y}function S(y){const M=y.indexOf("#");return M!==-1&&(y=y.slice(0,M)),y}function k(y){let M="";const C=y.indexOf("#");return C!==-1&&(M=y.slice(C)),M}function I(y){y=S(y);const M=y.indexOf("?");return M===-1?"":y.slice(M+1)}function T(y,M){return M.parseNumbers&&!Number.isNaN(Number(y))&&typeof y=="string"&&y.trim()!==""?y=Number(y):M.parseBooleans&&y!==null&&(y.toLowerCase()==="true"||y.toLowerCase()==="false")&&(y=y.toLowerCase()==="true"),y}function A(y,M){M=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},M),h(M.arrayFormatSeparator);const C=c(M),E=Object.create(null);if(typeof y!="string"||(y=y.trim().replace(/^[?#&]/,""),!y))return E;for(const R of y.split("&")){let[N,B]=n(M.decode?R.replace(/\+/g," "):R,"=");B=B===void 0?null:["comma","separator"].includes(M.arrayFormat)?B:w(B,M),C(w(N,M),B,E)}for(const R of Object.keys(E)){const N=E[R];if(typeof N=="object"&&N!==null)for(const B of Object.keys(N))N[B]=T(N[B],M);else E[R]=T(N,M)}return M.sort===!1?E:(M.sort===!0?Object.keys(E).sort():Object.keys(E).sort(M.sort)).reduce((R,N)=>{const B=E[N];return B&&typeof B=="object"&&!Array.isArray(B)?R[N]=v(B):R[N]=B,R},Object.create(null))}t.extract=I,t.parse=A,t.stringify=(y,M)=>{if(!y)return"";M=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},M),h(M.arrayFormatSeparator);const C=B=>M.skipNull&&s(y[B])||M.skipEmptyString&&y[B]==="",E=i(M),R={};for(const B of Object.keys(y))C(B)||(R[B]=y[B]);const N=Object.keys(R);return M.sort!==!1&&N.sort(M.sort),N.map(B=>{const H=y[B];return H===void 0?"":H===null?d(B,M):Array.isArray(H)?H.reduce(E(B),[]).join("&"):d(B,M)+"="+d(H,M)}).filter(B=>B.length>0).join("&")},t.parseUrl=(y,M)=>{M=Object.assign({decode:!0},M);const[C,E]=n(y,"#");return Object.assign({url:C.split("?")[0]||"",query:A(I(y),M)},M&&M.parseFragmentIdentifier&&E?{fragmentIdentifier:w(E,M)}:{})},t.stringifyUrl=(y,M)=>{M=Object.assign({encode:!0,strict:!0},M);const C=S(y.url).split("?")[0]||"",E=t.extract(y.url),R=t.parse(E,{sort:!1}),N=Object.assign(R,y.query);let B=t.stringify(N,M);B&&(B=`?${B}`);let H=k(y.url);return y.fragmentIdentifier&&(H=`#${d(y.fragmentIdentifier,M)}`),`${C}${B}${H}`}})(Xr);function nl(t){const e=t.indexOf("?")!==-1?t.indexOf("?"):void 0;return typeof e<"u"?t.substr(e):""}function il(t,e){let r=oo(t);return r=Object.assign(Object.assign({},r),e),t=ol(r),t}function oo(t){return Xr.parse(t)}function ol(t){return Xr.stringify(t)}function sl(t){return typeof t.bridge<"u"}function al(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),s=t.substring(e+1,r);function i(S){const k="@",I=S.split(k);return{handshakeTopic:I[0],version:parseInt(I[1],10)}}const c=i(s),h=typeof r<"u"?t.substr(r):"";function d(S){const k=oo(S);return{key:k.key||"",bridge:k.bridge||""}}const w=d(h);return Object.assign(Object.assign({protocol:n},c),w)}class ll{constructor(){this._eventEmitters=[],typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(e,r){this._eventEmitters.push({event:e,callback:r})}trigger(e){let r=[];e&&(r=this._eventEmitters.filter(n=>n.event===e)),r.forEach(n=>{n.callback()})}}const cl=typeof global.WebSocket<"u"?global.WebSocket:require("ws");class ul{constructor(e){if(this.opts=e,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=e.protocol,this._version=e.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=e.subscriptions||[],this._netMonitor=e.netMonitor||new ll,!e.url||typeof e.url!="string")throw new Error("Missing or invalid WebSocket url");this._url=e.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(e){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(e){}get connecting(){return this.readyState===0}set connected(e){}get connected(){return this.readyState===1}set closing(e){}get closing(){return this.readyState===2}set closed(e){}get closed(){return this.readyState===3}open(){this._socketCreate()}close(){this._socketClose()}send(e,r,n){if(!r||typeof r!="string")throw new Error("Missing or invalid topic field");this._socketSend({topic:r,type:"pub",payload:e,silent:!!n})}subscribe(e){this._socketSend({topic:e,type:"sub",payload:"",silent:!0})}on(e,r){this._events.push({event:e,callback:r})}_socketCreate(){if(this._nextSocket)return;const e=hl(this._url,this._protocol,this._version);if(this._nextSocket=new cl(e),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=r=>this._socketReceive(r),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=r=>this._socketError(r),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(e){const r=JSON.stringify(e);this._socket&&this._socket.readyState===1?this._socket.send(r):(this._setToQueue(e),this._socketCreate())}async _socketReceive(e){let r;try{r=JSON.parse(e.data)}catch{return}if(this._socketSend({topic:r.topic,type:"ack",payload:"",silent:!0}),this._socket&&this._socket.readyState===1){const n=this._events.filter(s=>s.event==="message");n&&n.length&&n.forEach(s=>s.callback(r))}}_socketError(e){const r=this._events.filter(n=>n.event==="error");r&&r.length&&r.forEach(n=>n.callback(e))}_queueSubscriptions(){this._subscriptions.forEach(r=>this._queue.push({topic:r,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(e){this._queue.push(e)}_pushQueue(){this._queue.forEach(r=>this._socketSend(r)),this._queue=[]}}function hl(t,e,r){var n,s;const c=(t.startsWith("https")?t.replace("https","wss"):t.startsWith("http")?t.replace("http","ws"):t).split("?"),h=Hi()?{protocol:e,version:r,env:"browser",host:((n=Wi())===null||n===void 0?void 0:n.host)||""}:{protocol:e,version:r,env:((s=Ut())===null||s===void 0?void 0:s.name)||""},d=il(nl(c[1]||""),h);return c[0]+"?"+d}const mr="Session currently connected",Je="Session currently disconnected",fl="Session Rejected",dl="Missing JSON RPC response",pl='JSON-RPC success response must include "result" field',_l='JSON-RPC error response must include "error" field',gl='JSON RPC request must have valid "method" value',vl='JSON RPC request must have valid "id" value',ml="Missing one of the required parameters: bridge / uri / session",Vn="JSON RPC response format is invalid",wl="URI format is invalid",yl="QRCode Modal not provided",Jn="User close QRCode Modal";class bl{constructor(){this._eventEmitters=[]}subscribe(e){this._eventEmitters.push(e)}unsubscribe(e){this._eventEmitters=this._eventEmitters.filter(r=>r.event!==e)}trigger(e){let r=[],n;Va(e)?n=e.method:ht(e)||It(e)?n=`response:${e.id}`:Wn(e)?n=e.event:n="",n&&(r=this._eventEmitters.filter(s=>s.event===n)),(!r||!r.length)&&!Ja(n)&&!Wn(n)&&(r=this._eventEmitters.filter(s=>s.event==="call_request")),r.forEach(s=>{if(It(e)){const i=new Error(e.error.message);s.callback(i,null)}else s.callback(null,e)})}}class Ml{constructor(e="walletconnect"){this.storageId=e}getSession(){let e=null;const r=Vr(this.storageId);return r&&sl(r)&&(e=r),e}setSession(e){return jr(this.storageId,e),e}removeSession(){Jr(this.storageId)}}const El="walletconnect.org",xl="abcdefghijklmnopqrstuvwxyz0123456789",so=xl.split("").map(t=>`https://${t}.bridge.walletconnect.org`);function Sl(t){let e=t.indexOf("//")>-1?t.split("/")[2]:t.split("/")[0];return e=e.split(":")[0],e=e.split("?")[0],e}function Cl(t){return Sl(t).split(".").slice(-2).join(".")}function kl(){return Math.floor(Math.random()*so.length)}function Rl(){return so[kl()]}function Tl(t){return Cl(t)===El}function Il(t){return Tl(t)?Rl():t}class Al{constructor(e){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new bl,this._clientMeta=kr()||e.connectorOpts.clientMeta||null,this._cryptoLib=e.cryptoLib,this._sessionStorage=e.sessionStorage||new Ml(e.connectorOpts.storageId),this._qrcodeModal=e.connectorOpts.qrcodeModal,this._qrcodeModalOptions=e.connectorOpts.qrcodeModalOptions,this._signingMethods=[...Kr,...e.connectorOpts.signingMethods||[]],!e.connectorOpts.bridge&&!e.connectorOpts.uri&&!e.connectorOpts.session)throw new Error(ml);e.connectorOpts.bridge&&(this.bridge=Il(e.connectorOpts.bridge)),e.connectorOpts.uri&&(this.uri=e.connectorOpts.uri);const r=e.connectorOpts.session||this._getStorageSession();r&&(this.session=r),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=e.transport||new ul({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),e.connectorOpts.uri&&this._subscribeToSessionRequest(),e.pushServerOpts&&this._registerPushServer(e.pushServerOpts)}set bridge(e){e&&(this._bridge=e)}get bridge(){return this._bridge}set key(e){if(!e)return;const r=Pa(e);this._key=r}get key(){return this._key?Oa(this._key,!0):""}set clientId(e){e&&(this._clientId=e)}get clientId(){let e=this._clientId;return e||(e=this._clientId=gr()),this._clientId}set peerId(e){e&&(this._peerId=e)}get peerId(){return this._peerId}set clientMeta(e){}get clientMeta(){let e=this._clientMeta;return e||(e=this._clientMeta=kr()),e}set peerMeta(e){this._peerMeta=e}get peerMeta(){return this._peerMeta}set handshakeTopic(e){e&&(this._handshakeTopic=e)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(e){e&&(this._handshakeId=e)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(e){if(!e)return;const{handshakeTopic:r,bridge:n,key:s}=this._parseUri(e);this.handshakeTopic=r,this.bridge=n,this.key=s}set chainId(e){this._chainId=e}get chainId(){return this._chainId}set networkId(e){this._networkId=e}get networkId(){return this._networkId}set accounts(e){this._accounts=e}get accounts(){return this._accounts}set rpcUrl(e){this._rpcUrl=e}get rpcUrl(){return this._rpcUrl}set connected(e){}get connected(){return this._connected}set pending(e){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(e){e&&(this._connected=e.connected,this.accounts=e.accounts,this.chainId=e.chainId,this.bridge=e.bridge,this.key=e.key,this.clientId=e.clientId,this.clientMeta=e.clientMeta,this.peerId=e.peerId,this.peerMeta=e.peerMeta,this.handshakeId=e.handshakeId,this.handshakeTopic=e.handshakeTopic)}on(e,r){const n={event:e,callback:r};this._eventManager.subscribe(n)}off(e){this._eventManager.unsubscribe(e)}async createInstantRequest(e){this._key=await this._generateKey();const r=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(e)}]});this.handshakeId=r.id,this.handshakeTopic=gr(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",()=>{throw new Error(Jn)});const n=()=>{this.killSession()};try{const s=await this._sendCallRequest(r);return s&&n(),s}catch(s){throw n(),s}}async connect(e){if(!this._qrcodeModal)throw new Error(yl);return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(e),new Promise(async(r,n)=>{this.on("modal_closed",()=>n(new Error(Jn))),this.on("connect",(s,i)=>{if(s)return n(s);r(i.params[0])})}))}async createSession(e){if(this._connected)throw new Error(mr);if(this.pending)return;this._key=await this._generateKey();const r=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:e&&e.chainId?e.chainId:null}]});this.handshakeId=r.id,this.handshakeTopic=gr(),this._sendSessionRequest(r,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(e){if(this._connected)throw new Error(mr);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const r={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},n={id:this.handshakeId,jsonrpc:"2.0",result:r};this._sendResponse(n),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(e){if(this._connected)throw new Error(mr);const r=e&&e.message?e.message:fl,n=this._formatResponse({id:this.handshakeId,error:{message:r}});this._sendResponse(n),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:r}]}),this._removeStorageSession()}updateSession(e){if(!this._connected)throw new Error(Je);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const r={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},n=this._formatRequest({method:"wc_sessionUpdate",params:[r]});this._sendSessionRequest(n,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(e){const r=e?e.message:"Session Disconnected",n={approved:!1,chainId:null,networkId:null,accounts:null},s=this._formatRequest({method:"wc_sessionUpdate",params:[n]});await this._sendRequest(s),this._handleSessionDisconnect(r)}async sendTransaction(e){if(!this._connected)throw new Error(Je);const r=vr(e),n=this._formatRequest({method:"eth_sendTransaction",params:[r]});return await this._sendCallRequest(n)}async signTransaction(e){if(!this._connected)throw new Error(Je);const r=vr(e),n=this._formatRequest({method:"eth_signTransaction",params:[r]});return await this._sendCallRequest(n)}async signMessage(e){if(!this._connected)throw new Error(Je);const r=this._formatRequest({method:"eth_sign",params:e});return await this._sendCallRequest(r)}async signPersonalMessage(e){if(!this._connected)throw new Error(Je);e=At(e);const r=this._formatRequest({method:"personal_sign",params:e});return await this._sendCallRequest(r)}async signTypedData(e){if(!this._connected)throw new Error(Je);const r=this._formatRequest({method:"eth_signTypedData",params:e});return await this._sendCallRequest(r)}async updateChain(e){if(!this._connected)throw new Error("Session currently disconnected");const r=this._formatRequest({method:"wallet_updateChain",params:[e]});return await this._sendCallRequest(r)}unsafeSend(e,r){return this._sendRequest(e,r),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:r}]}),new Promise((n,s)=>{this._subscribeToResponse(e.id,(i,c)=>{if(i){s(i);return}if(!c)throw new Error(dl);n(c)})})}async sendCustomRequest(e,r){if(!this._connected)throw new Error(Je);switch(e.method){case"eth_accounts":return this.accounts;case"eth_chainId":return ro(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":e.params&&(e.params[0]=vr(e.params[0]));break;case"personal_sign":e.params&&(e.params=At(e.params));break}const n=this._formatRequest(e);return await this._sendCallRequest(n,r)}approveRequest(e){if(ht(e)){const r=this._formatResponse(e);this._sendResponse(r)}else throw new Error(pl)}rejectRequest(e){if(It(e)){const r=this._formatResponse(e);this._sendResponse(r)}else throw new Error(_l)}transportClose(){this._transport.close()}async _sendRequest(e,r){const n=this._formatRequest(e),s=await this._encrypt(n),i=typeof(r==null?void 0:r.topic)<"u"?r.topic:this.peerId,c=JSON.stringify(s),h=typeof(r==null?void 0:r.forcePushNotification)<"u"?!r.forcePushNotification:Ka(n);this._transport.send(c,i,h)}async _sendResponse(e){const r=await this._encrypt(e),n=this.peerId,s=JSON.stringify(r),i=!0;this._transport.send(s,n,i)}async _sendSessionRequest(e,r,n){this._sendRequest(e,n),this._subscribeToSessionResponse(e.id,r)}_sendCallRequest(e,r){return this._sendRequest(e,r),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:r}]}),this._subscribeToCallResponse(e.id)}_formatRequest(e){if(typeof e.method>"u")throw new Error(gl);return{id:typeof e.id>"u"?Tr():e.id,jsonrpc:"2.0",method:e.method,params:typeof e.params>"u"?[]:e.params}}_formatResponse(e){if(typeof e.id>"u")throw new Error(vl);const r={id:e.id,jsonrpc:"2.0"};if(It(e)){const n=Ya(e.error);return Object.assign(Object.assign(Object.assign({},r),e),{error:n})}else if(ht(e))return Object.assign(Object.assign({},r),e);throw new Error(Vn)}_handleSessionDisconnect(e){const r=e||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),Jr(Tt)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:r}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(e,r){r?r.approved?(this._connected?(r.chainId&&(this.chainId=r.chainId),r.accounts&&(this.accounts=r.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,r.chainId&&(this.chainId=r.chainId),r.accounts&&(this.accounts=r.accounts),r.peerId&&!this.peerId&&(this.peerId=r.peerId),r.peerMeta&&!this.peerMeta&&(this.peerMeta=r.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(e):this._handleSessionDisconnect(e)}async _handleIncomingMessages(e){if(![this.clientId,this.handshakeTopic].includes(e.topic))return;let n;try{n=JSON.parse(e.payload)}catch{return}const s=await this._decrypt(n);s&&this._eventManager.trigger(s)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(e,r){this.on(`response:${e}`,r)}_subscribeToSessionResponse(e,r){this._subscribeToResponse(e,(n,s)=>{if(n){this._handleSessionResponse(n.message);return}ht(s)?this._handleSessionResponse(r,s.result):s.error&&s.error.message?this._handleSessionResponse(s.error.message):this._handleSessionResponse(r)})}_subscribeToCallResponse(e){return new Promise((r,n)=>{this._subscribeToResponse(e,(s,i)=>{if(s){n(s);return}ht(i)?r(i.result):i.error&&i.error.message?n(i.error):n(new Error(Vn))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(e,r)=>{const{request:n}=r.params[0];if(Ui()&&this._signingMethods.includes(n.method)){const s=Vr(Tt);s&&(window.location.href=s.href)}}),this.on("wc_sessionRequest",(e,r)=>{e&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:e.toString()}]}),this.handshakeId=r.id,this.peerId=r.params[0].peerId,this.peerMeta=r.params[0].peerMeta;const n=Object.assign(Object.assign({},r),{method:"session_request"});this._eventManager.trigger(n)}),this.on("wc_sessionUpdate",(e,r)=>{e&&this._handleSessionResponse(e.message),this._handleSessionResponse("Session disconnected",r.params[0])})}_initTransport(){this._transport.on("message",e=>this._handleIncomingMessages(e)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){const e=this.protocol,r=this.handshakeTopic,n=this.version,s=encodeURIComponent(this.bridge),i=this.key;return`${e}:${r}@${n}?bridge=${s}&key=${i}`}_parseUri(e){const r=al(e);if(r.protocol===this.protocol){if(!r.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const n=r.handshakeTopic;if(!r.bridge)throw Error("Invalid or missing bridge url parameter value");const s=decodeURIComponent(r.bridge);if(!r.key)throw Error("Invalid or missing key parameter value");const i=r.key;return{handshakeTopic:n,bridge:s,key:i}}else throw new Error(wl)}async _generateKey(){return this._cryptoLib?await this._cryptoLib.generateKey():null}async _encrypt(e){const r=this._key;return this._cryptoLib&&r?await this._cryptoLib.encrypt(e,r):null}async _decrypt(e){const r=this._key;return this._cryptoLib&&r?await this._cryptoLib.decrypt(e,r):null}_getStorageSession(){let e=null;return this._sessionStorage&&(e=this._sessionStorage.getSession()),e}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(e){if(!e.url||typeof e.url!="string")throw Error("Invalid or missing pushServerOpts.url parameter value");if(!e.type||typeof e.type!="string")throw Error("Invalid or missing pushServerOpts.type parameter value");if(!e.token||typeof e.token!="string")throw Error("Invalid or missing pushServerOpts.token parameter value");const r={bridge:this.bridge,topic:this.clientId,type:e.type,token:e.token,peerName:"",language:e.language||""};this.on("connect",async(n,s)=>{if(n)throw n;if(e.peerMeta){const i=s.params[0].peerMeta.name;r.peerName=i}try{if(!(await(await fetch(`${e.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}})}}function Ol(t){return lt.getBrowerCrypto().getRandomValues(new Uint8Array(t))}const ao=256,lo=ao,Nl=ao,ze="AES-CBC",Bl=`SHA-${lo}`,Ar="HMAC",Ll="encrypt",Pl="decrypt",ql="sign",Ul="verify";function Dl(t){return t===ze?{length:lo,name:ze}:{hash:{name:Bl},name:Ar}}function Hl(t){return t===ze?[Ll,Pl]:[ql,Ul]}async function Zr(t,e=ze){return lt.getSubtleCrypto().importKey("raw",t,Dl(e),!0,Hl(e))}async function Fl(t,e,r){const n=lt.getSubtleCrypto(),s=await Zr(e,ze),i=await n.encrypt({iv:t,name:ze},s,r);return new Uint8Array(i)}async function $l(t,e,r){const n=lt.getSubtleCrypto(),s=await Zr(e,ze),i=await n.decrypt({iv:t,name:ze},s,r);return new Uint8Array(i)}async function Wl(t,e){const r=lt.getSubtleCrypto(),n=await Zr(t,Ar),s=await r.sign({length:Nl,name:Ar},n,e);return new Uint8Array(s)}function zl(t,e,r){return Fl(t,e,r)}function jl(t,e,r){return $l(t,e,r)}async function co(t,e){return await Wl(t,e)}async function uo(t){const e=(t||256)/8,r=Ol(e);return Na($t(r))}async function ho(t,e){const r=Xe(t.data),n=Xe(t.iv),s=Xe(t.hmac),i=Ye(s,!1),c=eo(r,n),h=await co(e,c),d=Ye(h,!1);return We(i)===We(d)}async function Vl(t,e,r){const n=Ze(Rr(e)),s=r||await uo(128),i=Ze(Rr(s)),c=Ye(i,!1),h=JSON.stringify(t),d=xa(h),w=await zl(i,n,d),v=Ye(w,!1),S=eo(w,i),k=await co(n,S),I=Ye(k,!1);return{data:v,hmac:I,iv:c}}async function Jl(t,e){const r=Ze(Rr(e));if(!r)throw new Error("Missing key: required for decryption");if(!await ho(t,r))return null;const s=Xe(t.data),i=Xe(t.iv),c=await jl(i,r,s),h=Ma(c);let d;try{d=JSON.parse(h)}catch{return null}return d}const Kl=Object.freeze(Object.defineProperty({__proto__:null,decrypt:Jl,encrypt:Vl,generateKey:uo,verifyHmac:ho},Symbol.toStringTag,{value:"Module"}));class Ql extends Al{constructor(e,r){super({cryptoLib:Kl,connectorOpts:e,pushServerOpts:r})}}const Gl=Wr(ua);var wt={},Yl=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},fo={},je={},Xl={}.toString,en=Array.isArray||function(t){return Xl.call(t)=="[object Array]"},Zl=en;function ec(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},t.foo()===42}catch{return!1}}$.TYPED_ARRAY_SUPPORT=ec();var Kn=$.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function $(t,e,r){return!$.TYPED_ARRAY_SUPPORT&&!(this instanceof $)?new $(t,e,r):typeof t=="number"?po(this,t):ac(this,t,e,r)}$.TYPED_ARRAY_SUPPORT&&($.prototype.__proto__=Uint8Array.prototype,$.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&$[Symbol.species]===$&&Object.defineProperty($,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));function tn(t){if(t>=Kn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Kn.toString(16)+" bytes");return t|0}function tc(t){return t!==t}function et(t,e){var r;return $.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=$.prototype):(r=t,r===null&&(r=new $(e)),r.length=e),r}function po(t,e){var r=et(t,e<0?0:tn(e)|0);if(!$.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)r[n]=0;return r}function rc(t,e){var r=go(e)|0,n=et(t,r),s=n.write(e);return s!==r&&(n=n.slice(0,s)),n}function Or(t,e){for(var r=e.length<0?0:tn(e.length)|0,n=et(t,r),s=0;s<r;s+=1)n[s]=e[s]&255;return n}function nc(t,e,r,n){if(r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var s;return r===void 0&&n===void 0?s=new Uint8Array(e):n===void 0?s=new Uint8Array(e,r):s=new Uint8Array(e,r,n),$.TYPED_ARRAY_SUPPORT?s.__proto__=$.prototype:s=Or(t,s),s}function ic(t,e){if($.isBuffer(e)){var r=tn(e.length)|0,n=et(t,r);return n.length===0||e.copy(n,0,0,r),n}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||tc(e.length)?et(t,0):Or(t,e);if(e.type==="Buffer"&&Array.isArray(e.data))return Or(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function _o(t,e){e=e||1/0;for(var r,n=t.length,s=null,i=[],c=0;c<n;++c){if(r=t.charCodeAt(c),r>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(c+1===n){(e-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function go(t){if($.isBuffer(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var e=t.length;return e===0?0:_o(t).length}function oc(t,e,r,n){for(var s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function sc(t,e,r,n){return oc(_o(e,t.length-r),t,r,n)}function ac(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?nc(t,e,r,n):typeof e=="string"?rc(t,e):ic(t,e)}$.prototype.write=function(e,r,n){r===void 0?(n=this.length,r=0):n===void 0&&typeof r=="string"?(n=this.length,r=0):isFinite(r)&&(r=r|0,isFinite(n)?n=n|0:n=void 0);var s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");return sc(this,e,r,n)};$.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var s;if($.TYPED_ARRAY_SUPPORT)s=this.subarray(e,r),s.__proto__=$.prototype;else{var i=r-e;s=new $(i,void 0);for(var c=0;c<i;++c)s[c]=this[c+e]}return s};$.prototype.copy=function(e,r,n,s){if(n||(n=0),!s&&s!==0&&(s=this.length),r>=e.length&&(r=e.length),r||(r=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-r<s-n&&(s=e.length-r+n);var i=s-n,c;if(this===e&&n<r&&r<s)for(c=i-1;c>=0;--c)e[c+r]=this[c+n];else if(i<1e3||!$.TYPED_ARRAY_SUPPORT)for(c=0;c<i;++c)e[c+r]=this[c+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),r);return i};$.prototype.fill=function(e,r,n){if(typeof e=="string"){if(typeof r=="string"?(r=0,n=this.length):typeof n=="string"&&(n=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var i;if(typeof e=="number")for(i=r;i<n;++i)this[i]=e;else{var c=$.isBuffer(e)?e:new $(e),h=c.length;for(i=0;i<n-r;++i)this[i+r]=c[i%h]}return this};$.concat=function(e,r){if(!Zl(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return et(null,0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var s=po(null,r),i=0;for(n=0;n<e.length;++n){var c=e[n];if(!$.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(s,i),i+=c.length}return s};$.byteLength=go;$.prototype._isBuffer=!0;$.isBuffer=function(e){return!!(e!=null&&e._isBuffer)};je.alloc=function(t){var e=new $(t);return e.fill(0),e};je.from=function(t){return new $(t)};var Oe={},rn,lc=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Oe.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Oe.getSymbolTotalCodewords=function(e){return lc[e]};Oe.getBCHDigit=function(t){for(var e=0;t!==0;)e++,t>>>=1;return e};Oe.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');rn=e};Oe.isKanjiModeEnabled=function(){return typeof rn<"u"};Oe.toSJIS=function(e){return rn(e)};var Wt={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");var n=r.toLowerCase();switch(n){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,s){if(t.isValid(n))return n;try{return e(n)}catch{return s}}})(Wt);function vo(){this.buffer=[],this.length=0}vo.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(var r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var cc=vo,Qn=je;function yt(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=Qn.alloc(t*t),this.reservedBit=Qn.alloc(t*t)}yt.prototype.set=function(t,e,r,n){var s=t*this.size+e;this.data[s]=r,n&&(this.reservedBit[s]=!0)};yt.prototype.get=function(t,e){return this.data[t*this.size+e]};yt.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};yt.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var uc=yt,mo={};(function(t){var e=Oe.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];for(var s=Math.floor(n/7)+2,i=e(n),c=i===145?26:Math.ceil((i-13)/(2*s-2))*2,h=[i-7],d=1;d<s-1;d++)h[d]=h[d-1]-c;return h.push(6),h.reverse()},t.getPositions=function(n){for(var s=[],i=t.getRowColCoords(n),c=i.length,h=0;h<c;h++)for(var d=0;d<c;d++)h===0&&d===0||h===0&&d===c-1||h===c-1&&d===0||s.push([i[h],i[d]]);return s}})(mo);var wo={},hc=Oe.getSymbolSize,Gn=7;wo.getPositions=function(e){var r=hc(e);return[[0,0],[r-Gn,0],[0,r-Gn]]};var yo={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){for(var i=s.size,c=0,h=0,d=0,w=null,v=null,S=0;S<i;S++){h=d=0,w=v=null;for(var k=0;k<i;k++){var I=s.get(S,k);I===w?h++:(h>=5&&(c+=e.N1+(h-5)),w=I,h=1),I=s.get(k,S),I===v?d++:(d>=5&&(c+=e.N1+(d-5)),v=I,d=1)}h>=5&&(c+=e.N1+(h-5)),d>=5&&(c+=e.N1+(d-5))}return c},t.getPenaltyN2=function(s){for(var i=s.size,c=0,h=0;h<i-1;h++)for(var d=0;d<i-1;d++){var w=s.get(h,d)+s.get(h,d+1)+s.get(h+1,d)+s.get(h+1,d+1);(w===4||w===0)&&c++}return c*e.N2},t.getPenaltyN3=function(s){for(var i=s.size,c=0,h=0,d=0,w=0;w<i;w++){h=d=0;for(var v=0;v<i;v++)h=h<<1&2047|s.get(w,v),v>=10&&(h===1488||h===93)&&c++,d=d<<1&2047|s.get(v,w),v>=10&&(d===1488||d===93)&&c++}return c*e.N3},t.getPenaltyN4=function(s){for(var i=0,c=s.data.length,h=0;h<c;h++)i+=s.data[h];var d=Math.abs(Math.ceil(i*100/c/5)-10);return d*e.N4};function r(n,s,i){switch(n){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(s,i){for(var c=i.size,h=0;h<c;h++)for(var d=0;d<c;d++)i.isReserved(d,h)||i.xor(d,h,r(s,d,h))},t.getBestMask=function(s,i){for(var c=Object.keys(t.Patterns).length,h=0,d=1/0,w=0;w<c;w++){i(w),t.applyMask(w,s);var v=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(w,s),v<d&&(d=v,h=w)}return h}})(yo);var zt={},Fe=Wt,xt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],St=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];zt.getBlocksCount=function(e,r){switch(r){case Fe.L:return xt[(e-1)*4+0];case Fe.M:return xt[(e-1)*4+1];case Fe.Q:return xt[(e-1)*4+2];case Fe.H:return xt[(e-1)*4+3];default:return}};zt.getTotalCodewordsCount=function(e,r){switch(r){case Fe.L:return St[(e-1)*4+0];case Fe.M:return St[(e-1)*4+1];case Fe.Q:return St[(e-1)*4+2];case Fe.H:return St[(e-1)*4+3];default:return}};var bo={},jt={},Mo=je,ft=Mo.alloc(512),Ot=Mo.alloc(256);(function(){for(var e=1,r=0;r<255;r++)ft[r]=e,Ot[e]=r,e<<=1,e&256&&(e^=285);for(r=255;r<512;r++)ft[r]=ft[r-255]})();jt.log=function(e){if(e<1)throw new Error("log("+e+")");return Ot[e]};jt.exp=function(e){return ft[e]};jt.mul=function(e,r){return e===0||r===0?0:ft[Ot[e]+Ot[r]]};(function(t){var e=je,r=jt;t.mul=function(s,i){for(var c=e.alloc(s.length+i.length-1),h=0;h<s.length;h++)for(var d=0;d<i.length;d++)c[h+d]^=r.mul(s[h],i[d]);return c},t.mod=function(s,i){for(var c=e.from(s);c.length-i.length>=0;){for(var h=c[0],d=0;d<i.length;d++)c[d]^=r.mul(i[d],h);for(var w=0;w<c.length&&c[w]===0;)w++;c=c.slice(w)}return c},t.generateECPolynomial=function(s){for(var i=e.from([1]),c=0;c<s;c++)i=t.mul(i,[1,r.exp(c)]);return i}})(bo);var Yn=je,Eo=bo,fc=Ms.Buffer;function nn(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}nn.prototype.initialize=function(e){this.degree=e,this.genPoly=Eo.generateECPolynomial(this.degree)};nn.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var r=Yn.alloc(this.degree),n=fc.concat([e,r],e.length+this.degree),s=Eo.mod(n,this.genPoly),i=this.degree-s.length;if(i>0){var c=Yn.alloc(this.degree);return s.copy(c,i),c}return s};var dc=nn,xo={},Ve={},on={};on.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Be={},So="[0-9]+",pc="[A-Z $%*+\\-./:]+",_t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";_t=_t.replace(/u/g,"\\u");var _c="(?:(?![A-Z0-9 $%*+\\-./:]|"+_t+`)(?:.|[\r
]))+`;Be.KANJI=new RegExp(_t,"g");Be.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Be.BYTE=new RegExp(_c,"g");Be.NUMERIC=new RegExp(So,"g");Be.ALPHANUMERIC=new RegExp(pc,"g");var gc=new RegExp("^"+_t+"$"),vc=new RegExp("^"+So+"$"),mc=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Be.testKanji=function(e){return gc.test(e)};Be.testNumeric=function(e){return vc.test(e)};Be.testAlphanumeric=function(e){return mc.test(e)};(function(t){var e=on,r=Be;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,c){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?i.ccBits[0]:c<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return r.testNumeric(i)?t.NUMERIC:r.testAlphanumeric(i)?t.ALPHANUMERIC:r.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");var i=s.toLowerCase();switch(i){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,c){if(t.isValid(i))return i;try{return n(i)}catch{return c}}})(Ve);(function(t){var e=Oe,r=zt,n=Wt,s=Ve,i=on,c=en,h=7973,d=e.getBCHDigit(h);function w(I,T,A){for(var y=1;y<=40;y++)if(T<=t.getCapacity(y,A,I))return y}function v(I,T){return s.getCharCountIndicator(I,T)+4}function S(I,T){var A=0;return I.forEach(function(y){var M=v(y.mode,T);A+=M+y.getBitsLength()}),A}function k(I,T){for(var A=1;A<=40;A++){var y=S(I,A);if(y<=t.getCapacity(A,T,s.MIXED))return A}}t.from=function(T,A){return i.isValid(T)?parseInt(T,10):A},t.getCapacity=function(T,A,y){if(!i.isValid(T))throw new Error("Invalid QR Code version");typeof y>"u"&&(y=s.BYTE);var M=e.getSymbolTotalCodewords(T),C=r.getTotalCodewordsCount(T,A),E=(M-C)*8;if(y===s.MIXED)return E;var R=E-v(y,T);switch(y){case s.NUMERIC:return Math.floor(R/10*3);case s.ALPHANUMERIC:return Math.floor(R/11*2);case s.KANJI:return Math.floor(R/13);case s.BYTE:default:return Math.floor(R/8)}},t.getBestVersionForData=function(T,A){var y,M=n.from(A,n.M);if(c(T)){if(T.length>1)return k(T,M);if(T.length===0)return 1;y=T[0]}else y=T;return w(y.mode,y.getLength(),M)},t.getEncodedBits=function(T){if(!i.isValid(T)||T<7)throw new Error("Invalid QR Code version");for(var A=T<<12;e.getBCHDigit(A)-d>=0;)A^=h<<e.getBCHDigit(A)-d;return T<<12|A}})(xo);var Co={},Nr=Oe,ko=1335,wc=21522,Xn=Nr.getBCHDigit(ko);Co.getEncodedBits=function(e,r){for(var n=e.bit<<3|r,s=n<<10;Nr.getBCHDigit(s)-Xn>=0;)s^=ko<<Nr.getBCHDigit(s)-Xn;return(n<<10|s)^wc};var Ro={},yc=Ve;function tt(t){this.mode=yc.NUMERIC,this.data=t.toString()}tt.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};tt.prototype.getLength=function(){return this.data.length};tt.prototype.getBitsLength=function(){return tt.getBitsLength(this.data.length)};tt.prototype.write=function(e){var r,n,s;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),s=parseInt(n,10),e.put(s,10);var i=this.data.length-r;i>0&&(n=this.data.substr(r),s=parseInt(n,10),e.put(s,i*3+1))};var bc=tt,Mc=Ve,wr=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function rt(t){this.mode=Mc.ALPHANUMERIC,this.data=t}rt.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};rt.prototype.getLength=function(){return this.data.length};rt.prototype.getBitsLength=function(){return rt.getBitsLength(this.data.length)};rt.prototype.write=function(e){var r;for(r=0;r+2<=this.data.length;r+=2){var n=wr.indexOf(this.data[r])*45;n+=wr.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(wr.indexOf(this.data[r]),6)};var Ec=rt,xc=je,Sc=Ve;function nt(t){this.mode=Sc.BYTE,this.data=xc.from(t)}nt.getBitsLength=function(e){return e*8};nt.prototype.getLength=function(){return this.data.length};nt.prototype.getBitsLength=function(){return nt.getBitsLength(this.data.length)};nt.prototype.write=function(t){for(var e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var Cc=nt,kc=Ve,Rc=Oe;function it(t){this.mode=kc.KANJI,this.data=t}it.getBitsLength=function(e){return e*13};it.prototype.getLength=function(){return this.data.length};it.prototype.getBitsLength=function(){return it.getBitsLength(this.data.length)};it.prototype.write=function(t){var e;for(e=0;e<this.data.length;e++){var r=Rc.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var Tc=it,To={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,s){var i={},c={};c[n]=0;var h=e.PriorityQueue.make();h.push(n,0);for(var d,w,v,S,k,I,T,A,y;!h.empty();){d=h.pop(),w=d.value,S=d.cost,k=r[w]||{};for(v in k)k.hasOwnProperty(v)&&(I=k[v],T=S+I,A=c[v],y=typeof c[v]>"u",(y||A>T)&&(c[v]=T,h.push(v,T),i[v]=w))}if(typeof s<"u"&&typeof c[s]>"u"){var M=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(M)}return i},extract_shortest_path_from_predecessor_list:function(r,n){for(var s=[],i=n;i;)s.push(i),r[i],i=r[i];return s.reverse(),s},find_path:function(r,n,s){var i=e.single_source_shortest_paths(r,n,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,s={},i;r=r||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=r.sorter||n.default_sorter,s},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var s={value:r,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(To);var Ic=To.exports;(function(t){var e=Ve,r=bc,n=Ec,s=Cc,i=Tc,c=Be,h=Oe,d=Ic;function w(M){return unescape(encodeURIComponent(M)).length}function v(M,C,E){for(var R=[],N;(N=M.exec(E))!==null;)R.push({data:N[0],index:N.index,mode:C,length:N[0].length});return R}function S(M){var C=v(c.NUMERIC,e.NUMERIC,M),E=v(c.ALPHANUMERIC,e.ALPHANUMERIC,M),R,N;h.isKanjiModeEnabled()?(R=v(c.BYTE,e.BYTE,M),N=v(c.KANJI,e.KANJI,M)):(R=v(c.BYTE_KANJI,e.BYTE,M),N=[]);var B=C.concat(E,R,N);return B.sort(function(H,D){return H.index-D.index}).map(function(H){return{data:H.data,mode:H.mode,length:H.length}})}function k(M,C){switch(C){case e.NUMERIC:return r.getBitsLength(M);case e.ALPHANUMERIC:return n.getBitsLength(M);case e.KANJI:return i.getBitsLength(M);case e.BYTE:return s.getBitsLength(M)}}function I(M){return M.reduce(function(C,E){var R=C.length-1>=0?C[C.length-1]:null;return R&&R.mode===E.mode?(C[C.length-1].data+=E.data,C):(C.push(E),C)},[])}function T(M){for(var C=[],E=0;E<M.length;E++){var R=M[E];switch(R.mode){case e.NUMERIC:C.push([R,{data:R.data,mode:e.ALPHANUMERIC,length:R.length},{data:R.data,mode:e.BYTE,length:R.length}]);break;case e.ALPHANUMERIC:C.push([R,{data:R.data,mode:e.BYTE,length:R.length}]);break;case e.KANJI:C.push([R,{data:R.data,mode:e.BYTE,length:w(R.data)}]);break;case e.BYTE:C.push([{data:R.data,mode:e.BYTE,length:w(R.data)}])}}return C}function A(M,C){for(var E={},R={start:{}},N=["start"],B=0;B<M.length;B++){for(var H=M[B],D=[],K=0;K<H.length;K++){var m=H[K],o=""+B+K;D.push(o),E[o]={node:m,lastCount:0},R[o]={};for(var l=0;l<N.length;l++){var u=N[l];E[u]&&E[u].node.mode===m.mode?(R[u][o]=k(E[u].lastCount+m.length,m.mode)-k(E[u].lastCount,m.mode),E[u].lastCount+=m.length):(E[u]&&(E[u].lastCount=m.length),R[u][o]=k(m.length,m.mode)+4+e.getCharCountIndicator(m.mode,C))}}N=D}for(l=0;l<N.length;l++)R[N[l]].end=0;return{map:R,table:E}}function y(M,C){var E,R=e.getBestModeForData(M);if(E=e.from(C,R),E!==e.BYTE&&E.bit<R.bit)throw new Error('"'+M+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(R));switch(E===e.KANJI&&!h.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new r(M);case e.ALPHANUMERIC:return new n(M);case e.KANJI:return new i(M);case e.BYTE:return new s(M)}}t.fromArray=function(C){return C.reduce(function(E,R){return typeof R=="string"?E.push(y(R,null)):R.data&&E.push(y(R.data,R.mode)),E},[])},t.fromString=function(C,E){for(var R=S(C,h.isKanjiModeEnabled()),N=T(R),B=A(N,E),H=d.find_path(B.map,"start","end"),D=[],K=1;K<H.length-1;K++)D.push(B.table[H[K]].node);return t.fromArray(I(D))},t.rawSplit=function(C){return t.fromArray(S(C,h.isKanjiModeEnabled()))}})(Ro);var Zn=je,Vt=Oe,yr=Wt,Ac=cc,Oc=uc,Nc=mo,Bc=wo,Br=yo,Lr=zt,Lc=dc,Nt=xo,Pc=Co,qc=Ve,br=Ro,Uc=en;function Dc(t,e){for(var r=t.size,n=Bc.getPositions(e),s=0;s<n.length;s++)for(var i=n[s][0],c=n[s][1],h=-1;h<=7;h++)if(!(i+h<=-1||r<=i+h))for(var d=-1;d<=7;d++)c+d<=-1||r<=c+d||(h>=0&&h<=6&&(d===0||d===6)||d>=0&&d<=6&&(h===0||h===6)||h>=2&&h<=4&&d>=2&&d<=4?t.set(i+h,c+d,!0,!0):t.set(i+h,c+d,!1,!0))}function Hc(t){for(var e=t.size,r=8;r<e-8;r++){var n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function Fc(t,e){for(var r=Nc.getPositions(e),n=0;n<r.length;n++)for(var s=r[n][0],i=r[n][1],c=-2;c<=2;c++)for(var h=-2;h<=2;h++)c===-2||c===2||h===-2||h===2||c===0&&h===0?t.set(s+c,i+h,!0,!0):t.set(s+c,i+h,!1,!0)}function $c(t,e){for(var r=t.size,n=Nt.getEncodedBits(e),s,i,c,h=0;h<18;h++)s=Math.floor(h/3),i=h%3+r-8-3,c=(n>>h&1)===1,t.set(s,i,c,!0),t.set(i,s,c,!0)}function Mr(t,e,r){var n=t.size,s=Pc.getEncodedBits(e,r),i,c;for(i=0;i<15;i++)c=(s>>i&1)===1,i<6?t.set(i,8,c,!0):i<8?t.set(i+1,8,c,!0):t.set(n-15+i,8,c,!0),i<8?t.set(8,n-i-1,c,!0):i<9?t.set(8,15-i-1+1,c,!0):t.set(8,15-i-1,c,!0);t.set(n-8,8,1,!0)}function Wc(t,e){for(var r=t.size,n=-1,s=r-1,i=7,c=0,h=r-1;h>0;h-=2)for(h===6&&h--;;){for(var d=0;d<2;d++)if(!t.isReserved(s,h-d)){var w=!1;c<e.length&&(w=(e[c]>>>i&1)===1),t.set(s,h-d,w),i--,i===-1&&(c++,i=7)}if(s+=n,s<0||r<=s){s-=n,n=-n;break}}}function zc(t,e,r){var n=new Ac;r.forEach(function(w){n.put(w.mode.bit,4),n.put(w.getLength(),qc.getCharCountIndicator(w.mode,t)),w.write(n)});var s=Vt.getSymbolTotalCodewords(t),i=Lr.getTotalCodewordsCount(t,e),c=(s-i)*8;for(n.getLengthInBits()+4<=c&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);for(var h=(c-n.getLengthInBits())/8,d=0;d<h;d++)n.put(d%2?17:236,8);return jc(n,t,e)}function jc(t,e,r){for(var n=Vt.getSymbolTotalCodewords(e),s=Lr.getTotalCodewordsCount(e,r),i=n-s,c=Lr.getBlocksCount(e,r),h=n%c,d=c-h,w=Math.floor(n/c),v=Math.floor(i/c),S=v+1,k=w-v,I=new Lc(k),T=0,A=new Array(c),y=new Array(c),M=0,C=Zn.from(t.buffer),E=0;E<c;E++){var R=E<d?v:S;A[E]=C.slice(T,T+R),y[E]=I.encode(A[E]),T+=R,M=Math.max(M,R)}var N=Zn.alloc(n),B=0,H,D;for(H=0;H<M;H++)for(D=0;D<c;D++)H<A[D].length&&(N[B++]=A[D][H]);for(H=0;H<k;H++)for(D=0;D<c;D++)N[B++]=y[D][H];return N}function Vc(t,e,r,n){var s;if(Uc(t))s=br.fromArray(t);else if(typeof t=="string"){var i=e;if(!i){var c=br.rawSplit(t);i=Nt.getBestVersionForData(c,r)}s=br.fromString(t,i||40)}else throw new Error("Invalid data");var h=Nt.getBestVersionForData(s,r);if(!h)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=h;else if(e<h)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+h+`.
`);var d=zc(e,r,s),w=Vt.getSymbolSize(e),v=new Oc(w);return Dc(v,e),Hc(v),Fc(v,e),Mr(v,r,0),e>=7&&$c(v,e),Wc(v,d),isNaN(n)&&(n=Br.getBestMask(v,Mr.bind(null,v,r))),Br.applyMask(n,v),Mr(v,r,n),{modules:v,version:e,errorCorrectionLevel:r,maskPattern:n,segments:s}}fo.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");var n=yr.M,s,i;return typeof r<"u"&&(n=yr.from(r.errorCorrectionLevel,yr.M),s=Nt.from(r.version),i=Br.from(r.maskPattern),r.toSJISFunc&&Vt.setToSJISFunction(r.toSJISFunc)),Vc(e,s,n,i)};var Io={},sn={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");var n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");var s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});var s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,c=n.scale||4;return{width:i,scale:i?4:c,margin:s,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},t.getImageWidth=function(n,s){var i=t.getScale(n,s);return Math.floor((n+s.margin*2)*i)},t.qrToImageData=function(n,s,i){for(var c=s.modules.size,h=s.modules.data,d=t.getScale(c,i),w=Math.floor((c+i.margin*2)*d),v=i.margin*d,S=[i.color.light,i.color.dark],k=0;k<w;k++)for(var I=0;I<w;I++){var T=(k*w+I)*4,A=i.color.light;if(k>=v&&I>=v&&k<w-v&&I<w-v){var y=Math.floor((k-v)/d),M=Math.floor((I-v)/d);A=S[h[y*c+M]?1:0]}n[T++]=A.r,n[T++]=A.g,n[T++]=A.b,n[T]=A.a}}})(sn);(function(t){var e=sn;function r(s,i,c){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=c,i.width=c,i.style.height=c+"px",i.style.width=c+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,c,h){var d=h,w=c;typeof d>"u"&&(!c||!c.getContext)&&(d=c,c=void 0),c||(w=n()),d=e.getOptions(d);var v=e.getImageWidth(i.modules.size,d),S=w.getContext("2d"),k=S.createImageData(v,v);return e.qrToImageData(k.data,i,d),r(S,w,v),S.putImageData(k,0,0),w},t.renderToDataURL=function(i,c,h){var d=h;typeof d>"u"&&(!c||!c.getContext)&&(d=c,c=void 0),d||(d={});var w=t.render(i,c,d),v=d.type||"image/png",S=d.rendererOpts||{};return w.toDataURL(v,S.quality)}})(Io);var Ao={},Jc=sn;function ei(t,e){var r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Er(t,e,r){var n=t+e;return typeof r<"u"&&(n+=" "+r),n}function Kc(t,e,r){for(var n="",s=0,i=!1,c=0,h=0;h<t.length;h++){var d=Math.floor(h%e),w=Math.floor(h/e);!d&&!i&&(i=!0),t[h]?(c++,h>0&&d>0&&t[h-1]||(n+=i?Er("M",d+r,.5+w+r):Er("m",s,0),s=0,i=!1),d+1<e&&t[h+1]||(n+=Er("h",c),c=0)):s++}return n}Ao.render=function(e,r,n){var s=Jc.getOptions(r),i=e.modules.size,c=e.modules.data,h=i+s.margin*2,d=s.color.light.a?"<path "+ei(s.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",w="<path "+ei(s.color.dark,"stroke")+' d="'+Kc(c,i,s.margin)+'"/>',v='viewBox="0 0 '+h+" "+h+'"',S=s.width?'width="'+s.width+'" height="'+s.width+'" ':"",k='<svg xmlns="http://www.w3.org/2000/svg" '+S+v+' shape-rendering="crispEdges">'+d+w+`</svg>
`;return typeof n=="function"&&n(null,k),k};var Qc=Yl,Pr=fo,Oo=Io,Gc=Ao;function an(t,e,r,n,s){var i=[].slice.call(arguments,1),c=i.length,h=typeof i[c-1]=="function";if(!h&&!Qc())throw new Error("Callback required as last argument");if(h){if(c<2)throw new Error("Too few arguments provided");c===2?(s=r,r=e,e=n=void 0):c===3&&(e.getContext&&typeof s>"u"?(s=n,n=void 0):(s=n,n=r,r=e,e=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(r=e,e=n=void 0):c===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(w,v){try{var S=Pr.create(r,n);w(t(S,e,n))}catch(k){v(k)}})}try{var d=Pr.create(r,n);s(null,t(d,e,n))}catch(w){s(w)}}wt.create=Pr.create;wt.toCanvas=an.bind(null,Oo.render);wt.toDataURL=an.bind(null,Oo.renderToDataURL);wt.toString=an.bind(null,function(t,e,r){return Gc.render(t,r)});var Yc=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,r=[],n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||r.forEach(function(s){t.addRange(s)}),e&&e.focus()}},Xc=Yc,ti={"text/plain":"Text","text/html":"Url",default:"Text"},Zc="Copy to clipboard: #{key}, Enter";function eu(t){var e=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function tu(t,e){var r,n,s,i,c,h,d=!1;e||(e={}),r=e.debug||!1;try{s=Xc(),i=document.createRange(),c=document.getSelection(),h=document.createElement("span"),h.textContent=t,h.ariaHidden="true",h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",function(v){if(v.stopPropagation(),e.format)if(v.preventDefault(),typeof v.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var S=ti[e.format]||ti.default;window.clipboardData.setData(S,t)}else v.clipboardData.clearData(),v.clipboardData.setData(e.format,t);e.onCopy&&(v.preventDefault(),e.onCopy(v.clipboardData))}),document.body.appendChild(h),i.selectNodeContents(h),c.addRange(i);var w=document.execCommand("copy");if(!w)throw new Error("copy command was unsuccessful");d=!0}catch(v){r&&console.error("unable to copy using execCommand: ",v),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),d=!0}catch(S){r&&console.error("unable to copy using clipboardData: ",S),r&&console.error("falling back to prompt"),n=eu("message"in e?e.message:Zc),window.prompt(n,t)}}finally{c&&(typeof c.removeRange=="function"?c.removeRange(i):c.removeAllRanges()),h&&document.body.removeChild(h),s()}return d}var ru=tu,U,dt,ln,No,ri,cn,Bo,Ue={},Jt=[],nu=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function qe(t,e){for(var r in e)t[r]=e[r];return t}function Lo(t){var e=t.parentNode;e&&e.removeChild(t)}function De(t,e,r){var n,s=arguments,i={};for(n in e)n!=="key"&&n!=="ref"&&(i[n]=e[n]);if(arguments.length>3)for(r=[r],n=3;n<arguments.length;n++)r.push(s[n]);if(r!=null&&(i.children=r),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)i[n]===void 0&&(i[n]=t.defaultProps[n]);return Bt(t,i,e&&e.key,e&&e.ref,null)}function Bt(t,e,r,n,s){var i={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s};return s==null&&(i.__v=i),U.vnode&&U.vnode(i),i}function Po(){return{}}function bt(t){return t.children}function Ne(t,e){this.props=t,this.context=e}function gt(t,e){if(e==null)return t.__?gt(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?gt(t):null}function qo(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return qo(t)}}function kt(t){(!t.__d&&(t.__d=!0)&&dt.push(t)&&!ln++||ri!==U.debounceRendering)&&((ri=U.debounceRendering)||No)(iu)}function iu(){for(var t;ln=dt.length;)t=dt.sort(function(e,r){return e.__v.__b-r.__v.__b}),dt=[],t.some(function(e){var r,n,s,i,c,h,d;e.__d&&(h=(c=(r=e).__v).__e,(d=r.__P)&&(n=[],(s=qe({},c)).__v=s,i=un(d,c,s,r.__n,d.ownerSVGElement!==void 0,null,n,h??gt(c)),Do(n,c),i!=h&&qo(c)))})}function Uo(t,e,r,n,s,i,c,h,d){var w,v,S,k,I,T,A,y=r&&r.__k||Jt,M=y.length;if(h==Ue&&(h=i!=null?i[0]:M?gt(r,0):null),w=0,e.__k=$e(e.__k,function(C){if(C!=null){if(C.__=e,C.__b=e.__b+1,(S=y[w])===null||S&&C.key==S.key&&C.type===S.type)y[w]=void 0;else for(v=0;v<M;v++){if((S=y[v])&&C.key==S.key&&C.type===S.type){y[v]=void 0;break}S=null}if(k=un(t,C,S=S||Ue,n,s,i,c,h,d),(v=C.ref)&&S.ref!=v&&(A||(A=[]),S.ref&&A.push(S.ref,null,C),A.push(v,C.__c||k,C)),k!=null){var E;if(T==null&&(T=k),C.__d!==void 0)E=C.__d,C.__d=void 0;else if(i==S||k!=h||k.parentNode==null){e:if(h==null||h.parentNode!==t)t.appendChild(k),E=null;else{for(I=h,v=0;(I=I.nextSibling)&&v<M;v+=2)if(I==k)break e;t.insertBefore(k,h),E=h}e.type=="option"&&(t.value="")}h=E!==void 0?E:k.nextSibling,typeof e.type=="function"&&(e.__d=h)}else h&&S.__e==h&&h.parentNode!=t&&(h=gt(S))}return w++,C}),e.__e=T,i!=null&&typeof e.type!="function")for(w=i.length;w--;)i[w]!=null&&Lo(i[w]);for(w=M;w--;)y[w]!=null&&pt(y[w],y[w]);if(A)for(w=0;w<A.length;w++)Ho(A[w],A[++w],A[++w])}function $e(t,e,r){if(r==null&&(r=[]),t==null||typeof t=="boolean")e&&r.push(e(null));else if(Array.isArray(t))for(var n=0;n<t.length;n++)$e(t[n],e,r);else r.push(e?e(typeof t=="string"||typeof t=="number"?Bt(null,t,null,null,t):t.__e!=null||t.__c!=null?Bt(t.type,t.props,t.key,null,t.__v):t):t);return r}function ou(t,e,r,n,s){var i;for(i in r)i==="children"||i==="key"||i in e||Lt(t,i,null,r[i],n);for(i in e)s&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||r[i]===e[i]||Lt(t,i,e[i],r[i],n)}function ni(t,e,r){e[0]==="-"?t.setProperty(e,r):t[e]=typeof r=="number"&&nu.test(e)===!1?r+"px":r??""}function Lt(t,e,r,n,s){var i,c,h,d,w;if(s?e==="className"&&(e="class"):e==="class"&&(e="className"),e==="style")if(i=t.style,typeof r=="string")i.cssText=r;else{if(typeof n=="string"&&(i.cssText="",n=null),n)for(d in n)r&&d in r||ni(i,d,"");if(r)for(w in r)n&&r[w]===n[w]||ni(i,w,r[w])}else e[0]==="o"&&e[1]==="n"?(c=e!==(e=e.replace(/Capture$/,"")),h=e.toLowerCase(),e=(h in t?h:e).slice(2),r?(n||t.addEventListener(e,ii,c),(t.l||(t.l={}))[e]=r):t.removeEventListener(e,ii,c)):e!=="list"&&e!=="tagName"&&e!=="form"&&e!=="type"&&e!=="size"&&!s&&e in t?t[e]=r??"":typeof r!="function"&&e!=="dangerouslySetInnerHTML"&&(e!==(e=e.replace(/^xlink:?/,""))?r==null||r===!1?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):r==null||r===!1&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,r))}function ii(t){this.l[t.type](U.event?U.event(t):t)}function un(t,e,r,n,s,i,c,h,d){var w,v,S,k,I,T,A,y,M,C,E=e.type;if(e.constructor!==void 0)return null;(w=U.__b)&&w(e);try{e:if(typeof E=="function"){if(y=e.props,M=(w=E.contextType)&&n[w.__c],C=w?M?M.props.value:w.__:n,r.__c?A=(v=e.__c=r.__c).__=v.__E:("prototype"in E&&E.prototype.render?e.__c=v=new E(y,C):(e.__c=v=new Ne(y,C),v.constructor=E,v.render=au),M&&M.sub(v),v.props=y,v.state||(v.state={}),v.context=C,v.__n=n,S=v.__d=!0,v.__h=[]),v.__s==null&&(v.__s=v.state),E.getDerivedStateFromProps!=null&&(v.__s==v.state&&(v.__s=qe({},v.__s)),qe(v.__s,E.getDerivedStateFromProps(y,v.__s))),k=v.props,I=v.state,S)E.getDerivedStateFromProps==null&&v.componentWillMount!=null&&v.componentWillMount(),v.componentDidMount!=null&&v.__h.push(v.componentDidMount);else{if(E.getDerivedStateFromProps==null&&y!==k&&v.componentWillReceiveProps!=null&&v.componentWillReceiveProps(y,C),!v.__e&&v.shouldComponentUpdate!=null&&v.shouldComponentUpdate(y,v.__s,C)===!1||e.__v===r.__v&&!v.__){for(v.props=y,v.state=v.__s,e.__v!==r.__v&&(v.__d=!1),v.__v=e,e.__e=r.__e,e.__k=r.__k,v.__h.length&&c.push(v),w=0;w<e.__k.length;w++)e.__k[w]&&(e.__k[w].__=e);break e}v.componentWillUpdate!=null&&v.componentWillUpdate(y,v.__s,C),v.componentDidUpdate!=null&&v.__h.push(function(){v.componentDidUpdate(k,I,T)})}v.context=C,v.props=y,v.state=v.__s,(w=U.__r)&&w(e),v.__d=!1,v.__v=e,v.__P=t,w=v.render(v.props,v.state,v.context),e.__k=w!=null&&w.type==bt&&w.key==null?w.props.children:Array.isArray(w)?w:[w],v.getChildContext!=null&&(n=qe(qe({},n),v.getChildContext())),S||v.getSnapshotBeforeUpdate==null||(T=v.getSnapshotBeforeUpdate(k,I)),Uo(t,e,r,n,s,i,c,h,d),v.base=e.__e,v.__h.length&&c.push(v),A&&(v.__E=v.__=null),v.__e=!1}else i==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=su(r.__e,e,r,n,s,i,c,d);(w=U.diffed)&&w(e)}catch(R){e.__v=null,U.__e(R,e,r)}return e.__e}function Do(t,e){U.__c&&U.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(n){n.call(r)})}catch(n){U.__e(n,r.__v)}})}function su(t,e,r,n,s,i,c,h){var d,w,v,S,k,I=r.props,T=e.props;if(s=e.type==="svg"||s,i!=null){for(d=0;d<i.length;d++)if((w=i[d])!=null&&((e.type===null?w.nodeType===3:w.localName===e.type)||t==w)){t=w,i[d]=null;break}}if(t==null){if(e.type===null)return document.createTextNode(T);t=s?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,T.is&&{is:T.is}),i=null,h=!1}if(e.type===null)I!==T&&t.data!=T&&(t.data=T);else{if(i!=null&&(i=Jt.slice.call(t.childNodes)),v=(I=r.props||Ue).dangerouslySetInnerHTML,S=T.dangerouslySetInnerHTML,!h){if(I===Ue)for(I={},k=0;k<t.attributes.length;k++)I[t.attributes[k].name]=t.attributes[k].value;(S||v)&&(S&&v&&S.__html==v.__html||(t.innerHTML=S&&S.__html||""))}ou(t,T,I,s,h),S?e.__k=[]:(e.__k=e.props.children,Uo(t,e,r,n,e.type!=="foreignObject"&&s,i,c,Ue,h)),h||("value"in T&&(d=T.value)!==void 0&&d!==t.value&&Lt(t,"value",d,I.value,!1),"checked"in T&&(d=T.checked)!==void 0&&d!==t.checked&&Lt(t,"checked",d,I.checked,!1))}return t}function Ho(t,e,r){try{typeof t=="function"?t(e):t.current=e}catch(n){U.__e(n,r)}}function pt(t,e,r){var n,s,i;if(U.unmount&&U.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||Ho(n,null,e)),r||typeof t.type=="function"||(r=(s=t.__e)!=null),t.__e=t.__d=void 0,(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(c){U.__e(c,e)}n.base=n.__P=null}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&pt(n[i],e,r);s!=null&&Lo(s)}function au(t,e,r){return this.constructor(t,r)}function vt(t,e,r){var n,s,i;U.__&&U.__(t,e),s=(n=r===cn)?null:r&&r.__k||e.__k,t=De(bt,null,[t]),i=[],un(e,(n?e:r||e).__k=t,s||Ue,Ue,e.ownerSVGElement!==void 0,r&&!n?[r]:s?null:Jt.slice.call(e.childNodes),i,r||Ue,n),Do(i,t)}function Fo(t,e){vt(t,e,cn)}function lu(t,e){var r,n;for(n in e=qe(qe({},t.props),e),arguments.length>2&&(e.children=Jt.slice.call(arguments,2)),r={},e)n!=="key"&&n!=="ref"&&(r[n]=e[n]);return Bt(t.type,r,e.key||t.key,e.ref||t.ref,null)}function $o(t){var e={},r={__c:"__cC"+Bo++,__:t,Consumer:function(n,s){return n.children(s)},Provider:function(n){var s,i=this;return this.getChildContext||(s=[],this.getChildContext=function(){return e[r.__c]=i,e},this.shouldComponentUpdate=function(c){i.props.value!==c.value&&s.some(function(h){h.context=c.value,kt(h)})},this.sub=function(c){s.push(c);var h=c.componentWillUnmount;c.componentWillUnmount=function(){s.splice(s.indexOf(c),1),h&&h.call(c)}}),n.children}};return r.Consumer.contextType=r,r.Provider.__=r,r}U={__e:function(t,e){for(var r,n;e=e.__;)if((r=e.__c)&&!r.__)try{if(r.constructor&&r.constructor.getDerivedStateFromError!=null&&(n=!0,r.setState(r.constructor.getDerivedStateFromError(t))),r.componentDidCatch!=null&&(n=!0,r.componentDidCatch(t)),n)return kt(r.__E=r)}catch(s){t=s}throw t}},Ne.prototype.setState=function(t,e){var r;r=this.__s!==this.state?this.__s:this.__s=qe({},this.state),typeof t=="function"&&(t=t(r,this.props)),t&&qe(r,t),t!=null&&this.__v&&(e&&this.__h.push(e),kt(this))},Ne.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),kt(this))},Ne.prototype.render=bt,dt=[],ln=0,No=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,cn=Ue,Bo=0;var Qe,Ae,oi,ot=0,qr=[],si=U.__r,ai=U.diffed,li=U.__c,ci=U.unmount;function ct(t,e){U.__h&&U.__h(Ae,t,ot||e),ot=0;var r=Ae.__H||(Ae.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function hn(t){return ot=1,fn(Qo,t)}function fn(t,e,r){var n=ct(Qe++,2);return n.__c||(n.__c=Ae,n.__=[r?r(e):Qo(void 0,e),function(s){var i=t(n.__[0],s);n.__[0]!==i&&(n.__[0]=i,n.__c.setState({}))}]),n.__}function Wo(t,e){var r=ct(Qe++,3);!U.__s&&pn(r.__H,e)&&(r.__=t,r.__H=e,Ae.__H.__h.push(r))}function dn(t,e){var r=ct(Qe++,4);!U.__s&&pn(r.__H,e)&&(r.__=t,r.__H=e,Ae.__h.push(r))}function zo(t){return ot=5,Kt(function(){return{current:t}},[])}function jo(t,e,r){ot=6,dn(function(){typeof t=="function"?t(e()):t&&(t.current=e())},r==null?r:r.concat(t))}function Kt(t,e){var r=ct(Qe++,7);return pn(r.__H,e)?(r.__H=e,r.__h=t,r.__=t()):r.__}function Vo(t,e){return ot=8,Kt(function(){return t},e)}function Jo(t){var e=Ae.context[t.__c],r=ct(Qe++,9);return r.__c=t,e?(r.__==null&&(r.__=!0,e.sub(Ae)),e.props.value):t.__}function Ko(t,e){U.useDebugValue&&U.useDebugValue(e?e(t):t)}function cu(t){var e=ct(Qe++,10),r=hn();return e.__=t,Ae.componentDidCatch||(Ae.componentDidCatch=function(n){e.__&&e.__(n),r[1](n)}),[r[0],function(){r[1](void 0)}]}function uu(){qr.some(function(t){if(t.__P)try{t.__H.__h.forEach(Ur),t.__H.__h.forEach(Dr),t.__H.__h=[]}catch(e){return t.__H.__h=[],U.__e(e,t.__v),!0}}),qr=[]}function Ur(t){t.t&&t.t()}function Dr(t){var e=t.__();typeof e=="function"&&(t.t=e)}function pn(t,e){return!t||e.some(function(r,n){return r!==t[n]})}function Qo(t,e){return typeof e=="function"?e(t):e}U.__r=function(t){si&&si(t),Qe=0,(Ae=t.__c).__H&&(Ae.__H.__h.forEach(Ur),Ae.__H.__h.forEach(Dr),Ae.__H.__h=[])},U.diffed=function(t){ai&&ai(t);var e=t.__c;if(e){var r=e.__H;r&&r.__h.length&&(qr.push(e)!==1&&oi===U.requestAnimationFrame||((oi=U.requestAnimationFrame)||function(n){var s,i=function(){clearTimeout(c),cancelAnimationFrame(s),setTimeout(n)},c=setTimeout(i,100);typeof window<"u"&&(s=requestAnimationFrame(i))})(uu))}},U.__c=function(t,e){e.some(function(r){try{r.__h.forEach(Ur),r.__h=r.__h.filter(function(n){return!n.__||Dr(n)})}catch(n){e.some(function(s){s.__h&&(s.__h=[])}),e=[],U.__e(n,r.__v)}}),li&&li(t,e)},U.unmount=function(t){ci&&ci(t);var e=t.__c;if(e){var r=e.__H;if(r)try{r.__.forEach(function(n){return n.t&&n.t()})}catch(n){U.__e(n,e.__v)}}};function _n(t,e){for(var r in e)t[r]=e[r];return t}function Hr(t,e){for(var r in t)if(r!=="__source"&&!(r in e))return!0;for(var n in e)if(n!=="__source"&&t[n]!==e[n])return!0;return!1}var Go=function(t){var e,r;function n(s){var i;return(i=t.call(this,s)||this).isPureReactComponent=!0,i}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.prototype.shouldComponentUpdate=function(s,i){return Hr(this.props,s)||Hr(this.state,i)},n}(Ne);function Yo(t,e){function r(s){var i=this.props.ref,c=i==s.ref;return!c&&i&&(i.call?i(null):i.current=null),e?!e(this.props,s)||!c:Hr(this.props,s)}function n(s){return this.shouldComponentUpdate=r,De(t,_n({},s))}return n.prototype.isReactComponent=!0,n.displayName="Memo("+(t.displayName||t.name)+")",n.t=!0,n}var ui=U.__b;function Xo(t){function e(r){var n=_n({},r);return delete n.ref,t(n,r.ref)}return e.prototype.isReactComponent=e.t=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}U.__b=function(t){t.type&&t.type.t&&t.ref&&(t.props.ref=t.ref,t.ref=null),ui&&ui(t)};var hi=function(t,e){return t?$e(t).reduce(function(r,n,s){return r.concat(e(n,s))},[]):null},Zo={map:hi,forEach:hi,count:function(t){return t?$e(t).length:0},only:function(t){if((t=$e(t)).length!==1)throw new Error("Children.only() expects only one child.");return t[0]},toArray:$e},hu=U.__e;function es(t){return t&&((t=_n({},t)).__c=null,t.__k=t.__k&&t.__k.map(es)),t}function Pt(){this.__u=0,this.o=null,this.__b=null}function ts(t){var e=t.__.__c;return e&&e.u&&e.u(t)}function rs(t){var e,r,n;function s(i){if(e||(e=t()).then(function(c){r=c.default||c},function(c){n=c}),n)throw n;if(!r)throw e;return De(r,i)}return s.displayName="Lazy",s.t=!0,s}function Ge(){this.i=null,this.l=null}U.__e=function(t,e,r){if(t.then){for(var n,s=e;s=s.__;)if((n=s.__c)&&n.__c)return n.__c(t,e.__c)}hu(t,e,r)},(Pt.prototype=new Ne).__c=function(t,e){var r=this;r.o==null&&(r.o=[]),r.o.push(e);var n=ts(r.__v),s=!1,i=function(){s||(s=!0,n?n(c):c())};e.__c=e.componentWillUnmount,e.componentWillUnmount=function(){i(),e.__c&&e.__c()};var c=function(){var h;if(!--r.__u)for(r.__v.__k[0]=r.state.u,r.setState({u:r.__b=null});h=r.o.pop();)h.forceUpdate()};r.__u++||r.setState({u:r.__b=r.__v.__k[0]}),t.then(i,i)},Pt.prototype.render=function(t,e){return this.__b&&(this.__v.__k[0]=es(this.__b),this.__b=null),[De(Ne,null,e.u?null:t.children),e.u&&t.fallback]};var fi=function(t,e,r){if(++r[1]===r[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(r=t.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.i=r=r[2]}};(Ge.prototype=new Ne).u=function(t){var e=this,r=ts(e.__v),n=e.l.get(t);return n[0]++,function(s){var i=function(){e.props.revealOrder?(n.push(s),fi(e,t,n)):s()};r?r(i):i()}},Ge.prototype.render=function(t){this.i=null,this.l=new Map;var e=$e(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var r=e.length;r--;)this.l.set(e[r],this.i=[1,0,this.i]);return t.children},Ge.prototype.componentDidUpdate=Ge.prototype.componentDidMount=function(){var t=this;t.l.forEach(function(e,r){fi(t,r,e)})};var fu=function(){function t(){}var e=t.prototype;return e.getChildContext=function(){return this.props.context},e.render=function(r){return r.children},t}();function du(t){var e=this,r=t.container,n=De(fu,{context:e.context},t.vnode);return e.s&&e.s!==r&&(e.v.parentNode&&e.s.removeChild(e.v),pt(e.h),e.p=!1),t.vnode?e.p?(r.__k=e.__k,vt(n,r),e.__k=r.__k):(e.v=document.createTextNode(""),Fo("",r),r.appendChild(e.v),e.p=!0,e.s=r,vt(n,r,e.v),e.__k=e.v.__k):e.p&&(e.v.parentNode&&e.s.removeChild(e.v),pt(e.h)),e.h=n,e.componentWillUnmount=function(){e.v.parentNode&&e.s.removeChild(e.v),pt(e.h)},null}function ns(t,e){return De(du,{vnode:t,container:e})}var di=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;Ne.prototype.isReactComponent={};var is=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103;function Fr(t,e,r){if(e.__k==null)for(;e.firstChild;)e.removeChild(e.firstChild);return vt(t,e),typeof r=="function"&&r(),t?t.__c:null}function pu(t,e,r){return Fo(t,e),typeof r=="function"&&r(),t?t.__c:null}var pi=U.event;function xr(t,e){t["UNSAFE_"+e]&&!t[e]&&Object.defineProperty(t,e,{configurable:!1,get:function(){return this["UNSAFE_"+e]},set:function(r){this["UNSAFE_"+e]=r}})}U.event=function(t){pi&&(t=pi(t)),t.persist=function(){};var e=!1,r=!1,n=t.stopPropagation;t.stopPropagation=function(){n.call(t),e=!0};var s=t.preventDefault;return t.preventDefault=function(){s.call(t),r=!0},t.isPropagationStopped=function(){return e},t.isDefaultPrevented=function(){return r},t.nativeEvent=t};var _i={configurable:!0,get:function(){return this.class}},gi=U.vnode;U.vnode=function(t){t.$$typeof=is;var e=t.type,r=t.props;if(e){if(r.class!=r.className&&(_i.enumerable="className"in r,r.className!=null&&(r.class=r.className),Object.defineProperty(r,"className",_i)),typeof e!="function"){var n,s,i;for(i in r.defaultValue&&r.value!==void 0&&(r.value||r.value===0||(r.value=r.defaultValue),delete r.defaultValue),Array.isArray(r.value)&&r.multiple&&e==="select"&&($e(r.children).forEach(function(c){r.value.indexOf(c.props.value)!=-1&&(c.props.selected=!0)}),delete r.value),r)if(n=di.test(i))break;if(n)for(i in s=t.props={},r)s[di.test(i)?i.replace(/[A-Z0-9]/,"-$&").toLowerCase():i]=r[i]}(function(c){var h=t.type,d=t.props;if(d&&typeof h=="string"){var w={};for(var v in d)/^on(Ani|Tra|Tou)/.test(v)&&(d[v.toLowerCase()]=d[v],delete d[v]),w[v.toLowerCase()]=v;if(w.ondoubleclick&&(d.ondblclick=d[w.ondoubleclick],delete d[w.ondoubleclick]),w.onbeforeinput&&(d.onbeforeinput=d[w.onbeforeinput],delete d[w.onbeforeinput]),w.onchange&&(h==="textarea"||h.toLowerCase()==="input"&&!/^fil|che|ra/i.test(d.type))){var S=w.oninput||"oninput";d[S]||(d[S]=d[w.onchange],delete d[w.onchange])}}})(),typeof e=="function"&&!e.m&&e.prototype&&(xr(e.prototype,"componentWillMount"),xr(e.prototype,"componentWillReceiveProps"),xr(e.prototype,"componentWillUpdate"),e.m=!0)}gi&&gi(t)};var _u="16.8.0";function os(t){return De.bind(null,t)}function gn(t){return!!t&&t.$$typeof===is}function ss(t){return gn(t)?lu.apply(null,arguments):t}function as(t){return!!t.__k&&(vt(null,t),!0)}function ls(t){return t&&(t.base||t.nodeType===1&&t)||null}var cs=function(t,e){return t(e)};const gu={useState:hn,useReducer:fn,useEffect:Wo,useLayoutEffect:dn,useRef:zo,useImperativeHandle:jo,useMemo:Kt,useCallback:Vo,useContext:Jo,useDebugValue:Ko,version:"16.8.0",Children:Zo,render:Fr,hydrate:Fr,unmountComponentAtNode:as,createPortal:ns,createElement:De,createContext:$o,createFactory:os,cloneElement:ss,createRef:Po,Fragment:bt,isValidElement:gn,findDOMNode:ls,Component:Ne,PureComponent:Go,memo:Yo,forwardRef:Xo,unstable_batchedUpdates:cs,Suspense:Pt,SuspenseList:Ge,lazy:rs},vu=Object.freeze(Object.defineProperty({__proto__:null,Children:Zo,Component:Ne,Fragment:bt,PureComponent:Go,Suspense:Pt,SuspenseList:Ge,cloneElement:ss,createContext:$o,createElement:De,createFactory:os,createPortal:ns,createRef:Po,default:gu,findDOMNode:ls,forwardRef:Xo,hydrate:pu,isValidElement:gn,lazy:rs,memo:Yo,render:Fr,unmountComponentAtNode:as,unstable_batchedUpdates:cs,useCallback:Vo,useContext:Jo,useDebugValue:Ko,useEffect:Wo,useErrorBoundary:cu,useImperativeHandle:jo,useLayoutEffect:dn,useMemo:Kt,useReducer:fn,useRef:zo,useState:hn,version:_u},Symbol.toStringTag,{value:"Module"})),mu=Wr(vu);function us(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var Te=Gl,hs=us(wt),wu=us(ru),O=mu;function yu(t){hs.toString(t,{type:"terminal"}).then(console.log)}var bu=`:root {
  --animation-duration: 300ms;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

#walletconnect-wrapper {
  -webkit-user-select: none;
  align-items: center;
  display: flex;
  height: 100%;
  justify-content: center;
  left: 0;
  pointer-events: none;
  position: fixed;
  top: 0;
  user-select: none;
  width: 100%;
  z-index: 99999999999999;
}

.walletconnect-modal__headerLogo {
  height: 21px;
}

.walletconnect-modal__header p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
  align-items: flex-start;
  display: flex;
  flex: 1;
  margin-left: 5px;
}

.walletconnect-modal__close__wrapper {
  position: absolute;
  top: 0px;
  right: 0px;
  z-index: 10000;
  background: white;
  border-radius: 26px;
  padding: 6px;
  box-sizing: border-box;
  width: 26px;
  height: 26px;
  cursor: pointer;
}

.walletconnect-modal__close__icon {
  position: relative;
  top: 7px;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
}

.walletconnect-modal__close__line1 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
}

.walletconnect-modal__close__line2 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
  transform: rotate(90deg);
}

.walletconnect-qrcode__base {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  background: rgba(37, 41, 46, 0.95);
  height: 100%;
  left: 0;
  pointer-events: auto;
  position: fixed;
  top: 0;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  width: 100%;
  will-change: opacity;
  padding: 40px;
  box-sizing: border-box;
}

.walletconnect-qrcode__text {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 10px 0 20px 0;
  text-align: center;
  width: 100%;
}

@media only screen and (max-width: 768px) {
  .walletconnect-qrcode__text {
    font-size: 4vw;
  }
}

@media only screen and (max-width: 320px) {
  .walletconnect-qrcode__text {
    font-size: 14px;
  }
}

.walletconnect-qrcode__image {
  width: calc(100% - 30px);
  box-sizing: border-box;
  cursor: none;
  margin: 0 auto;
}

.walletconnect-qrcode__notification {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  font-size: 16px;
  padding: 16px 20px;
  border-radius: 16px;
  text-align: center;
  transition: all 0.1s ease-in-out;
  background: white;
  color: black;
  margin-bottom: -60px;
  opacity: 0;
}

.walletconnect-qrcode__notification.notification__show {
  opacity: 1;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__header {
    height: 130px;
  }
  .walletconnect-modal__base {
    overflow: auto;
  }
}

@media only screen and (min-device-width: 415px) and (max-width: 768px) {
  #content {
    max-width: 768px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 375px) and (max-width: 415px) {
  #content {
    max-width: 414px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 320px) and (max-width: 375px) {
  #content {
    max-width: 375px;
    box-sizing: border-box;
  }
}

@media only screen and (max-width: 320px) {
  #content {
    max-width: 320px;
    box-sizing: border-box;
  }
}

.walletconnect-modal__base {
  -webkit-font-smoothing: antialiased;
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);
  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,
    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,
    "Open Sans", "Helvetica Neue", sans-serif;
  margin-top: 41px;
  padding: 24px 24px 22px;
  pointer-events: auto;
  position: relative;
  text-align: center;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  will-change: transform;
  overflow: visible;
  transform: translateY(-50%);
  top: 50%;
  max-width: 500px;
  margin: auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__base {
    padding: 24px 12px;
  }
}

.walletconnect-modal__base .hidden {
  transform: translateY(150%);
  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);
}

.walletconnect-modal__header {
  align-items: center;
  display: flex;
  height: 26px;
  left: 0;
  justify-content: space-between;
  position: absolute;
  top: -42px;
  width: 100%;
}

.walletconnect-modal__base .wc-logo {
  align-items: center;
  display: flex;
  height: 26px;
  margin-top: 15px;
  padding-bottom: 15px;
  pointer-events: auto;
}

.walletconnect-modal__base .wc-logo div {
  background-color: #3399ff;
  height: 21px;
  margin-right: 5px;
  mask-image: url("images/wc-logo.svg") center no-repeat;
  width: 32px;
}

.walletconnect-modal__base .wc-logo p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
}

.walletconnect-modal__base h2 {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 0 0 19px 0;
  text-align: center;
  width: 100%;
}

.walletconnect-modal__base__row {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  align-items: center;
  border-radius: 20px;
  cursor: pointer;
  display: flex;
  height: 56px;
  justify-content: space-between;
  padding: 0 15px;
  position: relative;
  margin: 0px 0px 8px;
  text-align: left;
  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: transform;
  text-decoration: none;
}

.walletconnect-modal__base__row:hover {
  background: rgba(60, 66, 82, 0.06);
}

.walletconnect-modal__base__row:active {
  background: rgba(60, 66, 82, 0.06);
  transform: scale(0.975);
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.walletconnect-modal__base__row__h3 {
  color: #25292e;
  font-size: 20px;
  font-weight: 700;
  margin: 0;
  padding-bottom: 3px;
}

.walletconnect-modal__base__row__right {
  align-items: center;
  display: flex;
  justify-content: center;
}

.walletconnect-modal__base__row__right__app-icon {
  border-radius: 8px;
  height: 34px;
  margin: 0 11px 2px 0;
  width: 34px;
  background-size: 100%;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-modal__base__row__right__caret {
  height: 18px;
  opacity: 0.3;
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  width: 8px;
  will-change: opacity;
}

.walletconnect-modal__base__row:hover .caret,
.walletconnect-modal__base__row:active .caret {
  opacity: 0.6;
}

.walletconnect-modal__mobile__toggle {
  width: 80%;
  display: flex;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  margin-bottom: 18px;
  background: #d4d5d9;
}

.walletconnect-modal__single_wallet {
  display: flex;
  justify-content: center;
  margin-top: 7px;
  margin-bottom: 18px;
}

.walletconnect-modal__single_wallet a {
  cursor: pointer;
  color: rgb(64, 153, 255);
  font-size: 21px;
  font-weight: 800;
  text-decoration: none !important;
  margin: 0 auto;
}

.walletconnect-modal__mobile__toggle_selector {
  width: calc(50% - 8px);
  background: white;
  position: absolute;
  border-radius: 5px;
  height: calc(100% - 8px);
  top: 4px;
  transition: all 0.2s ease-in-out;
  transform: translate3d(4px, 0, 0);
}

.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {
  transform: translate3d(calc(100% + 12px), 0, 0);
}

.walletconnect-modal__mobile__toggle a {
  font-size: 12px;
  width: 50%;
  text-align: center;
  padding: 8px;
  margin: 0;
  font-weight: 600;
  z-index: 1;
}

.walletconnect-modal__footer {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__footer {
    margin-top: 5vw;
  }
}

.walletconnect-modal__footer a {
  cursor: pointer;
  color: #898d97;
  font-size: 15px;
  margin: 0 auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__footer a {
    font-size: 14px;
  }
}

.walletconnect-connect__buttons__wrapper {
  max-height: 44vh;
}

.walletconnect-connect__buttons__wrapper__android {
  margin: 50% 0;
}

.walletconnect-connect__buttons__wrapper__wrap {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  margin: 10px 0;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__buttons__wrapper__wrap {
    margin-top: 40px;
  }
}

.walletconnect-connect__button {
  background-color: rgb(64, 153, 255);
  padding: 12px;
  border-radius: 8px;
  text-decoration: none;
  color: rgb(255, 255, 255);
  font-weight: 500;
}

.walletconnect-connect__button__icon_anchor {
  cursor: pointer;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin: 8px;
  width: 42px;
  justify-self: center;
  flex-direction: column;
  text-decoration: none !important;
}

@media only screen and (max-width: 320px) {
  .walletconnect-connect__button__icon_anchor {
    margin: 4px;
  }
}

.walletconnect-connect__button__icon {
  border-radius: 10px;
  height: 42px;
  margin: 0;
  width: 42px;
  background-size: cover !important;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-connect__button__text {
  color: #424952;
  font-size: 2.7vw;
  text-decoration: none !important;
  padding: 0;
  margin-top: 1.8vw;
  font-weight: 600;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__button__text {
    font-size: 16px;
    margin-top: 12px;
  }
}

.walletconnect-search__input {
  border: none;
  background: #d4d5d9;
  border-style: none;
  padding: 8px 16px;
  outline: none;
  font-style: normal;
  font-stretch: normal;
  font-size: 16px;
  font-style: normal;
  font-stretch: normal;
  line-height: normal;
  letter-spacing: normal;
  text-align: left;
  border-radius: 8px;
  width: calc(100% - 16px);
  margin: 0;
  margin-bottom: 8px;
}
`;typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function Mu(t,e){try{var r=t()}catch(n){return e(n)}return r&&r.then?r.then(void 0,e):r}var Eu="data:image/svg+xml,%3Csvg height='185' viewBox='0 0 300 185' width='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m61.4385429 36.2562612c48.9112241-47.8881663 128.2119871-47.8881663 177.1232091 0l5.886545 5.7634174c2.445561 2.3944081 2.445561 6.2765112 0 8.6709204l-20.136695 19.715503c-1.222781 1.1972051-3.2053 1.1972051-4.428081 0l-8.100584-7.9311479c-34.121692-33.4079817-89.443886-33.4079817-123.5655788 0l-8.6750562 8.4936051c-1.2227816 1.1972041-3.205301 1.1972041-4.4280806 0l-20.1366949-19.7155031c-2.4455612-2.3944092-2.4455612-6.2765122 0-8.6709204zm218.7677961 40.7737449 17.921697 17.546897c2.445549 2.3943969 2.445563 6.2764769.000031 8.6708899l-80.810171 79.121134c-2.445544 2.394426-6.410582 2.394453-8.85616.000062-.00001-.00001-.000022-.000022-.000032-.000032l-57.354143-56.154572c-.61139-.598602-1.60265-.598602-2.21404 0-.000004.000004-.000007.000008-.000011.000011l-57.3529212 56.154531c-2.4455368 2.394432-6.4105755 2.394472-8.8561612.000087-.0000143-.000014-.0000296-.000028-.0000449-.000044l-80.81241943-79.122185c-2.44556021-2.394408-2.44556021-6.2765115 0-8.6709197l17.92172963-17.5468673c2.4455602-2.3944082 6.4105989-2.3944082 8.8561602 0l57.3549775 56.155357c.6113908.598602 1.602649.598602 2.2140398 0 .0000092-.000009.0000174-.000017.0000265-.000024l57.3521031-56.155333c2.445505-2.3944633 6.410544-2.3945531 8.856161-.0002.000034.0000336.000068.0000673.000101.000101l57.354902 56.155432c.61139.598601 1.60265.598601 2.21404 0l57.353975-56.1543249c2.445561-2.3944092 6.410599-2.3944092 8.85616 0z' fill='%233b99fc'/%3E%3C/svg%3E",xu="WalletConnect",Su=300,Cu="rgb(64, 153, 255)",fs="walletconnect-wrapper",vi="walletconnect-style-sheet",ds="walletconnect-qrcode-modal",ku="walletconnect-qrcode-close",ps="walletconnect-qrcode-text",Ru="walletconnect-connect-button";function Tu(t){return O.createElement("div",{className:"walletconnect-modal__header"},O.createElement("img",{src:Eu,className:"walletconnect-modal__headerLogo"}),O.createElement("p",null,xu),O.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:t.onClose},O.createElement("div",{id:ku,className:"walletconnect-modal__close__icon"},O.createElement("div",{className:"walletconnect-modal__close__line1"}),O.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function Iu(t){return O.createElement("a",{className:"walletconnect-connect__button",href:t.href,id:Ru+"-"+t.name,onClick:t.onClick,rel:"noopener noreferrer",style:{backgroundColor:t.color},target:"_blank"},t.name)}var Au="data:image/svg+xml,%3Csvg fill='none' height='18' viewBox='0 0 8 18' width='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath clip-rule='evenodd' d='m.586301.213898c-.435947.33907-.5144813.967342-.175411 1.403292l4.87831 6.27212c.28087.36111.28087.86677 0 1.22788l-4.878311 6.27211c-.33907.436-.260536 1.0642.175412 1.4033.435949.3391 1.064219.2605 1.403289-.1754l4.87832-6.2721c.84259-1.08336.84259-2.60034 0-3.68367l-4.87832-6.27212c-.33907-.4359474-.96734-.514482-1.403289-.175412z' fill='%233c4252' fill-rule='evenodd'/%3E%3C/svg%3E";function Ou(t){var e=t.color,r=t.href,n=t.name,s=t.logo,i=t.onClick;return O.createElement("a",{className:"walletconnect-modal__base__row",href:r,onClick:i,rel:"noopener noreferrer",target:"_blank"},O.createElement("h3",{className:"walletconnect-modal__base__row__h3"},n),O.createElement("div",{className:"walletconnect-modal__base__row__right"},O.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+s+"') "+e,backgroundSize:"100%"}}),O.createElement("img",{src:Au,className:"walletconnect-modal__base__row__right__caret"})))}function Nu(t){var e=t.color,r=t.href,n=t.name,s=t.logo,i=t.onClick,c=window.innerWidth<768?(n.length>8?2.5:2.7)+"vw":"inherit";return O.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:r,onClick:i,rel:"noopener noreferrer",target:"_blank"},O.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+s+"') "+e,backgroundSize:"100%"}}),O.createElement("div",{style:{fontSize:c},className:"walletconnect-connect__button__text"},n))}var Bu=5,Sr=12;function Lu(t){var e=Te.isAndroid(),r=O.useState(""),n=r[0],s=r[1],i=O.useState(""),c=i[0],h=i[1],d=O.useState(1),w=d[0],v=d[1],S=c?t.links.filter(function(R){return R.name.toLowerCase().includes(c.toLowerCase())}):t.links,k=t.errorMessage,I=c||S.length>Bu,T=Math.ceil(S.length/Sr),A=[(w-1)*Sr+1,w*Sr],y=S.length?S.filter(function(R,N){return N+1>=A[0]&&N+1<=A[1]}):[],M=!e&&T>1,C=void 0;function E(R){s(R.target.value),clearTimeout(C),R.target.value?C=setTimeout(function(){h(R.target.value),v(1)},1e3):(s(""),h(""),v(1))}return O.createElement("div",null,O.createElement("p",{id:ps,className:"walletconnect-qrcode__text"},e?t.text.connect_mobile_wallet:t.text.choose_preferred_wallet),!e&&O.createElement("input",{className:"walletconnect-search__input",placeholder:"Search",value:n,onChange:E}),O.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(e?"__android":I&&S.length?"__wrap":"")},e?O.createElement(Iu,{name:t.text.connect,color:Cu,href:t.uri,onClick:O.useCallback(function(){Te.saveMobileLinkInfo({name:"Unknown",href:t.uri})},[])}):y.length?y.map(function(R){var N=R.color,B=R.name,H=R.shortName,D=R.logo,K=Te.formatIOSMobile(t.uri,R),m=O.useCallback(function(){Te.saveMobileLinkInfo({name:B,href:K})},[y]);return I?O.createElement(Nu,{color:N,href:K,name:H||B,logo:D,onClick:m}):O.createElement(Ou,{color:N,href:K,name:B,logo:D,onClick:m})}):O.createElement(O.Fragment,null,O.createElement("p",null,k.length?t.errorMessage:t.links.length&&!S.length?t.text.no_wallets_found:t.text.loading))),M&&O.createElement("div",{className:"walletconnect-modal__footer"},Array(T).fill(0).map(function(R,N){var B=N+1,H=w===B;return O.createElement("a",{style:{margin:"auto 10px",fontWeight:H?"bold":"normal"},onClick:function(){return v(B)}},B)})))}function Pu(t){var e=!!t.message.trim();return O.createElement("div",{className:"walletconnect-qrcode__notification"+(e?" notification__show":"")},t.message)}var qu=function(t){try{var e="";return Promise.resolve(hs.toString(t,{margin:0,type:"svg"})).then(function(r){return typeof r=="string"&&(e=r.replace("<svg",'<svg class="walletconnect-qrcode__image"')),e})}catch(r){return Promise.reject(r)}};function Uu(t){var e=O.useState(""),r=e[0],n=e[1],s=O.useState(""),i=s[0],c=s[1];O.useEffect(function(){try{return Promise.resolve(qu(t.uri)).then(function(d){c(d)})}catch(d){Promise.reject(d)}},[]);var h=function(){var d=wu(t.uri);d?(n(t.text.copied_to_clipboard),setInterval(function(){return n("")},1200)):(n("Error"),setInterval(function(){return n("")},1200))};return O.createElement("div",null,O.createElement("p",{id:ps,className:"walletconnect-qrcode__text"},t.text.scan_qrcode_with_wallet),O.createElement("div",{dangerouslySetInnerHTML:{__html:i}}),O.createElement("div",{className:"walletconnect-modal__footer"},O.createElement("a",{onClick:h},t.text.copy_to_clipboard)),O.createElement(Pu,{message:r}))}function Du(t){var e=Te.isAndroid(),r=Te.isMobile(),n=r?t.qrcodeModalOptions&&t.qrcodeModalOptions.mobileLinks?t.qrcodeModalOptions.mobileLinks:void 0:t.qrcodeModalOptions&&t.qrcodeModalOptions.desktopLinks?t.qrcodeModalOptions.desktopLinks:void 0,s=O.useState(!1),i=s[0],c=s[1],h=O.useState(!1),d=h[0],w=h[1],v=O.useState(!r),S=v[0],k=v[1],I={mobile:r,text:t.text,uri:t.uri,qrcodeModalOptions:t.qrcodeModalOptions},T=O.useState(""),A=T[0],y=T[1],M=O.useState(!1),C=M[0],E=M[1],R=O.useState([]),N=R[0],B=R[1],H=O.useState(""),D=H[0],K=H[1],m=function(){d||i||n&&!n.length||N.length>0||O.useEffect(function(){var l=function(){try{if(e)return Promise.resolve();c(!0);var u=Mu(function(){var f=t.qrcodeModalOptions&&t.qrcodeModalOptions.registryUrl?t.qrcodeModalOptions.registryUrl:Te.getWalletRegistryUrl();return Promise.resolve(fetch(f)).then(function(g){return Promise.resolve(g.json()).then(function(b){var x=b.listings,p=r?"mobile":"desktop",a=Te.getMobileLinkRegistry(Te.formatMobileRegistry(x,p),n);c(!1),w(!0),K(a.length?"":t.text.no_supported_wallets),B(a);var _=a.length===1;_&&(y(Te.formatIOSMobile(t.uri,a[0])),k(!0)),E(_)})})},function(f){c(!1),w(!0),K(t.text.something_went_wrong),console.error(f)});return Promise.resolve(u&&u.then?u.then(function(){}):void 0)}catch(f){return Promise.reject(f)}};l()})};m();var o=r?S:!S;return O.createElement("div",{id:ds,className:"walletconnect-qrcode__base animated fadeIn"},O.createElement("div",{className:"walletconnect-modal__base"},O.createElement(Tu,{onClose:t.onClose}),C&&S?O.createElement("div",{className:"walletconnect-modal__single_wallet"},O.createElement("a",{onClick:function(){return Te.saveMobileLinkInfo({name:N[0].name,href:A})},href:A,rel:"noopener noreferrer",target:"_blank"},t.text.connect_with+" "+(C?N[0].name:"")+" ")):e||i||!i&&N.length?O.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(o?" right__selected":"")},O.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),r?O.createElement(O.Fragment,null,O.createElement("a",{onClick:function(){return k(!1),m()}},t.text.mobile),O.createElement("a",{onClick:function(){return k(!0)}},t.text.qrcode)):O.createElement(O.Fragment,null,O.createElement("a",{onClick:function(){return k(!0)}},t.text.qrcode),O.createElement("a",{onClick:function(){return k(!1),m()}},t.text.desktop))):null,O.createElement("div",null,S||!e&&!i&&!N.length?O.createElement(Uu,Object.assign({},I)):O.createElement(Lu,Object.assign({},I,{links:N,errorMessage:D})))))}var Hu={choose_preferred_wallet:"Whle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine untersttzten Wallet",no_wallets_found:"keine Wallet gefunden"},Fu={choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet",no_wallets_found:"No wallets found"},$u={choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera mvil",scan_qrcode_with_wallet:"Escanea el cdigo QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"Cdigo QR",mobile:"Mvil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo sali mal",no_supported_wallets:"Todava no hay billeteras compatibles",no_wallets_found:"No se encontraron billeteras"},Wu={choose_preferred_wallet:"Choisissez votre portefeuille prfr",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copi!",connect_with:"Connectez-vous  l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourn",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge",no_wallets_found:"Aucun portefeuille trouv"},zu={choose_preferred_wallet:"  ",connect_mobile_wallet:"  ",scan_qrcode_with_wallet:"WalletConnect   QR ",connect:"",qrcode:"QR ",mobile:"",desktop:"",copy_to_clipboard:" ",copied_to_clipboard:" !",connect_with:" ",loading:" ...",something_went_wrong:" .",no_supported_wallets:"   ",no_wallets_found:"   "},ju={choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se  carteira mvel",scan_qrcode_with_wallet:"Ler o cdigo QR com uma carteira compatvel com WalletConnect",connect:"Conectar",qrcode:"Cdigo QR",mobile:"Mvel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda no h carteiras suportadas",no_wallets_found:"Nenhuma carteira encontrada"},Vu={choose_preferred_wallet:"",connect_mobile_wallet:"",scan_qrcode_with_wallet:" WalletConnect ",connect:"",qrcode:"",mobile:"",desktop:"",copy_to_clipboard:"",copied_to_clipboard:"",connect_with:"",loading:"...",something_went_wrong:"",no_supported_wallets:"",no_wallets_found:""},Ju={choose_preferred_wallet:"       ",connect_mobile_wallet:"     ",scan_qrcode_with_wallet:" QR        WalletConnect  ",connect:"",qrcode:" QR",mobile:"",desktop:"",copy_to_clipboard:"   ",copied_to_clipboard:"    !",connect_with:" ",loading:"...",something_went_wrong:"  ",no_supported_wallets:"        ",no_wallets_found:"    "},mi={de:Hu,en:Fu,es:$u,fr:Wu,ko:zu,pt:ju,zh:Vu,fa:Ju};function Ku(){var t=Te.getDocumentOrThrow(),e=t.getElementById(vi);e&&t.head.removeChild(e);var r=t.createElement("style");r.setAttribute("id",vi),r.innerText=bu,t.head.appendChild(r)}function Qu(){var t=Te.getDocumentOrThrow(),e=t.createElement("div");return e.setAttribute("id",fs),t.body.appendChild(e),e}function _s(){var t=Te.getDocumentOrThrow(),e=t.getElementById(ds);e&&(e.className=e.className.replace("fadeIn","fadeOut"),setTimeout(function(){var r=t.getElementById(fs);r&&t.body.removeChild(r)},Su))}function Gu(t){return function(){_s(),t&&t()}}function Yu(){var t=Te.getNavigatorOrThrow().language.split("-")[0]||"en";return mi[t]||mi.en}function Xu(t,e,r){Ku();var n=Qu();O.render(O.createElement(Du,{text:Yu(),uri:t,onClose:Gu(e),qrcodeModalOptions:r}),n)}function Zu(){_s()}var gs=function(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"};function eh(t,e,r){console.log(t),gs()?yu(t):Xu(t,e,r)}function th(){gs()||Zu()}var rh={open:eh,close:th},nh=rh;const ih=qt(nh);var vs={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,w,v){this.fn=d,this.context=w,this.once=v||!1}function i(d,w,v,S,k){if(typeof v!="function")throw new TypeError("The listener must be a function");var I=new s(v,S||d,k),T=r?r+w:w;return d._events[T]?d._events[T].fn?d._events[T]=[d._events[T],I]:d._events[T].push(I):(d._events[T]=I,d._eventsCount++),d}function c(d,w){--d._eventsCount===0?d._events=new n:delete d._events[w]}function h(){this._events=new n,this._eventsCount=0}h.prototype.eventNames=function(){var w=[],v,S;if(this._eventsCount===0)return w;for(S in v=this._events)e.call(v,S)&&w.push(r?S.slice(1):S);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(v)):w},h.prototype.listeners=function(w){var v=r?r+w:w,S=this._events[v];if(!S)return[];if(S.fn)return[S.fn];for(var k=0,I=S.length,T=new Array(I);k<I;k++)T[k]=S[k].fn;return T},h.prototype.listenerCount=function(w){var v=r?r+w:w,S=this._events[v];return S?S.fn?1:S.length:0},h.prototype.emit=function(w,v,S,k,I,T){var A=r?r+w:w;if(!this._events[A])return!1;var y=this._events[A],M=arguments.length,C,E;if(y.fn){switch(y.once&&this.removeListener(w,y.fn,void 0,!0),M){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,v),!0;case 3:return y.fn.call(y.context,v,S),!0;case 4:return y.fn.call(y.context,v,S,k),!0;case 5:return y.fn.call(y.context,v,S,k,I),!0;case 6:return y.fn.call(y.context,v,S,k,I,T),!0}for(E=1,C=new Array(M-1);E<M;E++)C[E-1]=arguments[E];y.fn.apply(y.context,C)}else{var R=y.length,N;for(E=0;E<R;E++)switch(y[E].once&&this.removeListener(w,y[E].fn,void 0,!0),M){case 1:y[E].fn.call(y[E].context);break;case 2:y[E].fn.call(y[E].context,v);break;case 3:y[E].fn.call(y[E].context,v,S);break;case 4:y[E].fn.call(y[E].context,v,S,k);break;default:if(!C)for(N=1,C=new Array(M-1);N<M;N++)C[N-1]=arguments[N];y[E].fn.apply(y[E].context,C)}}return!0},h.prototype.on=function(w,v,S){return i(this,w,v,S,!1)},h.prototype.once=function(w,v,S){return i(this,w,v,S,!0)},h.prototype.removeListener=function(w,v,S,k){var I=r?r+w:w;if(!this._events[I])return this;if(!v)return c(this,I),this;var T=this._events[I];if(T.fn)T.fn===v&&(!k||T.once)&&(!S||T.context===S)&&c(this,I);else{for(var A=0,y=[],M=T.length;A<M;A++)(T[A].fn!==v||k&&!T[A].once||S&&T[A].context!==S)&&y.push(T[A]);y.length?this._events[I]=y.length===1?y[0]:y:c(this,I)}return this},h.prototype.removeAllListeners=function(w){var v;return w?(v=r?r+w:w,this._events[v]&&c(this,v)):(this._events=new n,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=r,h.EventEmitter=h,t.exports=h})(vs);var oh=vs.exports;const sh=qt(oh);var ms={},vn={},mn={};Object.defineProperty(mn,"__esModule",{value:!0});var ah=function(){function t(e){this.type=e,this.bubbles=!1,this.cancelable=!1,this.loaded=0,this.lengthComputable=!1,this.total=0}return t}();mn.ProgressEvent=ah;var ut={},Qt=Ie&&Ie.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ut,"__esModule",{value:!0});var lh=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Error);ut.SecurityError=lh;var ch=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Error);ut.InvalidStateError=ch;var uh=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Error);ut.NetworkError=uh;var hh=function(t){Qt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Error);ut.SyntaxError=hh;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});var fh=function(){function t(){this.listeners={}}return t.prototype.addEventListener=function(e,r){e=e.toLowerCase(),this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(r.handleEvent||r)},t.prototype.removeEventListener=function(e,r){if(e=e.toLowerCase(),!!this.listeners[e]){var n=this.listeners[e].indexOf(r.handleEvent||r);n<0||this.listeners[e].splice(n,1)}},t.prototype.dispatchEvent=function(e){var r=e.type.toLowerCase();if(e.target=this,this.listeners[r])for(var n=0,s=this.listeners[r];n<s.length;n++){var i=s[n];i.call(this,e)}var c=this["on"+r];return c&&c.call(this,e),!0},t}();Mt.XMLHttpRequestEventTarget=fh;var wn={},dh=Ie&&Ie.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(wn,"__esModule",{value:!0});var ph=Mt,_h=function(t){dh(e,t);function e(){var r=t.call(this)||this;return r._contentType=null,r._body=null,r._reset(),r}return e.prototype._reset=function(){this._contentType=null,this._body=null},e.prototype._setData=function(r){if(r!=null)if(typeof r=="string")r.length!==0&&(this._contentType="text/plain;charset=UTF-8"),this._body=new Buffer(r,"utf-8");else if(Buffer.isBuffer(r))this._body=r;else if(r instanceof ArrayBuffer){for(var n=new Buffer(r.byteLength),s=new Uint8Array(r),i=0;i<r.byteLength;i++)n[i]=s[i];this._body=n}else if(r.buffer&&r.buffer instanceof ArrayBuffer){for(var n=new Buffer(r.byteLength),c=r.byteOffset,s=new Uint8Array(r.buffer),i=0;i<r.byteLength;i++)n[i]=s[i+c];this._body=n}else throw new Error("Unsupported send() data "+r)},e.prototype._finalizeHeaders=function(r,n){this._contentType&&!n["content-type"]&&(r["Content-Type"]=this._contentType),this._body&&(r["Content-Length"]=this._body.length.toString())},e.prototype._startUpload=function(r){this._body&&r.write(this._body),r.end()},e}(ph.XMLHttpRequestEventTarget);wn.XMLHttpRequestUpload=_h;var Rt={};(function(){function t(s,i,c,h){return this instanceof t?(this.domain=s||void 0,this.path=i||"/",this.secure=!!c,this.script=!!h,this):new t(s,i,c,h)}t.All=Object.freeze(Object.create(null)),Rt.CookieAccessInfo=t;function e(s,i,c){return s instanceof e?s:this instanceof e?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(c||"/"),this.explicit_path=!1,this.domain=i||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,s&&this.parse(s,i,c),this):new e(s,i,c)}Rt.Cookie=e,e.prototype.toString=function(){var i=[this.name+"="+this.value];return this.expiration_date!==1/0&&i.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&i.push("domain="+this.domain),this.path&&i.push("path="+this.path),this.secure&&i.push("secure"),this.noscript&&i.push("httponly"),i.join("; ")},e.prototype.toValueString=function(){return this.name+"="+this.value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;e.prototype.parse=function(i,c,h){if(this instanceof e){if(i.length>32768){console.warn("Cookie too long for parsing (>32768 characters)");return}var d=i.split(";").filter(function(I){return!!I}),w,v=d[0].match(/([^=]+)=([\s\S]*)/);if(!v){console.warn("Invalid cookie header encountered. Header: '"+i+"'");return}var S=v[1],k=v[2];if(typeof S!="string"||S.length===0||typeof k!="string"){console.warn("Unable to extract values from cookie header. Cookie: '"+i+"'");return}for(this.name=S,this.value=k,w=1;w<d.length;w+=1)switch(v=d[w].match(/([^=]+)(?:=([\s\S]*))?/),S=v[1].trim().toLowerCase(),k=v[2],S){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=k?Number(Date.parse(k)):1/0;break;case"path":this.path=k?k.trim():"",this.explicit_path=!0;break;case"domain":this.domain=k?k.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0;break}return this.explicit_path||(this.path=h||"/"),this.explicit_domain||(this.domain=c),this}return new e().parse(i,c,h)},e.prototype.matches=function(i){return i===t.All?!0:!(this.noscript&&i.script||this.secure&&!i.secure||!this.collidesWith(i))},e.prototype.collidesWith=function(i){if(this.path&&!i.path||this.domain&&!i.domain||this.path&&i.path.indexOf(this.path)!==0||this.explicit_path&&i.path.indexOf(this.path)!==0)return!1;var c=i.domain&&i.domain.replace(/^[\.]/,""),h=this.domain&&this.domain.replace(/^[\.]/,"");if(h===c)return!0;if(h){if(!this.explicit_domain)return!1;var d=c.indexOf(h);return!(d===-1||d!==c.length-h.length)}return!0};function n(){var s,i,c;return this instanceof n?(s=Object.create(null),this.setCookie=function(d,w,v){var S,k;if(d=new e(d,w,v),S=d.expiration_date<=Date.now(),s[d.name]!==void 0){for(i=s[d.name],k=0;k<i.length;k+=1)if(c=i[k],c.collidesWith(d))return S?(i.splice(k,1),i.length===0&&delete s[d.name],!1):(i[k]=d,d);return S?!1:(i.push(d),d)}return S?!1:(s[d.name]=[d],s[d.name])},this.getCookie=function(d,w){var v,S;if(i=s[d],!!i)for(S=0;S<i.length;S+=1){if(v=i[S],v.expiration_date<=Date.now()){i.length===0&&delete s[v.name];continue}if(v.matches(w))return v}},this.getCookies=function(d){var w=[],v,S;for(v in s)S=this.getCookie(v,d),S&&w.push(S);return w.toString=function(){return w.join(":")},w.toValueString=function(){return w.map(function(I){return I.toValueString()}).join("; ")},w},this):new n}Rt.CookieJar=n,n.prototype.setCookies=function(i,c,h){i=Array.isArray(i)?i:i.split(r);var d=[],w,v;for(i=i.map(function(S){return new e(S,c,h)}),w=0;w<i.length;w+=1)v=i[w],this.setCookie(v,c,h)&&d.push(v);return d}})();var gh=Ie&&Ie.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vh=Ie&&Ie.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t};Object.defineProperty(vn,"__esModule",{value:!0});var $r=mt,ws=mt,wi=mt,Cr=mt,yi=mn,Ct=ut,mh=Mt,bi=wn,Mi=Rt,Gt=function(t){gh(e,t);function e(r){r===void 0&&(r={});var n=t.call(this)||this;return n.UNSENT=e.UNSENT,n.OPENED=e.OPENED,n.HEADERS_RECEIVED=e.HEADERS_RECEIVED,n.LOADING=e.LOADING,n.DONE=e.DONE,n.onreadystatechange=null,n.readyState=e.UNSENT,n.response=null,n.responseText="",n.responseType="",n.status=0,n.statusText="",n.timeout=0,n.upload=new bi.XMLHttpRequestUpload,n.responseUrl="",n.withCredentials=!1,n._method=null,n._url=null,n._sync=!1,n._headers={},n._loweredHeaders={},n._mimeOverride=null,n._request=null,n._response=null,n._responseParts=null,n._responseHeaders=null,n._aborting=null,n._error=null,n._loadedBytes=0,n._totalBytes=0,n._lengthComputable=!1,n._restrictedMethods={CONNECT:!0,TRACE:!0,TRACK:!0},n._restrictedHeaders={"accept-charset":!0,"accept-encoding":!0,"access-control-request-headers":!0,"access-control-request-method":!0,connection:!0,"content-length":!0,cookie:!0,cookie2:!0,date:!0,dnt:!0,expect:!0,host:!0,"keep-alive":!0,origin:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,via:!0},n._privateHeaders={"set-cookie":!0,"set-cookie2":!0},n._userAgent="Mozilla/5.0 ("+wi.type()+" "+wi.arch()+") node.js/"+process.versions.node+" v8/"+process.versions.v8,n._anonymous=r.anon||!1,n}return e.prototype.open=function(r,n,s,i,c){if(s===void 0&&(s=!0),r=r.toUpperCase(),this._restrictedMethods[r])throw new e.SecurityError("HTTP method "+r+" is not allowed in XHR");var h=this._parseUrl(n,i,c);this.readyState===e.HEADERS_RECEIVED||(this.readyState,e.LOADING),this._method=r,this._url=h,this._sync=!s,this._headers={},this._loweredHeaders={},this._mimeOverride=null,this._setReadyState(e.OPENED),this._request=null,this._response=null,this.status=0,this.statusText="",this._responseParts=[],this._responseHeaders=null,this._loadedBytes=0,this._totalBytes=0,this._lengthComputable=!1},e.prototype.setRequestHeader=function(r,n){if(this.readyState!==e.OPENED)throw new e.InvalidStateError("XHR readyState must be OPENED");var s=r.toLowerCase();if(this._restrictedHeaders[s]||/^sec-/.test(s)||/^proxy-/.test(s)){console.warn('Refused to set unsafe header "'+r+'"');return}n=n.toString(),this._loweredHeaders[s]!=null?(r=this._loweredHeaders[s],this._headers[r]=this._headers[r]+", "+n):(this._loweredHeaders[s]=r,this._headers[r]=n)},e.prototype.send=function(r){if(this.readyState!==e.OPENED)throw new e.InvalidStateError("XHR readyState must be OPENED");if(this._request)throw new e.InvalidStateError("send() already called");switch(this._url.protocol){case"file:":return this._sendFile(r);case"http:":case"https:":return this._sendHttp(r);default:throw new e.NetworkError("Unsupported protocol "+this._url.protocol)}},e.prototype.abort=function(){this._request!=null&&(this._request.abort(),this._setError(),this._dispatchProgress("abort"),this._dispatchProgress("loadend"))},e.prototype.getResponseHeader=function(r){if(this._responseHeaders==null||r==null)return null;var n=r.toLowerCase();return this._responseHeaders.hasOwnProperty(n)?this._responseHeaders[r.toLowerCase()]:null},e.prototype.getAllResponseHeaders=function(){var r=this;return this._responseHeaders==null?"":Object.keys(this._responseHeaders).map(function(n){return n+": "+r._responseHeaders[n]}).join(`\r
`)},e.prototype.overrideMimeType=function(r){if(this.readyState===e.LOADING||this.readyState===e.DONE)throw new e.InvalidStateError("overrideMimeType() not allowed in LOADING or DONE");this._mimeOverride=r.toLowerCase()},e.prototype.nodejsSet=function(r){if(this.nodejsHttpAgent=r.httpAgent||this.nodejsHttpAgent,this.nodejsHttpsAgent=r.httpsAgent||this.nodejsHttpsAgent,r.hasOwnProperty("baseUrl")){if(r.baseUrl!=null){var n=Cr.parse(r.baseUrl,!1,!0);if(!n.protocol)throw new e.SyntaxError("baseUrl must be an absolute URL")}this.nodejsBaseUrl=r.baseUrl}},e.nodejsSet=function(r){e.prototype.nodejsSet(r)},e.prototype._setReadyState=function(r){this.readyState=r,this.dispatchEvent(new yi.ProgressEvent("readystatechange"))},e.prototype._sendFile=function(r){throw new Error("Protocol file: not implemented")},e.prototype._sendHttp=function(r){if(this._sync)throw new Error("Synchronous XHR processing not implemented");r&&(this._method==="GET"||this._method==="HEAD")?(console.warn("Discarding entity body for "+this._method+" requests"),r=null):r=r||"",this.upload._setData(r),this._finalizeHeaders(),this._sendHxxpRequest()},e.prototype._sendHxxpRequest=function(){var r=this;if(this.withCredentials){var n=e.cookieJar.getCookies(Mi.CookieAccessInfo(this._url.hostname,this._url.pathname,this._url.protocol==="https:")).toValueString();this._headers.cookie=this._headers.cookie2=n}var s=this._url.protocol==="http:"?[$r,this.nodejsHttpAgent]:[ws,this.nodejsHttpsAgent],i=s[0],c=s[1],h=i.request.bind(i),d=h({hostname:this._url.hostname,port:+this._url.port,path:this._url.path,auth:this._url.auth,method:this._method,headers:this._headers,agent:c});this._request=d,this.timeout&&d.setTimeout(this.timeout,function(){return r._onHttpTimeout(d)}),d.on("response",function(w){return r._onHttpResponse(d,w)}),d.on("error",function(w){return r._onHttpRequestError(d,w)}),this.upload._startUpload(d),this._request===d&&this._dispatchProgress("loadstart")},e.prototype._finalizeHeaders=function(){this._headers=vh({},this._headers,{Connection:"keep-alive",Host:this._url.host,"User-Agent":this._userAgent},this._anonymous?{Referer:"about:blank"}:{}),this.upload._finalizeHeaders(this._headers,this._loweredHeaders)},e.prototype._onHttpResponse=function(r,n){var s=this;if(this._request===r){if(this.withCredentials&&(n.headers["set-cookie"]||n.headers["set-cookie2"])&&e.cookieJar.setCookies(n.headers["set-cookie"]||n.headers["set-cookie2"]),[301,302,303,307,308].indexOf(n.statusCode)>=0){this._url=this._parseUrl(n.headers.location),this._method="GET",this._loweredHeaders["content-type"]&&(delete this._headers[this._loweredHeaders["content-type"]],delete this._loweredHeaders["content-type"]),this._headers["Content-Type"]!=null&&delete this._headers["Content-Type"],delete this._headers["Content-Length"],this.upload._reset(),this._finalizeHeaders(),this._sendHxxpRequest();return}this._response=n,this._response.on("data",function(c){return s._onHttpResponseData(n,c)}),this._response.on("end",function(){return s._onHttpResponseEnd(n)}),this._response.on("close",function(){return s._onHttpResponseClose(n)}),this.responseUrl=this._url.href.split("#")[0],this.status=n.statusCode,this.statusText=$r.STATUS_CODES[this.status],this._parseResponseHeaders(n);var i=this._responseHeaders["content-length"]||"";this._totalBytes=+i,this._lengthComputable=!!i,this._setReadyState(e.HEADERS_RECEIVED)}},e.prototype._onHttpResponseData=function(r,n){this._response===r&&(this._responseParts.push(new Buffer(n)),this._loadedBytes+=n.length,this.readyState!==e.LOADING&&this._setReadyState(e.LOADING),this._dispatchProgress("progress"))},e.prototype._onHttpResponseEnd=function(r){this._response===r&&(this._parseResponse(),this._request=null,this._response=null,this._setReadyState(e.DONE),this._dispatchProgress("load"),this._dispatchProgress("loadend"))},e.prototype._onHttpResponseClose=function(r){if(this._response===r){var n=this._request;this._setError(),n.abort(),this._setReadyState(e.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend")}},e.prototype._onHttpTimeout=function(r){this._request===r&&(this._setError(),r.abort(),this._setReadyState(e.DONE),this._dispatchProgress("timeout"),this._dispatchProgress("loadend"))},e.prototype._onHttpRequestError=function(r,n){this._request===r&&(this._setError(),r.abort(),this._setReadyState(e.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend"))},e.prototype._dispatchProgress=function(r){var n=new e.ProgressEvent(r);n.lengthComputable=this._lengthComputable,n.loaded=this._loadedBytes,n.total=this._totalBytes,this.dispatchEvent(n)},e.prototype._setError=function(){this._request=null,this._response=null,this._responseHeaders=null,this._responseParts=null},e.prototype._parseUrl=function(r,n,s){var i=this.nodejsBaseUrl==null?r:Cr.resolve(this.nodejsBaseUrl,r),c=Cr.parse(i,!1,!0);c.hash=null;var h=(c.auth||"").split(":"),d=h[0],w=h[1];return(d||w||n||s)&&(c.auth=(n||d||"")+":"+(s||w||"")),c},e.prototype._parseResponseHeaders=function(r){this._responseHeaders={};for(var n in r.headers){var s=n.toLowerCase();this._privateHeaders[s]||(this._responseHeaders[s]=r.headers[n])}this._mimeOverride!=null&&(this._responseHeaders["content-type"]=this._mimeOverride)},e.prototype._parseResponse=function(){var r=Buffer.concat(this._responseParts);switch(this._responseParts=null,this.responseType){case"json":this.responseText=null;try{this.response=JSON.parse(r.toString("utf-8"))}catch{this.response=null}return;case"buffer":this.responseText=null,this.response=r;return;case"arraybuffer":this.responseText=null;for(var n=new ArrayBuffer(r.length),s=new Uint8Array(n),i=0;i<r.length;i++)s[i]=r[i];this.response=n;return;case"text":default:try{this.responseText=r.toString(this._parseResponseEncoding())}catch{this.responseText=r.toString("binary")}this.response=this.responseText}},e.prototype._parseResponseEncoding=function(){return/;\s*charset=(.*)$/.exec(this._responseHeaders["content-type"]||"")[1]||"utf-8"},e.ProgressEvent=yi.ProgressEvent,e.InvalidStateError=Ct.InvalidStateError,e.NetworkError=Ct.NetworkError,e.SecurityError=Ct.SecurityError,e.SyntaxError=Ct.SyntaxError,e.XMLHttpRequestUpload=bi.XMLHttpRequestUpload,e.UNSENT=0,e.OPENED=1,e.HEADERS_RECEIVED=2,e.LOADING=3,e.DONE=4,e.cookieJar=Mi.CookieJar(),e}(mh.XMLHttpRequestEventTarget);vn.XMLHttpRequest=Gt;Gt.prototype.nodejsHttpAgent=$r.globalAgent;Gt.prototype.nodejsHttpsAgent=ws.globalAgent;Gt.prototype.nodejsBaseUrl=null;(function(t){function e(n){for(var s in n)t.hasOwnProperty(s)||(t[s]=n[s])}Object.defineProperty(t,"__esModule",{value:!0}),e(vn);var r=Mt;t.XMLHttpRequestEventTarget=r.XMLHttpRequestEventTarget})(ms);const wh=Fi("XMLHttpRequest")||ms.XMLHttpRequest;class yh extends sh{constructor(e){super(),this.url=e}formatError(e,r,n=-1){return{error:{message:r,code:n},id:e.id,jsonrpc:e.jsonrpc}}send(e,r){return new Promise(n=>{if(e.method==="eth_subscribe"){const h=this.formatError(e,"Subscriptions are not supported by this HTTP endpoint");return this.emit("error",h),n(h)}const s=new wh;let i=!1;const c=(h,d)=>{if(!i)if(s.abort(),i=!0,r)r(h,d);else{const{id:w,jsonrpc:v}=e,S=h?{id:w,jsonrpc:v,error:{message:h.message,code:h.code}}:{id:w,jsonrpc:v,result:d};this.emit("payload",S),n(S)}};s.open("POST",this.url,!0),s.setRequestHeader("Content-Type","application/json"),s.timeout=60*1e3,s.onerror=c,s.ontimeout=c,s.onreadystatechange=()=>{if(s.readyState===4)try{const h=JSON.parse(s.responseText);c(h.error,h.result)}catch(h){c(h)}},s.send(JSON.stringify(e))})}}const bh=require("web3-provider-engine"),Mh=require("web3-provider-engine/subproviders/cache"),Eh=require("web3-provider-engine/subproviders/fixture"),xh=require("web3-provider-engine/subproviders/filters"),Sh=require("web3-provider-engine/subproviders/hooked-wallet"),Ch=require("web3-provider-engine/subproviders/nonce-tracker"),kh=require("web3-provider-engine/subproviders/subscriptions");class Ih extends bh{constructor(e){if(super({pollingInterval:e.pollingInterval||8e3}),this.bridge="https://bridge.walletconnect.org",this.qrcode=!0,this.qrcodeModal=ih,this.qrcodeModalOptions=void 0,this.rpc=null,this.infuraId="",this.http=null,this.isConnecting=!1,this.connected=!1,this.connectCallbacks=[],this.accounts=[],this.chainId=1,this.rpcUrl="",this.enable=async()=>{const r=await this.getWalletConnector();if(r)return this.start(),this.subscribeWalletConnector(),r.accounts;throw new Error("Failed to connect to WalleConnect")},this.request=async r=>this.send(r),this.send=async(r,n)=>{var s;if(typeof r=="string"){const i=r;let c=n;return i==="personal_sign"&&(c=At(c)),this.sendAsyncPromise(i,c)}if(r=Object.assign({id:Tr(),jsonrpc:"2.0"},r),r.method==="personal_sign"&&(r.params=At(r.params)),n){this.sendAsync(r,n);return}if(r.method==="eth_signTypedData_v4"&&((s=this.walletMeta)===null||s===void 0?void 0:s.name)==="MetaMask"){const{result:i}=await this.handleOtherRequests(r);return i}else return this.sendAsyncPromise(r.method,r.params)},this.onConnect=r=>{this.connectCallbacks.push(r)},this.triggerConnect=r=>{this.connectCallbacks&&this.connectCallbacks.length&&this.connectCallbacks.forEach(n=>n(r))},this.bridge=e.connector?e.connector.bridge:e.bridge||"https://bridge.walletconnect.org",this.qrcode=typeof e.qrcode>"u"||e.qrcode!==!1,this.qrcodeModal=e.qrcodeModal||this.qrcodeModal,this.qrcodeModalOptions=e.qrcodeModalOptions,this.wc=e.connector||new Ql({bridge:this.bridge,qrcodeModal:this.qrcode?this.qrcodeModal:void 0,qrcodeModalOptions:this.qrcodeModalOptions,storageId:e==null?void 0:e.storageId,signingMethods:e==null?void 0:e.signingMethods,clientMeta:e==null?void 0:e.clientMeta}),this.rpc=e.rpc||null,!this.rpc&&(!e.infuraId||typeof e.infuraId!="string"||!e.infuraId.trim()))throw new Error("Missing one of the required parameters: rpc or infuraId");this.infuraId=e.infuraId||"",this.chainId=(e==null?void 0:e.chainId)||this.chainId,this.initialize()}get isWalletConnect(){return!0}get connector(){return this.wc}get walletMeta(){return this.wc.peerMeta}async disconnect(){this.close()}async close(){await(await this.getWalletConnector({disableSessionCreation:!0})).killSession(),await this.onDisconnect()}async handleRequest(e){try{let r,n=null;const s=await this.getWalletConnector();switch(e.method){case"wc_killSession":await this.close(),n=null;break;case"eth_accounts":n=s.accounts;break;case"eth_coinbase":n=s.accounts[0];break;case"eth_chainId":n=s.chainId;break;case"net_version":n=s.chainId;break;case"eth_uninstallFilter":this.sendAsync(e,i=>i),n=!0;break;default:r=await this.handleOtherRequests(e)}return r||this.formatResponse(e,n)}catch(r){throw this.emit("error",r),r}}async handleOtherRequests(e){if(!Kr.includes(e.method)&&e.method.startsWith("eth_"))return this.handleReadRequests(e);const n=await(await this.getWalletConnector()).sendCustomRequest(e);return this.formatResponse(e,n)}async handleReadRequests(e){if(!this.http){const r=new Error("HTTP Connection not available");throw this.emit("error",r),r}return this.http.send(e)}formatResponse(e,r){return{id:e.id,jsonrpc:e.jsonrpc,result:r}}getWalletConnector(e={}){const{disableSessionCreation:r=!1}=e;return new Promise((n,s)=>{const i=this.wc;this.isConnecting?this.onConnect(c=>n(c)):!i.connected&&!r?(this.isConnecting=!0,i.on("modal_closed",()=>{s(new Error("User closed modal"))}),i.createSession({chainId:this.chainId}).then(()=>{i.on("connect",(c,h)=>{if(c)return this.isConnecting=!1,s(c);this.isConnecting=!1,this.connected=!0,h&&this.updateState(h.params[0]),this.emit("connect"),this.triggerConnect(i),n(i)})}).catch(c=>{this.isConnecting=!1,s(c)})):(this.connected||(this.connected=!0,this.updateState(i.session)),n(i))})}async subscribeWalletConnector(){const e=await this.getWalletConnector();e.on("disconnect",r=>{if(r){this.emit("error",r);return}this.onDisconnect()}),e.on("session_update",(r,n)=>{if(r){this.emit("error",r);return}this.updateState(n.params[0])})}async onDisconnect(){await this.stop(),this.emit("close",1e3,"Connection closed"),this.emit("disconnect",1e3,"Connection disconnected"),this.connected=!1}async updateState(e){const{accounts:r,chainId:n,networkId:s,rpcUrl:i}=e;(!this.accounts||r&&this.accounts!==r)&&(this.accounts=r,this.emit("accountsChanged",r)),(!this.chainId||n&&this.chainId!==n)&&(this.chainId=n,this.emit("chainChanged",n)),(!this.networkId||s&&this.networkId!==s)&&(this.networkId=s,this.emit("networkChanged",s)),this.updateRpcUrl(this.chainId,i||"")}updateRpcUrl(e,r=""){const n={infuraId:this.infuraId,custom:this.rpc||void 0};r=r||Wa(e,n),r?(this.rpcUrl=r,this.updateHttpConnection()):this.emit("error",new Error(`No RPC Url available for chainId: ${e}`))}updateHttpConnection(){this.rpcUrl&&(this.http=new yh(this.rpcUrl),this.http.on("payload",e=>this.emit("payload",e)),this.http.on("error",e=>this.emit("error",e)))}sendAsyncPromise(e,r){return new Promise((n,s)=>{this.sendAsync({id:Tr(),jsonrpc:"2.0",method:e,params:r||[]},(i,c)=>{if(i){s(i);return}n(c.result)})})}initialize(){this.updateRpcUrl(this.chainId),this.addProvider(new Eh({eth_hashrate:"0x00",eth_mining:!1,eth_syncing:!0,net_listening:!0,web3_clientVersion:"WalletConnect/v1.x.x/javascript"})),this.addProvider(new Mh),this.addProvider(new kh),this.addProvider(new xh),this.addProvider(new Ch),this.addProvider(new Sh(this.configWallet())),this.addProvider({handleRequest:async(e,r,n)=>{try{const{error:s,result:i}=await this.handleRequest(e);n(s,i)}catch(s){n(s)}},setEngine:e=>e})}configWallet(){return{getAccounts:async e=>{try{const n=(await this.getWalletConnector()).accounts;n&&n.length?e(null,n):e(new Error("Failed to get accounts"))}catch(r){e(r)}},processMessage:async(e,r)=>{try{const s=await(await this.getWalletConnector()).signMessage([e.from,e.data]);r(null,s)}catch(n){r(n)}},processPersonalMessage:async(e,r)=>{try{const s=await(await this.getWalletConnector()).signPersonalMessage([e.data,e.from]);r(null,s)}catch(n){r(n)}},processSignTransaction:async(e,r)=>{try{const s=await(await this.getWalletConnector()).signTransaction(e);r(null,s)}catch(n){r(n)}},processTransaction:async(e,r)=>{try{const s=await(await this.getWalletConnector()).sendTransaction(e);r(null,s)}catch(n){r(n)}},processTypedMessage:async(e,r)=>{try{const s=await(await this.getWalletConnector()).signTypedData([e.from,e.data]);r(null,s)}catch(n){r(n)}}}}}export{Ih as default};
