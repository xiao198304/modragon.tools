import{A as Pt,H as At,M as Nt,d as $t,e as It,N as Rt,O as Ct,T as Ot,W as Bt,Z as jt,L as y,v as H,J as se,f as B,B as De,h as le,j as he,k as Ue,l as Me,m as te,n as rt,o as Oe,p as st,q as J,P as nt,t as Be,u as re,w as ot,x as at,y as it,z as lt,F as Dt,C as Ut,R as Mt,D as Ft,E as qt,G as Ht,I as Lt,K as Wt,Q as zt,S as Jt,U as Gt,V as Vt,X as Yt,Y as Kt,_ as Zt,$ as Xt,a0 as Qt,a1 as er,a2 as tr,a3 as rr,a4 as sr,a5 as nr,a6 as or,a7 as ar,a8 as ir,a9 as lr,aa as cr,ab as ur,ac as dr,ad as hr,ae as fr,af as gr,ag as pr,ah as mr,ai as br,aj as vr,ak as yr,al as wr,am as _r,an as kr,ao as Er,ap as xr,aq as Sr,ar as Tr,as as Pr,at as Ar,au as Nr,av as $r,aw as Ir,ax as Rr,ay as Cr,az as Or,aA as Br,aB as jr,aC as Dr,aD as Ur,aE as Mr,aF as Fr,aG as qr,aH as Hr,aI as Lr,aJ as Wr,aK as zr,aL as Jr,aM as Gr,aN as Vr,aO as Yr,aP as Kr,aQ as Zr,aR as Xr,aS as Qr,aT as es,aU as ts,aV as rs,aW as ss,aX as ns,aY as os,aZ as as,a_ as is,a$ as ls,b0 as cs,b1 as us,b2 as ds,b3 as hs,b4 as fs,b5 as gs,b6 as ps,b7 as ms,b8 as bs,b9 as vs,ba as ys,bb as ws,bc as ct,bd as _s,be as ks,bf as Es,bg as xs,bh as ue,bi as Ss,bj as Ts,bk as Ps,c as As,g as Ns,bl as fe,bm as ge,bn as F,bo as C,bp as A,bq as j,br as _,bs as N,bt as k,bu as x,bv as D,bw as O,bx as Q,by as V,bz as ke,bA as L,bB as je,bC as q,bD as oe,bE as $s,bF as de,bG as Ee,bH as Is,bI as Y,bJ as Rs,bK as xe,bL as Le,bM as Se,bN as Fe,bO as We,bP as X,bQ as ut,bR as Cs,bS as Os}from"./index-d0f396f9.js";const Bs="Ξ",js=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:Pt,EtherSymbol:Bs,HashZero:At,MaxInt256:Nt,MaxUint256:$t,MinInt256:It,NegativeOne:Rt,One:Ct,Two:Ot,WeiPerEther:Bt,Zero:jt},Symbol.toStringTag,{value:"Module"}));let ce=null;try{if(ce=WebSocket,ce==null)throw new Error("inject please")}catch{const t=new y(H);ce=function(){t.throwError("WebSockets not supported in this environment",y.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Ie=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function l(u){try{c(r.next(u))}catch(p){a(p)}}function i(u){try{c(r.throw(u))}catch(p){a(p)}}function c(u){u.done?o(u.value):s(u.value).then(l,i)}c((r=r.apply(n,t||[])).next())})};const pe=new y(H);let Ds=1;class Ae extends se{constructor(t,e){e==="any"&&pe.throwError("WebSocketProvider does not support 'any' network yet",y.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof t=="string"?super(t,e):super("_websocket",e),this._pollingInterval=-1,this._wsReady=!1,typeof t=="string"?B(this,"_websocket",new ce(this.connection.url)):B(this,"_websocket",t),B(this,"_requests",{}),B(this,"_subs",{}),B(this,"_subIds",{}),B(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(s=>{this.websocket.send(this._requests[s].payload)})},this.websocket.onmessage=s=>{const o=s.data,a=JSON.parse(o);if(a.id!=null){const l=String(a.id),i=this._requests[l];if(delete this._requests[l],a.result!==void 0)i.callback(null,a.result),this.emit("debug",{action:"response",request:JSON.parse(i.payload),response:a.result,provider:this});else{let c=null;a.error?(c=new Error(a.error.message||"unknown error"),B(c,"code",a.error.code||null),B(c,"response",o)):c=new Error("unknown error"),i.callback(c,void 0),this.emit("debug",{action:"response",error:c,request:JSON.parse(i.payload),provider:this})}}else if(a.method==="eth_subscription"){const l=this._subs[a.params.subscription];l&&l.processFunc(a.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(t){pe.throwError("cannot reset events block on WebSocketProvider",y.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(t){pe.throwError("cannot set polling interval on WebSocketProvider",y.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Ie(this,void 0,void 0,function*(){return null})}set polling(t){t&&pe.throwError("cannot set polling on WebSocketProvider",y.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(t,e){const r=Ds++;return new Promise((s,o)=>{function a(i,c){return i?o(i):s(c)}const l=JSON.stringify({method:t,params:e,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(l),provider:this}),this._requests[String(r)]={callback:a,payload:l},this._wsReady&&this.websocket.send(l)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(t,e,r){return Ie(this,void 0,void 0,function*(){let s=this._subIds[t];s==null&&(s=Promise.all(e).then(a=>this.send("eth_subscribe",a)),this._subIds[t]=s);const o=yield s;this._subs[o]={tag:t,processFunc:r}})}_startEvent(t){switch(t.type){case"block":this._subscribe("block",["newHeads"],e=>{const r=De.from(e.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],e=>{this.emit("pending",e)});break;case"filter":this._subscribe(t.tag,["logs",this._getFilter(t.filter)],e=>{e.removed==null&&(e.removed=!1),this.emit(t.filter,this.formatter.filterLog(e))});break;case"tx":{const e=r=>{const s=r.hash;this.getTransactionReceipt(s).then(o=>{o&&this.emit(s,o)})};e(t),this._subscribe("tx",["newHeads"],r=>{this._events.filter(s=>s.type==="tx").forEach(e)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",t);break}}_stopEvent(t){let e=t.tag;if(t.type==="tx"){if(this._events.filter(s=>s.type==="tx").length)return;e="tx"}else if(this.listenerCount(t.event))return;const r=this._subIds[e];r&&(delete this._subIds[e],r.then(s=>{this._subs[s]&&(delete this._subs[s],this.send("eth_unsubscribe",[s]))}))}destroy(){return Ie(this,void 0,void 0,function*(){this.websocket.readyState===ce.CONNECTING&&(yield new Promise(t=>{this.websocket.onopen=function(){t(!0)},this.websocket.onerror=function(){t(!1)}})),this.websocket.close(1e3)})}}var Us=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function l(u){try{c(r.next(u))}catch(p){a(p)}}function i(u){try{c(r.throw(u))}catch(p){a(p)}}function c(u){u.done?o(u.value):s(u.value).then(l,i)}c((r=r.apply(n,t||[])).next())})};const ae=new y(H);class dt extends se{detectNetwork(){const t=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return Us(this,void 0,void 0,function*(){let e=this.network;return e==null&&(e=yield t.detectNetwork.call(this),e||ae.throwError("no network detected",y.errors.UNKNOWN_ERROR,{}),this._network==null&&(B(this,"_network",e),this.emit("network",e,null))),e})}}class W extends dt{constructor(t,e){ae.checkAbstract(new.target,W),t=le(new.target,"getNetwork")(t),e=le(new.target,"getApiKey")(e);const r=le(new.target,"getUrl")(t,e);super(r,t),typeof e=="string"?B(this,"apiKey",e):e!=null&&Object.keys(e).forEach(s=>{B(this,s,e[s])})}_startPending(){ae.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(t){return ae.throwError("API provider does not support signing",y.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(t){return t}static getUrl(t,e){return ae.throwError("not implemented; sub-classes must override getUrl",y.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const ze=new y(H),we="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class ht extends Ae{constructor(t,e){const r=new qe(t,e),s=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(s,r.network),B(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===we}}class qe extends W{static getWebSocketProvider(t,e){return new ht(t,e)}static getApiKey(t){return t==null?we:(t&&typeof t!="string"&&ze.throwArgumentError("invalid apiKey","apiKey",t),t)}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"ropsten":r="eth-ropsten.alchemyapi.io/v2/";break;case"rinkeby":r="eth-rinkeby.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.alchemyapi.io/v2/";break;case"kovan":r="eth-kovan.alchemyapi.io/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-rinkeby":r="arb-rinkeby.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-kovan":r="opt-kovan.g.alchemy.com/v2/";break;default:ze.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+e,throttleCallback:(s,o)=>(e===we&&he(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===we}}const Ms=new y(H),me="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Fs(n){switch(n){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return Ms.throwArgumentError("unsupported network","name",n)}class ft extends W{isCommunityResource(){return this.apiKey===me}static getApiKey(t){return t??me}static getUrl(t,e){e==null&&(e=me);const r={allowGzip:!0,url:"https://"+Fs(t.name)+e,throttleCallback:(s,o)=>(e.apiKey===me&&he(),Promise.resolve(!0))};return e.projectSecret!=null&&(r.user="",r.password=e.projectSecret),r}}var qs=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function l(u){try{c(r.next(u))}catch(p){a(p)}}function i(u){try{c(r.throw(u))}catch(p){a(p)}}function c(u){u.done?o(u.value):s(u.value).then(l,i)}c((r=r.apply(n,t||[])).next())})};const Je=new y(H);class gt extends W{static getApiKey(t){return t!=null&&Je.throwArgumentError("apiKey not supported for cloudflare","apiKey",t),null}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="https://cloudflare-eth.com/";break;default:Je.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return qs(this,void 0,void 0,function*(){return t==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,t,e)})}}var be=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function l(u){try{c(r.next(u))}catch(p){a(p)}}function i(u){try{c(r.throw(u))}catch(p){a(p)}}function c(u){u.done?o(u.value):s(u.value).then(l,i)}c((r=r.apply(n,t||[])).next())})};const G=new y(H);function Ge(n){const t={};for(let e in n){if(n[e]==null)continue;let r=n[e];e==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[e]?r=rt(Oe(r)):e==="accessList"?r="["+st(r).map(s=>`{address:"${s.address}",storageKeys:["${s.storageKeys.join('","')}"]}`).join(",")+"]":r=Oe(r),t[e]=r)}return t}function Hs(n){if(n.status==0&&(n.message==="No records found"||n.message==="No transactions found"))return n.result;if(n.status!=1||n.message!="OK"){const t=new Error("invalid response");throw t.result=JSON.stringify(n),(n.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return n.result}function Ve(n){if(n&&n.status==0&&n.message=="NOTOK"&&(n.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");throw t.result=JSON.stringify(n),t.throttleRetry=!0,t}if(n.jsonrpc!="2.0"){const t=new Error("invalid response");throw t.result=JSON.stringify(n),t}if(n.error){const t=new Error(n.error.message||"unknown error");throw n.error.code&&(t.code=n.error.code),n.error.data&&(t.data=n.error.data),t}return n.result}function Ye(n){if(n==="pending")throw new Error("pending not supported");return n==="latest"?n:parseInt(n.substring(2),16)}const Ke="9D13ZE7XSBTJ94N9BNJ2MA33VMAY2YPIRB";function Re(n,t,e){if(n==="call"&&t.code===y.errors.SERVER_ERROR){const s=t.error;if(s&&(s.message.match(/reverted/i)||s.message.match(/VM execution error/i))){let o=s.data;if(o&&(o="0x"+o.replace(/^.*0x/i,"")),J(o))return o;G.throwError("missing revert data in call exception",y.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let r=t.message;throw t.code===y.errors.SERVER_ERROR&&(t.error&&typeof t.error.message=="string"?r=t.error.message:typeof t.body=="string"?r=t.body:typeof t.responseText=="string"&&(r=t.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&G.throwError("insufficient funds for intrinsic transaction cost",y.errors.INSUFFICIENT_FUNDS,{error:t,method:n,transaction:e}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&G.throwError("nonce has already been used",y.errors.NONCE_EXPIRED,{error:t,method:n,transaction:e}),r.match(/another transaction with same nonce/)&&G.throwError("replacement fee too low",y.errors.REPLACEMENT_UNDERPRICED,{error:t,method:n,transaction:e}),r.match(/execution failed due to an exception|execution reverted/)&&G.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",y.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:n,transaction:e}),t}class pt extends Ue{constructor(t,e){super(t),B(this,"baseUrl",this.getBaseUrl()),B(this,"apiKey",e||Ke)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"ropsten":return"https://api-ropsten.etherscan.io";case"rinkeby":return"https://api-rinkeby.etherscan.io";case"kovan":return"https://api-kovan.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"optimism":return"https://api-optimistic.etherscan.io"}return G.throwArgumentError("unsupported network","network",this.network.name)}getUrl(t,e){const r=Object.keys(e).reduce((o,a)=>{const l=e[a];return l!=null&&(o+=`&${a}=${l}`),o},""),s=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${t}${r}${s}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(t,e){return e.module=t,e.apikey=this.apiKey,e}fetch(t,e,r){return be(this,void 0,void 0,function*(){const s=r?this.getPostUrl():this.getUrl(t,e),o=r?this.getPostData(t,e):null,a=t==="proxy"?Ve:Hs;this.emit("debug",{action:"request",request:s,provider:this});const l={url:s,throttleSlotInterval:1e3,throttleCallback:(u,p)=>(this.isCommunityResource()&&he(),Promise.resolve(!0))};let i=null;o&&(l.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},i=Object.keys(o).map(u=>`${u}=${o[u]}`).join("&"));const c=yield Me(l,i,a||Ve);return this.emit("debug",{action:"response",request:s,response:te(c),provider:this}),c})}detectNetwork(){return be(this,void 0,void 0,function*(){return this.network})}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return be(this,void 0,void 0,function*(){switch(t){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch(s=>Re("sendTransaction",s,e.signedTransaction));case"getBlock":if(e.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.transactionHash});case"call":{if(e.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const s=Ge(e.transaction);s.module="proxy",s.action="eth_call";try{return yield this.fetch("proxy",s,!0)}catch(o){return Re("call",o,e.transaction)}}case"estimateGas":{const s=Ge(e.transaction);s.module="proxy",s.action="eth_estimateGas";try{return yield this.fetch("proxy",s,!0)}catch(o){return Re("estimateGas",o,e.transaction)}}case"getLogs":{const s={action:"getLogs"};if(e.filter.fromBlock&&(s.fromBlock=Ye(e.filter.fromBlock)),e.filter.toBlock&&(s.toBlock=Ye(e.filter.toBlock)),e.filter.address&&(s.address=e.filter.address),e.filter.topics&&e.filter.topics.length>0&&(e.filter.topics.length>1&&G.throwError("unsupported topic count",y.errors.UNSUPPORTED_OPERATION,{topics:e.filter.topics}),e.filter.topics.length===1)){const l=e.filter.topics[0];(typeof l!="string"||l.length!==66)&&G.throwError("unsupported topic format",y.errors.UNSUPPORTED_OPERATION,{topic0:l}),s.topic0=l}const o=yield this.fetch("logs",s);let a={};for(let l=0;l<o.length;l++){const i=o[l];if(i.blockHash==null){if(a[i.blockNumber]==null){const c=yield this.getBlock(i.blockNumber);c&&(a[i.blockNumber]=c.hash)}i.blockHash=a[i.blockNumber]}}return o}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,t,e)})}getHistory(t,e,r){return be(this,void 0,void 0,function*(){const s={action:"txlist",address:yield this.resolveName(t),startblock:e??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",s)).map(a=>{["contractAddress","to"].forEach(function(i){a[i]==""&&delete a[i]}),a.creates==null&&a.contractAddress!=null&&(a.creates=a.contractAddress);const l=this.formatter.transactionResponse(a);return a.timeStamp&&(l.timestamp=parseInt(a.timeStamp)),l})})}isCommunityResource(){return this.apiKey===Ke}}var Te=globalThis&&globalThis.__awaiter||function(n,t,e,r){function s(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function l(u){try{c(r.next(u))}catch(p){a(p)}}function i(u){try{c(r.throw(u))}catch(p){a(p)}}function c(u){u.done?o(u.value):s(u.value).then(l,i)}c((r=r.apply(n,t||[])).next())})};const Z=new y(H);function ve(){return new Date().getTime()}function Ze(n){let t=null;for(let e=0;e<n.length;e++){const r=n[e];if(r==null)return null;t?t.name===r.name&&t.chainId===r.chainId&&(t.ensAddress===r.ensAddress||t.ensAddress==null&&r.ensAddress==null)||Z.throwArgumentError("provider mismatch","networks",n):t=r}return t}function Xe(n,t){n=n.slice().sort();const e=Math.floor(n.length/2);if(n.length%2)return n[e];const r=n[e-1],s=n[e];return t!=null&&Math.abs(r-s)>t?null:(r+s)/2}function ee(n){if(n===null)return"null";if(typeof n=="number"||typeof n=="boolean")return JSON.stringify(n);if(typeof n=="string")return n;if(De.isBigNumber(n))return n.toString();if(Array.isArray(n))return JSON.stringify(n.map(t=>ee(t)));if(typeof n=="object"){const t=Object.keys(n);return t.sort(),"{"+t.map(e=>{let r=n[e];return typeof r=="function"?r="[function]":r=ee(r),JSON.stringify(e)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof n)}let Ls=1;function Qe(n){let t=null,e=null,r=new Promise(a=>{t=function(){e&&(clearTimeout(e),e=null),a()},e=setTimeout(t,n)});const s=a=>(r=r.then(a),r);function o(){return r}return{cancel:t,getPromise:o,wait:s}}const Ws=[y.errors.CALL_EXCEPTION,y.errors.INSUFFICIENT_FUNDS,y.errors.NONCE_EXPIRED,y.errors.REPLACEMENT_UNDERPRICED,y.errors.UNPREDICTABLE_GAS_LIMIT],zs=["address","args","errorArgs","errorSignature","method","transaction"];function ye(n,t){const e={weight:n.weight};return Object.defineProperty(e,"provider",{get:()=>n.provider}),n.start&&(e.start=n.start),t&&(e.duration=t-n.start),n.done&&(n.error?e.error=n.error:e.result=n.result||null),e}function Js(n,t){return function(e){const r={};e.forEach(o=>{const a=n(o.result);r[a]||(r[a]={count:0,result:o.result}),r[a].count++});const s=Object.keys(r);for(let o=0;o<s.length;o++){const a=r[s[o]];if(a.count>=t)return a.result}}}function Gs(n,t,e){let r=ee;switch(t){case"getBlockNumber":return function(s){const o=s.map(l=>l.result);let a=Xe(s.map(l=>l.result),2);if(a!=null)return a=Math.ceil(a),o.indexOf(a+1)>=0&&a++,a>=n._highestBlockNumber&&(n._highestBlockNumber=a),n._highestBlockNumber};case"getGasPrice":return function(s){const o=s.map(a=>a.result);return o.sort(),o[Math.floor(o.length/2)]};case"getEtherPrice":return function(s){return Xe(s.map(o=>o.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(s){return s==null?null:(s=re(s),s.confirmations=-1,ee(s))};break;case"getBlock":e.includeTransactions?r=function(s){return s==null?null:(s=re(s),s.transactions=s.transactions.map(o=>(o=re(o),o.confirmations=-1,o)),ee(s))}:r=function(s){return s==null?null:ee(s)};break;default:throw new Error("unknown method: "+t)}return Js(r,n.quorum)}function ne(n,t){return Te(this,void 0,void 0,function*(){const e=n.provider;return e.blockNumber!=null&&e.blockNumber>=t||t===-1?e:at(()=>new Promise((r,s)=>{setTimeout(function(){return e.blockNumber>=t?r(e):n.cancelled?r(null):r(void 0)},0)}),{oncePoll:e})})}function Vs(n,t,e,r){return Te(this,void 0,void 0,function*(){let s=n.provider;switch(e){case"getBlockNumber":case"getGasPrice":return s[e]();case"getEtherPrice":if(s.getEtherPrice)return s.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&J(r.blockTag)&&(s=yield ne(n,t)),s[e](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&J(r.blockTag)&&(s=yield ne(n,t)),s.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&J(r.blockTag)&&(s=yield ne(n,t)),s[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&J(r.blockTag)&&(s=yield ne(n,t)),s[e](r.transaction);case"getTransaction":case"getTransactionReceipt":return s[e](r.transactionHash);case"getLogs":{let o=r.filter;return(o.fromBlock&&J(o.fromBlock)||o.toBlock&&J(o.toBlock))&&(s=yield ne(n,t)),s.getLogs(o)}}return Z.throwError("unknown method error",y.errors.UNKNOWN_ERROR,{method:e,params:r})})}class mt extends Ue{constructor(t,e){t.length===0&&Z.throwArgumentError("missing providers","providers",t);const r=t.map((a,l)=>{if(nt.isProvider(a)){const u=Be(a)?2e3:750;return Object.freeze({provider:a,weight:1,stallTimeout:u,priority:1})}const i=re(a);i.priority==null&&(i.priority=1),i.stallTimeout==null&&(i.stallTimeout=Be(a)?2e3:750),i.weight==null&&(i.weight=1);const c=i.weight;return(c%1||c>512||c<1)&&Z.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${l}].weight`,c),Object.freeze(i)}),s=r.reduce((a,l)=>a+l.weight,0);e==null?e=s/2:e>s&&Z.throwArgumentError("quorum will always fail; larger than total weight","quorum",e);let o=Ze(r.map(a=>a.provider.network));o==null&&(o=new Promise((a,l)=>{setTimeout(()=>{this.detectNetwork().then(a,l)},0)})),super(o),B(this,"providerConfigs",Object.freeze(r)),B(this,"quorum",e),this._highestBlockNumber=-1}detectNetwork(){return Te(this,void 0,void 0,function*(){const t=yield Promise.all(this.providerConfigs.map(e=>e.provider.getNetwork()));return Ze(t)})}perform(t,e){return Te(this,void 0,void 0,function*(){if(t==="sendTransaction"){const i=yield Promise.all(this.providerConfigs.map(c=>c.provider.sendTransaction(e.signedTransaction).then(u=>u.hash,u=>u)));for(let c=0;c<i.length;c++){const u=i[c];if(typeof u=="string")return u}throw i[0]}this._highestBlockNumber===-1&&t!=="getBlockNumber"&&(yield this.getBlockNumber());const r=Gs(this,t,e),s=ot(this.providerConfigs.map(re));s.sort((i,c)=>i.priority-c.priority);const o=this._highestBlockNumber;let a=0,l=!0;for(;;){const i=ve();let c=s.filter(m=>m.runner&&i-m.start<m.stallTimeout).reduce((m,f)=>m+f.weight,0);for(;c<this.quorum&&a<s.length;){const m=s[a++],f=Ls++;m.start=ve(),m.staller=Qe(m.stallTimeout),m.staller.wait(()=>{m.staller=null}),m.runner=Vs(m,o,t,e).then(b=>{m.done=!0,m.result=b,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:f,backend:ye(m,ve()),request:{method:t,params:te(e)},provider:this})},b=>{m.done=!0,m.error=b,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:f,backend:ye(m,ve()),request:{method:t,params:te(e)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:f,backend:ye(m,null),request:{method:t,params:te(e)},provider:this}),c+=m.weight}const u=[];s.forEach(m=>{m.done||!m.runner||(u.push(m.runner),m.staller&&u.push(m.staller.getPromise()))}),u.length&&(yield Promise.race(u));const p=s.filter(m=>m.done&&m.error==null);if(p.length>=this.quorum){const m=r(p);if(m!==void 0)return s.forEach(f=>{f.staller&&f.staller.cancel(),f.cancelled=!0}),m;l||(yield Qe(100).getPromise()),l=!1}const $=s.reduce((m,f)=>{if(!f.done||f.error==null)return m;const b=f.error.code;return Ws.indexOf(b)>=0&&(m[b]||(m[b]={error:f.error,weight:0}),m[b].weight+=f.weight),m},{});if(Object.keys($).forEach(m=>{const f=$[m];if(f.weight<this.quorum)return;s.forEach(d=>{d.staller&&d.staller.cancel(),d.cancelled=!0});const b=f.error,E={};zs.forEach(d=>{b[d]!=null&&(E[d]=b[d])}),Z.throwError(b.reason||b.message,m,E)}),s.filter(m=>!m.done).length===0)break}return s.forEach(i=>{i.staller&&i.staller.cancel(),i.cancelled=!0}),Z.throwError("failed to meet quorum",y.errors.SERVER_ERROR,{method:t,params:e,results:s.map(i=>ye(i)),provider:this})})}}const bt=null,_e=new y(H),ie="84842078b09946638c03157f83405213";class vt extends Ae{constructor(t,e){const r=new He(t,e),s=r.connection;s.password&&_e.throwError("INFURA WebSocket project secrets unsupported",y.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const o=s.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(o,t),B(this,"apiKey",r.projectId),B(this,"projectId",r.projectId),B(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===ie}}class He extends W{static getWebSocketProvider(t,e){return new vt(t,e)}static getApiKey(t){const e={apiKey:ie,projectId:ie,projectSecret:null};return t==null||(typeof t=="string"?e.projectId=t:t.projectSecret!=null?(_e.assertArgument(typeof t.projectId=="string","projectSecret requires a projectId","projectId",t.projectId),_e.assertArgument(typeof t.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),e.projectId=t.projectId,e.projectSecret=t.projectSecret):t.projectId&&(e.projectId=t.projectId),e.apiKey=e.projectId),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"ropsten":r="ropsten.infura.io";break;case"rinkeby":r="rinkeby.infura.io";break;case"kovan":r="kovan.infura.io";break;case"goerli":r="goerli.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-kovan":r="optimism-kovan.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-rinkeby":r="arbitrum-rinkeby.infura.io";break;default:_e.throwError("unsupported network",y.errors.INVALID_ARGUMENT,{argument:"network",value:t})}const s={allowGzip:!0,url:"https://"+r+"/v3/"+e.projectId,throttleCallback:(o,a)=>(e.projectId===ie&&he(),Promise.resolve(!0))};return e.projectSecret!=null&&(s.user="",s.password=e.projectSecret),s}isCommunityResource(){return this.projectId===ie}}class Ys extends se{send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const s={request:r,resolve:null,reject:null},o=new Promise((a,l)=>{s.resolve=a,s.reject=l});return this._pendingBatch.push(s),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const a=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const l=a.map(i=>i.request);return this.emit("debug",{action:"requestBatch",request:te(l),provider:this}),Me(this.connection,JSON.stringify(l)).then(i=>{this.emit("debug",{action:"response",request:l,response:i,provider:this}),a.forEach((c,u)=>{const p=i[u];if(p.error){const $=new Error(p.error.message);$.code=p.error.code,$.data=p.error.data,c.reject($)}else c.resolve(p.result)})},i=>{this.emit("debug",{action:"response",error:i,request:l,provider:this}),a.forEach(c=>{c.reject(i)})})},10)),o}}const Ce=new y(H),Ks="ETHERS_JS_SHARED";class yt extends W{static getApiKey(t){return t&&typeof t!="string"&&Ce.throwArgumentError("invalid apiKey","apiKey",t),t||Ks}static getUrl(t,e){Ce.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(t.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:Ce.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+e}}const K=new y(H),et={homestead:"6004bcd10040261633ade990",ropsten:"6004bd4d0040261633ade991",rinkeby:"6004bda20040261633ade994",goerli:"6004bd860040261633ade992"};class wt extends W{constructor(t,e){if(e==null){const r=le(new.target,"getNetwork")(t);if(r){const s=et[r.name];s&&(e={applicationId:s,loadBalancer:!0})}e==null&&K.throwError("unsupported network",y.errors.INVALID_ARGUMENT,{argument:"network",value:t})}super(t,e)}static getApiKey(t){t==null&&K.throwArgumentError("PocketProvider.getApiKey does not support null apiKey","apiKey",t);const e={applicationId:null,loadBalancer:!1,applicationSecretKey:null};return typeof t=="string"?e.applicationId=t:t.applicationSecretKey!=null?(K.assertArgument(typeof t.applicationId=="string","applicationSecretKey requires an applicationId","applicationId",t.applicationId),K.assertArgument(typeof t.applicationSecretKey=="string","invalid applicationSecretKey","applicationSecretKey","[REDACTED]"),e.applicationId=t.applicationId,e.applicationSecretKey=t.applicationSecretKey,e.loadBalancer=!!t.loadBalancer):t.applicationId?(K.assertArgument(typeof t.applicationId=="string","apiKey.applicationId must be a string","apiKey.applicationId",t.applicationId),e.applicationId=t.applicationId,e.loadBalancer=!!t.loadBalancer):K.throwArgumentError("unsupported PocketProvider apiKey","apiKey",t),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"goerli":r="eth-goerli.gateway.pokt.network";break;default:K.throwError("unsupported network",y.errors.INVALID_ARGUMENT,{argument:"network",value:t})}let s=null;e.loadBalancer?s=`https://${r}/v1/lb/${e.applicationId}`:s=`https://${r}/v1/${e.applicationId}`;const o={url:s};return o.headers={},e.applicationSecretKey!=null&&(o.user="",o.password=e.applicationSecretKey),o}isCommunityResource(){return this.applicationId===et[this.network.name]}}const tt=new y(H);function _t(n,t){if(n==null&&(n="homestead"),typeof n=="string"){const r=n.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new se(n);case"ws":case"wss":return new Ae(n);default:tt.throwArgumentError("unsupported URL scheme","network",n)}}const e=it(n);return(!e||!e._defaultProvider)&&tt.throwError("unsupported getDefaultProvider network",y.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:n}),e._defaultProvider({FallbackProvider:mt,AlchemyProvider:qe,AnkrProvider:ft,CloudflareProvider:gt,EtherscanProvider:pt,InfuraProvider:He,JsonRpcProvider:se,NodesmithProvider:yt,PocketProvider:wt,Web3Provider:lt,IpcProvider:bt},t)}const Zs=Object.freeze(Object.defineProperty({__proto__:null,AlchemyProvider:qe,AlchemyWebSocketProvider:ht,AnkrProvider:ft,BaseProvider:Ue,CloudflareProvider:gt,EtherscanProvider:pt,FallbackProvider:mt,Formatter:Dt,InfuraProvider:He,InfuraWebSocketProvider:vt,IpcProvider:bt,JsonRpcBatchProvider:Ys,JsonRpcProvider:se,JsonRpcSigner:Ut,NodesmithProvider:yt,PocketProvider:wt,Provider:nt,Resolver:Mt,StaticJsonRpcProvider:dt,UrlJsonRpcProvider:W,Web3Provider:lt,WebSocketProvider:Ae,getDefaultProvider:_t,getNetwork:it,isCommunityResourcable:Ft,isCommunityResource:Be,showThrottleMessage:he},Symbol.toStringTag,{value:"Module"})),Xs=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:qt,ConstructorFragment:Ht,ErrorFragment:Lt,EventFragment:Wt,FormatTypes:zt,Fragment:Jt,FunctionFragment:Gt,HDNode:Vt,Indexed:Yt,Interface:Kt,LogDescription:Zt,Logger:y,ParamType:Xt,RLP:Qt,SigningKey:er,get SupportedAlgorithm(){return tr},TransactionDescription:rr,get TransactionTypes(){return sr},get UnicodeNormalizationForm(){return nr},Utf8ErrorFuncs:or,get Utf8ErrorReason(){return ar},_TypedDataEncoder:ir,_fetchData:lr,_toEscapedUtf8String:cr,accessListify:st,arrayify:ur,base58:dr,base64:hr,checkProperties:fr,checkResultErrors:gr,commify:pr,computeAddress:mr,computeHmac:br,computePublicKey:vr,concat:yr,deepCopy:te,defaultAbiCoder:wr,defaultPath:_r,defineReadOnly:B,dnsEncode:kr,entropyToMnemonic:Er,fetchJson:Me,formatBytes32String:xr,formatEther:Sr,formatUnits:Tr,getAccountPath:Pr,getAddress:Ar,getContractAddress:Nr,getCreate2Address:$r,getIcapAddress:Ir,getJsonWalletAddress:Rr,getStatic:le,hashMessage:Cr,hexConcat:Or,hexDataLength:Br,hexDataSlice:jr,hexStripZeros:Dr,hexValue:rt,hexZeroPad:Ur,hexlify:Oe,id:Mr,isAddress:Fr,isBytes:qr,isBytesLike:Hr,isHexString:J,isValidMnemonic:Lr,isValidName:Wr,joinSignature:zr,keccak256:Jr,mnemonicToEntropy:Gr,mnemonicToSeed:Vr,namehash:Yr,nameprep:Kr,parseBytes32String:Zr,parseEther:Xr,parseTransaction:Qr,parseUnits:es,poll:at,randomBytes:ts,recoverAddress:rs,recoverPublicKey:ss,resolveProperties:ns,ripemd160:os,serializeTransaction:as,sha256:is,sha512:ls,shallowCopy:re,shuffled:ot,solidityKeccak256:cs,solidityPack:us,soliditySha256:ds,splitSignature:hs,stripZeros:fs,toUtf8Bytes:gs,toUtf8CodePoints:ps,toUtf8String:ms,verifyMessage:bs,verifyTypedData:vs,zeroPad:ys},Symbol.toStringTag,{value:"Module"})),kt="ethers/5.6.8",Qs=new y(kt),Et=Object.freeze(Object.defineProperty({__proto__:null,BaseContract:ws,BigNumber:De,Contract:ct,ContractFactory:_s,FixedNumber:ks,Signer:Es,VoidSigner:xs,Wallet:ue,Wordlist:Ss,constants:js,get errors(){return Ts},getDefaultProvider:_t,logger:Qs,providers:Zs,utils:Xs,version:kt,wordlists:Ps},Symbol.toStringTag,{value:"Module"}));try{const n=window;n._ethers==null&&(n._ethers=Et)}catch{}var xt={exports:{}};(function(n,t){(function(e,r){n.exports=r()})(As,function(){var e,r,s=1e3,o=6e4,a=36e5,l=864e5,i=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=31536e6,u=2592e6,p=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,$={years:c,months:u,days:l,hours:a,minutes:o,seconds:s,milliseconds:1,weeks:6048e5},m=function(v){return v instanceof I},f=function(v,g,h){return new I(v,h,g.$l)},b=function(v){return r.p(v)+"s"},E=function(v){return v<0},d=function(v){return E(v)?Math.ceil(v):Math.floor(v)},S=function(v){return Math.abs(v)},P=function(v,g){return v?E(v)?{negative:!0,format:""+S(v)+g}:{negative:!1,format:""+v+g}:{negative:!1,format:""}},I=function(){function v(h,T,w){var R=this;if(this.$d={},this.$l=w,h===void 0&&(this.$ms=0,this.parseFromMilliseconds()),T)return f(h*$[b(T)],this);if(typeof h=="number")return this.$ms=h,this.parseFromMilliseconds(),this;if(typeof h=="object")return Object.keys(h).forEach(function(z){R.$d[b(z)]=h[z]}),this.calMilliseconds(),this;if(typeof h=="string"){var U=h.match(p);if(U){var M=U.slice(2).map(function(z){return z!=null?Number(z):0});return this.$d.years=M[0],this.$d.months=M[1],this.$d.weeks=M[2],this.$d.days=M[3],this.$d.hours=M[4],this.$d.minutes=M[5],this.$d.seconds=M[6],this.calMilliseconds(),this}}return this}var g=v.prototype;return g.calMilliseconds=function(){var h=this;this.$ms=Object.keys(this.$d).reduce(function(T,w){return T+(h.$d[w]||0)*$[w]},0)},g.parseFromMilliseconds=function(){var h=this.$ms;this.$d.years=d(h/c),h%=c,this.$d.months=d(h/u),h%=u,this.$d.days=d(h/l),h%=l,this.$d.hours=d(h/a),h%=a,this.$d.minutes=d(h/o),h%=o,this.$d.seconds=d(h/s),h%=s,this.$d.milliseconds=h},g.toISOString=function(){var h=P(this.$d.years,"Y"),T=P(this.$d.months,"M"),w=+this.$d.days||0;this.$d.weeks&&(w+=7*this.$d.weeks);var R=P(w,"D"),U=P(this.$d.hours,"H"),M=P(this.$d.minutes,"M"),z=this.$d.seconds||0;this.$d.milliseconds&&(z+=this.$d.milliseconds/1e3);var Ne=P(z,"S"),St=h.negative||T.negative||R.negative||U.negative||M.negative||Ne.negative,Tt=U.format||M.format||Ne.format?"T":"",$e=(St?"-":"")+"P"+h.format+T.format+R.format+Tt+U.format+M.format+Ne.format;return $e==="P"||$e==="-P"?"P0D":$e},g.toJSON=function(){return this.toISOString()},g.format=function(h){var T=h||"YYYY-MM-DDTHH:mm:ss",w={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return T.replace(i,function(R,U){return U||String(w[R])})},g.as=function(h){return this.$ms/$[b(h)]},g.get=function(h){var T=this.$ms,w=b(h);return w==="milliseconds"?T%=1e3:T=w==="weeks"?d(T/$[w]):this.$d[w],T===0?0:T},g.add=function(h,T,w){var R;return R=T?h*$[b(T)]:m(h)?h.$ms:f(h,this).$ms,f(this.$ms+R*(w?-1:1),this)},g.subtract=function(h,T){return this.add(h,T,!0)},g.locale=function(h){var T=this.clone();return T.$l=h,T},g.clone=function(){return f(this.$ms,this)},g.humanize=function(h){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!h)},g.milliseconds=function(){return this.get("milliseconds")},g.asMilliseconds=function(){return this.as("milliseconds")},g.seconds=function(){return this.get("seconds")},g.asSeconds=function(){return this.as("seconds")},g.minutes=function(){return this.get("minutes")},g.asMinutes=function(){return this.as("minutes")},g.hours=function(){return this.get("hours")},g.asHours=function(){return this.as("hours")},g.days=function(){return this.get("days")},g.asDays=function(){return this.as("days")},g.weeks=function(){return this.get("weeks")},g.asWeeks=function(){return this.as("weeks")},g.months=function(){return this.get("months")},g.asMonths=function(){return this.as("months")},g.years=function(){return this.get("years")},g.asYears=function(){return this.as("years")},v}();return function(v,g,h){e=h,r=h().$utils(),h.duration=function(R,U){var M=h.locale();return f(R,{$l:M},U)},h.isDuration=m;var T=g.prototype.add,w=g.prototype.subtract;g.prototype.add=function(R,U){return m(R)&&(R=R.asMilliseconds()),T.bind(this)(R,U)},g.prototype.subtract=function(R,U){return m(R)&&(R=R.asMilliseconds()),w.bind(this)(R,U)}}})})(xt);var en=xt.exports;const tn=Ns(en),rn={class:"mr-1"},sn={class:"text-gray-500 text-sm"},nn={class:"text-gray-500 text-sm ml-1"},on={key:0},an={key:1},ln={key:2},cn="https://dragonmo.mobox.io/dragon/open_egg/",Pe=fe({__name:"DragonNft",props:{dragon:{},isShowTransfer:{type:Boolean}},emits:["onRefresh"],setup(n,{emit:t}){const{dragon:e,isShowTransfer:r=!0}=n,s=ge(),o=F(!1),a=F(""),l=()=>{o.value=!0},i=F(!1),c=F([{text:"",value:"",disabled:!0}]),u=()=>{let f=[];for(let b=0;b<s.address.length;b++){let E=s.address[b].nickname+" "+$s(s.address[b].address),d=s.address[b].address,S=!1;b==s.changeAddressIndex&&(S=!0,E+=" <发送地址>"),f.push({text:E,value:d,disabled:S})}c.value=f,i.value=!0},p=({selectedValues:f})=>{a.value=f[0],i.value=!1},$=async()=>{de({duration:0,message:"开蛋抽券中"});let f=cn+e.hatch_id,E="dragon_open_egg_"+Math.floor(Date.now()/36e4)+"_"+e.id,d=s.address[s.changeAddressIndex].key;const P=await new ue(d,Ee).signMessage(E),I={owner:s.address[s.changeAddressIndex].address.toLowerCase(),sign:P};let v=await Is(f,I);if(console.log(v),v.code==2e4){Y();let g="随机幸运属性为："+je[v.data.luckyEle],h="没有抽到奖券。";v.data.ticket>0&&(h="抽到奖券："+v.data.ticket),Rs({title:"抽券结果",message:g+"。"+h}).then(()=>{t("onRefresh")})}else Y(),xe(v.info)},m=async()=>{de({duration:0,message:"操作执行中"});try{let f=s.address[s.changeAddressIndex].address,b=s.address[s.changeAddressIndex].key,E=new ue(b,Ee);await(await new ct(Le.address,Le.abi,E).safeTransferFrom(f,a.value,e.id,"0x00")).wait()}catch(f){Y(),xe(f.toString()),console.log("Error!"),await Se(2e3)}await Se(1e3),t("onRefresh")};return(f,b)=>{const E=C("van-tag"),d=C("van-count-down"),S=C("van-button"),P=C("van-cell"),I=C("van-field"),v=C("van-cell-group"),g=C("van-dialog"),h=C("van-picker"),T=C("van-popup");return A(),j(V,null,[_("div",{class:oe(["rounded-lg shadow-lg max-w-sm p-1 border-1 text-center","border-"+O(Q).find(w=>w.quality==f.dragon.level).color+"-500"])},[_("div",null,[_("span",rn,N(f.dragon.name),1),k(E,{plain:"",color:O(Q).find(w=>w.quality==f.dragon.level).rgb},{default:x(()=>[D(N(O(Q).find(w=>w.quality==f.dragon.level).name),1)]),_:1},8,["color"])]),_("div",sn,"#"+N(f.dragon.id),1),_("div",null,[(A(!0),j(V,null,ke(f.dragon.elements,(w,R)=>(A(),L(E,{class:"mr-1",plain:"",key:R},{default:x(()=>[D(N(O(je)[w]),1)]),_:2},1024))),128)),_("span",nn,N(f.dragon.attrs[6])+"/7",1)]),f.dragon.diffTimeStamp>0?(A(),j("div",on,[k(d,{class:"text-xs",time:f.dragon.diffTimeStamp,format:"DD 天 HH 时 mm 分 ss 秒"},null,8,["time"])])):q("",!0),f.dragon.state==0&&f.dragon.hatch_id==0&&f.isShowTransfer?(A(),j("div",an,[k(S,{plain:"",type:"default",size:"small",icon:"paid-o",class:"m-2",onClick:b[0]||(b[0]=w=>l())},{default:x(()=>[D(" 转账 ")]),_:1})])):q("",!0),f.dragon.state==0&&f.dragon.hatch_id!=0&&f.isShowTransfer?(A(),j("div",ln,[k(S,{plain:"",type:"primary",size:"small",icon:"bulb-o",class:"m-2",onClick:b[1]||(b[1]=w=>$())},{default:x(()=>[D(" 开蛋抽券 ")]),_:1})])):q("",!0),_("div",null,[f.dragon.state==1?(A(),L(E,{key:0,type:"warning"},{default:x(()=>[D("繁殖中")]),_:1})):q("",!0)]),_("div",null,[f.dragon.state==2?(A(),L(E,{key:0,type:"primary"},{default:x(()=>[D("孵化蛋")]),_:1})):q("",!0)])],2),k(g,{show:o.value,"onUpdate:show":b[3]||(b[3]=w=>o.value=w),title:"转账","show-cancel-button":"",onConfirm:m},{default:x(()=>[k(v,{inset:""},{default:x(()=>[k(P,{title:"发送昵称",value:O(s).address[O(s).changeAddressIndex].nickname},null,8,["value"]),k(P,{title:"发送地址",value:O(s).address[O(s).changeAddressIndex].address},null,8,["value"]),k(P,{title:"NFT"},{"right-icon":x(()=>[_("div",null,[D(N(f.dragon.name)+" id:"+N(f.dragon.id)+" ",1),k(E,{plain:"",color:O(Q).find(w=>w.quality==f.dragon.level).rgb},{default:x(()=>[D(N(O(Q).find(w=>w.quality==f.dragon.level).name),1)]),_:1},8,["color"]),D(" "+N(f.dragon.attrs[6])+"/7 ",1)])]),_:1}),k(I,{modelValue:a.value,"onUpdate:modelValue":b[2]||(b[2]=w=>a.value=w),label:"接受地址"},{button:x(()=>[k(S,{size:"small",type:"primary",onClick:u},{default:x(()=>[D("选择")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["show"]),k(T,{show:i.value,"onUpdate:show":b[5]||(b[5]=w=>i.value=w),round:"",position:"bottom",teleport:"body"},{default:x(()=>[k(h,{columns:c.value,onCancel:b[4]||(b[4]=w=>i.value=!1),onConfirm:p,onClickOption:p},null,8,["columns"])]),_:1},8,["show"])],64)}}}),un={key:0},dn={class:"m-2 text-center"},hn={class:"m-2 text-gray-500 text-center text-sm"},fn={class:"text-gray-800"},gn={class:"text-gray-400 ml-1 text-xs"},pn={class:"mt-4 mb-2 text-center"},mn=fe({__name:"DragonBreed",props:{dragons:{}},emits:["onRefresh"],setup(n,{emit:t}){const e=n,r=ge(),s=F(!1),o=F(0),a=F({fa_level:1,ma_level:1,level_1:70,level_2:30,level_3:0,level_4:0}),l=F([{name:"没有可选择的Dragon",disabled:!0,index:-1}]),i=F([-1,-1]),c=F(0),u=()=>{let E=[];for(let d=0;d<e.dragons.length;d++){let S="";for(let g=0;g<e.dragons[d].elements.length;g++)S=S+" "+je[e.dragons[d].elements[g]];let P=Q.find(g=>g.quality==e.dragons[d].level).name+" "+e.dragons[d].name+" "+e.dragons[d].attrs[6]+"/7 "+S,I=!1;(d==i.value[0]||d==i.value[1])&&(I=!0,P+=" <已选>");let v=-1;if(i.value[0]>-1&&(v=i.value[0]),i.value[1]>-1&&(v=i.value[1]),v>-1&&v!=d){let g=e.dragons[v];(e.dragons[d].attrs[8]==g.id||e.dragons[d].attrs[9]==g.id)&&(I=!0,P+=" <父母>"),(e.dragons[d].attrs[8]==g.attrs[8]||e.dragons[d].attrs[8]==g.attrs[9]||e.dragons[d].attrs[9]==g.attrs[8]||e.dragons[d].attrs[9]==g.attrs[9])&&(I=!0,P+=" <同代>")}E.push({name:P,disabled:I,index:d})}e.dragons.length>0?l.value=E:l.value=[{name:"没有可选择的Dragon",disabled:!0,index:-1}]},p=E=>{c.value=E,u(),s.value=!0},$=async E=>{if(i.value[c.value]=E.index,i.value[0]>-1&&i.value[1]>-1){let d=e.dragons[i.value[0]].level,S=e.dragons[i.value[1]].level,P=We.find(I=>I.fa_level==d&&I.ma_level==S);P||(P=We.find(I=>I.fa_level==S&&I.ma_level==d)),console.log("res_chance",P),P&&(a.value=P),await m()}},m=async()=>{o.value=0;let E=e.dragons[i.value[0]].level,d=e.dragons[i.value[1]].level,S=e.dragons[i.value[0]].attrs[6],P=e.dragons[i.value[1]].attrs[6],I="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",v=await X.getBreedPrice(E,d,S,P,I);o.value=v},f=async()=>{const E=de({duration:0,message:"操作执行中"});let d=r.address[r.changeAddressIndex],S=await X.getSuggestIndex(d.address);if(console.log("suggestIndex",S.toString()),S=="255"){Y(),xe("超出单账号同时繁殖数量！");return}let P=e.dragons[i.value[0]].id,I=e.dragons[i.value[1]].id,v="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",g=o.value,h=new ue(d.key,Ee);try{E.message="开始执行繁殖...",await(await X.connect(h).beginBreed(P,I,S,v,g,{value:g})).wait()}catch(T){Y(),xe(T.toString()),console.log(T),await Se(2e3);return}E.message="开始执行孵化...",await b(),i.value=[-1,-1],t("onRefresh")},b=async()=>{let E=r.address[r.changeAddressIndex],d=await X.getHatchData(E.address);for(console.log("hatchData",d.toString());!(d.status=="1"&&d.bHash!=="0x0000000000000000000000000000000000000000000000000000000000000000");)console.log("不符合孵化条件，5秒后再次检测"),await Se(5e3),d=await X.getHatchData(E.address);console.log("do end breed!");let S=new ue(E.key,Ee);await X.connect(S).endBreed()};return Fe(()=>{u()}),(E,d)=>{const S=C("van-grid-item"),P=C("van-grid"),I=C("van-button"),v=C("van-cell-group"),g=C("van-action-sheet");return A(),j(V,null,[k(v,{inset:""},{default:x(()=>[k(P,{"column-num":3,class:"pt-5 pb-2"},{default:x(()=>[i.value[0]==-1?(A(),L(S,{key:0,class:"rounded-lg max-w-sm p-1 border-2 text-center",icon:"plus",text:"添加",onClick:d[0]||(d[0]=h=>p(0))})):q("",!0),i.value[0]>=0?(A(),L(S,{key:1,onClick:d[2]||(d[2]=h=>p(0))},{default:x(()=>[k(Pe,{dragon:e.dragons[i.value[0]],isShowTransfer:!1,onOnRefresh:d[1]||(d[1]=()=>{})},null,8,["dragon"])]),_:1})):q("",!0),k(S,{icon:"like-o",class:"text-gray-400"}),i.value[1]==-1?(A(),L(S,{key:2,class:"rounded-lg max-w-sm p-1 border-2 text-center",icon:"plus",text:"添加",onClick:d[3]||(d[3]=h=>p(1))})):q("",!0),i.value[1]>=0?(A(),L(S,{key:3,onClick:d[5]||(d[5]=h=>p(1))},{default:x(()=>[k(Pe,{dragon:e.dragons[i.value[1]],isShowTransfer:!1,onOnRefresh:d[4]||(d[4]=()=>{})},null,8,["dragon"])]),_:1})):q("",!0)]),_:1}),i.value[0]>-1&&i.value[1]>-1?(A(),j("div",un,[_("div",dn,[_("span",{class:oe(["text-sm mr-1","text-gray-500"])},"普通 "+N(a.value.level_1.toFixed(1))+"%",1),_("span",{class:oe(["text-sm mr-1","text-green-500"])},"良好 "+N(a.value.level_2.toFixed(1))+"%",1),_("span",{class:oe(["text-sm mr-1","text-blue-500"])},"稀有 "+N(a.value.level_3.toFixed(1))+"%",1),_("span",{class:oe(["text-sm mr-1","text-fuchsia-500"])},"史诗 "+N(a.value.level_4.toFixed(1))+"%",1)]),_("div",hn,[D(" 费用："),_("span",fn,N(parseFloat(O(Et).utils.formatUnits(o.value,"ether")).toFixed(5)),1),D("ETH "),_("span",gn,"账号余额："+N(O(r).balances.eth.toFixed(5))+"ETH",1)]),_("div",pn,[k(I,{type:"primary",onClick:f,disabled:!(o.value>0)},{default:x(()=>[D("繁殖")]),_:1},8,["disabled"])])])):q("",!0)]),_:1}),k(g,{show:s.value,"onUpdate:show":d[6]||(d[6]=h=>s.value=h),actions:l.value,title:"选择MoDragon","close-on-click-action":"",onSelect:$,teleport:"body"},null,8,["show","actions"])],64)}}}),bn={key:0},vn={key:1},yn={class:"text-gray-800"},wn=_("span",{class:"text-xs text-gray-500"},"MoDragon",-1),_n=_("span",{class:"text-xs text-gray-500"},"ETH",-1),kn=_("span",{class:"text-xs text-gray-500"},"ARB",-1),En=_("span",{class:"text-xs text-gray-500"},"MBOX",-1),xn={class:"m-2"},Sn={class:"text-lg text-gray-500 ml-3"},Tn={class:"grid grid-cols-3 md:lg:xl:grid-cols-6 group bg-white shadow-xl shadow-neutral-100 border"},Pn=_("div",{class:"m-2"},[_("span",{class:"text-lg text-gray-500 ml-3"},"繁殖操作")],-1),An={class:"m-2"},Nn={class:"text-lg text-gray-500 ml-3"},$n={class:"grid grid-cols-3 md:lg:xl:grid-cols-6 group bg-white shadow-xl shadow-neutral-100 border"},In=fe({__name:"account",setup(n){ut.extend(tn);const{onActivated:t}=Cs(),e=ge(),r=F([]),s=F([]);Os(()=>[e.address,e.changeAddressIndex],async(a,l)=>{await o(),await e.getChangeAddressBalance()}),t(async({address:a})=>{await o(),await e.getChangeAddressBalance()}),Fe(async()=>{await o(),await e.getChangeAddressBalance()});async function o(){if(de({duration:0,forbidClick:!0,message:"更新数据"}),e.address.length==0||e.changeAddressIndex<0){Y();return}let a=await e.upOneAddressNft(e.changeAddressIndex);r.value=a.nfts,s.value=a.nfts.filter(l=>l.state==0&&l.hatch_id==0),Y()}return(a,l)=>{const i=C("van-empty"),c=C("van-grid-item"),u=C("van-grid");return A(),j(V,null,[r.value.length==0?(A(),j("div",bn,[k(i,{image:"search",description:"没有发现龙蛋NFT"})])):q("",!0),r.value.length>0?(A(),j("div",vn,[k(u,{class:"m-2","column-num":4},{default:x(()=>[k(c,null,{icon:x(()=>[_("span",yn,N(r.value.length),1)]),text:x(()=>[wn]),_:1}),k(c,null,{icon:x(()=>[_("span",null,N(O(e).balances.eth.toFixed(2)),1)]),text:x(()=>[_n]),_:1}),k(c,null,{icon:x(()=>[_("span",null,N(O(e).balances.arb.toFixed(0)),1)]),text:x(()=>[kn]),_:1}),k(c,null,{icon:x(()=>[_("span",null,N(O(e).balances.mbox.toFixed(0)),1)]),text:x(()=>[En]),_:1})]),_:1}),_("div",xn,[_("span",Sn,"空闲状态: "+N(r.value.filter(p=>p.state==0).length),1)]),_("div",Tn,[(A(!0),j(V,null,ke(r.value.filter(p=>p.state==0),(p,$)=>(A(),j("div",{key:"dragon0"+$+p.id,class:"m-3"},[k(Pe,{dragon:p,isShowTransfer:!0,onOnRefresh:o},null,8,["dragon"])]))),128))]),Pn,(A(),L(mn,{dragons:s.value,key:O(e).address[O(e).changeAddressIndex].address,onOnRefresh:o},null,8,["dragons"])),_("div",An,[_("span",Nn,"繁殖状态: "+N(r.value.filter(p=>p.state>0).length),1)]),_("div",$n,[(A(!0),j(V,null,ke(r.value.filter(p=>p.state>0),(p,$)=>(A(),j("div",{key:"dragon"+$,class:"m-3"},[k(Pe,{dragon:p,isShowTransfer:!1,onOnRefresh:o},null,8,["dragon"])]))),128))])])):q("",!0)],64)}}}),Rn={key:0},Cn={class:"text-gray-600 text-sm ml-1"},On=_("span",null,null,-1),Bn=_("span",{class:"ml-5 text-gray-500"},"最近一次繁殖结束： ",-1),jn={key:1},Dn=fe({__name:"collect",setup(n){const t=ge(),e=F(!1);Fe(async()=>{await r()});const r=async()=>{de({duration:0,forbidClick:!0,message:"更新数据"}),e.value=!0,await t.upAllAddressNfts(),e.value=!1,console.log("更新状态"),Y()};return(s,o)=>{const a=C("van-button"),l=C("van-cell"),i=C("van-tag"),c=C("van-cell-group"),u=C("van-empty");return O(t).address.length>0?(A(),j("div",Rn,[k(c,{class:"my-2",inset:""},{default:x(()=>[k(l,{title:"各账号详情",icon:"user-o"},{value:x(()=>[k(a,{type:"success",size:"mini",class:"mr-2",loading:e.value,"loading-text":"读取中",onClick:r},{default:x(()=>[D(" 更新数据 ")]),_:1},8,["loading"])]),_:1}),(A(!0),j(V,null,ke(O(t).nftinfos,(p,$)=>(A(),j(V,{key:$+p.address},[k(l,null,{title:x(()=>[k(i,{round:"",plain:"",type:"primary"},{default:x(()=>[D(N($+1),1)]),_:2},1024),_("span",Cn,N(p.nickname),1),On]),value:x(()=>[D(" 空闲:"+N(p.nfts.filter(m=>m.state==0).length)+"/繁殖:"+N(p.nfts.filter(m=>m.state>0).length),1)]),_:2},1024),k(l,null,{title:x(()=>[Bn]),value:x(()=>[D(N(O(ut).unix(p.nfts.find(m=>m.state>0).attrs[7]).format("MM/DDTHH:mm")),1)]),_:2},1024)],64))),128))]),_:1})])):(A(),j("div",jn,[k(u,{description:"账号数量为空"})]))}}}),Mn=fe({__name:"index",setup(n){const t=ge();return(e,r)=>O(t).changeAddressIndex>=0?(A(),L(In,{key:0})):(A(),L(Dn,{key:1}))}});export{Mn as default};
