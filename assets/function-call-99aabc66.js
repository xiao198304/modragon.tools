import{$ as I,t as M,z as v,A as z,a0 as N,M as i,a1 as O,a2 as L,a3 as j,a4 as k,a5 as w,a6 as U,a7 as p,a8 as V,a9 as q,aa as A,ab as h,ac as D,ad as E,ae as F,y as H,af as _,ag as $}from"./index-8a36bf6b.js";let u=0;function G(e){e?(u||document.body.classList.add("van-toast--unclickable"),u++):u&&(u--,u||document.body.classList.remove("van-toast--unclickable"))}const[J,c]=I("toast"),K=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],Q={icon:String,show:Boolean,type:k("text"),overlay:Boolean,message:w,iconSize:w,duration:U(2e3),position:k("middle"),teleport:[String,Object],wordBreak:String,className:p,iconPrefix:String,transition:k("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:p,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var R=M({name:J,props:Q,emits:["update:show"],setup(e,{emit:t,slots:o}){let f,l=!1;const r=()=>{const a=e.show&&e.forbidClick;l!==a&&(l=a,G(l))},d=a=>t("update:show",a),y=()=>{e.closeOnClick&&d(!1)},m=()=>clearTimeout(f),g=()=>{const{icon:a,type:n,iconSize:C,iconPrefix:T,loadingType:B}=e;if(a||n==="success"||n==="fail")return i(V,{name:a||n,size:C,class:c("icon"),classPrefix:T},null);if(n==="loading")return i(q,{class:c("loading"),size:C,type:B},null)},x=()=>{const{type:a,message:n}=e;if(o.message)return i("div",{class:c("text")},[o.message()]);if(A(n)&&n!=="")return a==="html"?i("div",{key:0,class:c("text"),innerHTML:String(n)},null):i("div",{class:c("text")},[n])};return v(()=>[e.show,e.forbidClick],r),v(()=>[e.show,e.type,e.message,e.duration],()=>{m(),e.show&&e.duration>0&&(f=setTimeout(()=>{d(!1)},e.duration))}),z(r),N(r),()=>i(j,O({class:[c([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:y,onClosed:m,"onUpdate:show":d},L(e,K)),{default:()=>[g(),x()]})}});const W={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let s=[],X=!1,b=h({},W);const Y=new Map;function S(e){return D(e)?e:{message:e}}function Z(){const{instance:e,unmount:t}=F({setup(){const o=H(""),{open:f,state:l,close:r,toggle:d}=_(),y=()=>{},m=()=>i(R,O(l,{onClosed:y,"onUpdate:show":d}),null);return v(o,g=>{l.message=g}),$().render=m,{open:f,close:r,message:o}}});return e}function ee(){if(!s.length||X){const e=Z();s.push(e)}return s[s.length-1]}function te(e={}){if(!E)return{};const t=ee(),o=S(e);return t.open(h({},b,Y.get(o.type||b.type),o)),t}const P=e=>t=>te(h({type:e},S(t))),oe=P("loading"),se=P("fail"),ie=e=>{s.length&&(e?(s.forEach(t=>{t.close()}),s=[]):s[0].close())};export{oe as a,se as b,ie as c,R as s};
