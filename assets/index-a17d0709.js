import{A as Pt,H as Nt,M as $t,d as Rt,e as Ct,N as Ot,O as Bt,T as jt,W as Dt,Z as Ut,L as _,v as L,J as ie,f as U,B as Fe,h as he,j as me,k as qe,l as He,m as se,n as nt,o as je,p as ot,q as Y,P as at,t as De,u as ne,w as it,x as lt,y as ct,z as ut,F as Mt,C as Ft,R as qt,D as Ht,E as Lt,G as Wt,I as Vt,K as zt,Q as Gt,S as Jt,U as Yt,V as Kt,X as Zt,Y as Xt,_ as Qt,$ as er,a0 as tr,a1 as rr,a2 as sr,a3 as nr,a4 as or,a5 as ar,a6 as ir,a7 as lr,a8 as cr,a9 as ur,aa as dr,ab as hr,ac as fr,ad as gr,ae as pr,af as mr,ag as br,ah as vr,ai as wr,aj as yr,ak as _r,al as dt,am as kr,an as Er,ao as xr,ap as Sr,aq as Tr,ar as Ar,as as Ir,at as Pr,au as Nr,av as $r,aw as Rr,ax as Cr,ay as Or,az as Br,aA as jr,aB as Dr,aC as Ur,aD as Mr,aE as Fr,aF as qr,aG as Hr,aH as Lr,aI as Wr,aJ as Vr,aK as zr,aL as Gr,aM as Jr,aN as Yr,aO as Kr,aP as Zr,aQ as Xr,aR as Qr,aS as es,aT as ht,aU as ts,aV as rs,aW as ss,aX as ns,aY as os,aZ as as,a_ as is,a$ as ls,b0 as cs,b1 as us,b2 as ds,b3 as hs,b4 as fs,b5 as gs,b6 as ps,b7 as ms,b8 as bs,b9 as vs,ba as ws,bb as ys,bc as Ue,bd as _s,be as ks,bf as Es,bg as xs,bh as oe,bi as Ss,bj as Ts,bk as As,c as Is,g as Ps,bl as be,bm as ve,bn as F,bo as B,bp as P,bq as M,br as E,bs as I,bt as w,bu as y,bv as D,bw as $,bx as J,by as Z,bz as Ae,bA as W,bB as Me,bC as H,bD as ce,bE as Ns,bF as ae,bG as fe,bH as z,bI as $s,bJ as ge,bK as we,bL as te,bM as Rs,bN as Cs,bO as Le,bP as ze,bQ as ee,bR as ft,bS as Os,bT as Bs}from"./index-efe2ad3b.js";const js="Ξ",Ds=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:Pt,EtherSymbol:js,HashZero:Nt,MaxInt256:$t,MaxUint256:Rt,MinInt256:Ct,NegativeOne:Ot,One:Bt,Two:jt,WeiPerEther:Dt,Zero:Ut},Symbol.toStringTag,{value:"Module"}));let pe=null;try{if(pe=WebSocket,pe==null)throw new Error("inject please")}catch{const t=new _(L);pe=function(){t.throwError("WebSockets not supported in this environment",_.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Ce=globalThis&&globalThis.__awaiter||function(o,t,e,r){function s(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(l){try{c(r.next(l))}catch(b){a(b)}}function i(l){try{c(r.throw(l))}catch(b){a(b)}}function c(l){l.done?n(l.value):s(l.value).then(u,i)}c((r=r.apply(o,t||[])).next())})};const ye=new _(L);let Us=1;class Ne extends ie{constructor(t,e){e==="any"&&ye.throwError("WebSocketProvider does not support 'any' network yet",_.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof t=="string"?super(t,e):super("_websocket",e),this._pollingInterval=-1,this._wsReady=!1,typeof t=="string"?U(this,"_websocket",new pe(this.connection.url)):U(this,"_websocket",t),U(this,"_requests",{}),U(this,"_subs",{}),U(this,"_subIds",{}),U(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(s=>{this.websocket.send(this._requests[s].payload)})},this.websocket.onmessage=s=>{const n=s.data,a=JSON.parse(n);if(a.id!=null){const u=String(a.id),i=this._requests[u];if(delete this._requests[u],a.result!==void 0)i.callback(null,a.result),this.emit("debug",{action:"response",request:JSON.parse(i.payload),response:a.result,provider:this});else{let c=null;a.error?(c=new Error(a.error.message||"unknown error"),U(c,"code",a.error.code||null),U(c,"response",n)):c=new Error("unknown error"),i.callback(c,void 0),this.emit("debug",{action:"response",error:c,request:JSON.parse(i.payload),provider:this})}}else if(a.method==="eth_subscription"){const u=this._subs[a.params.subscription];u&&u.processFunc(a.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(t){ye.throwError("cannot reset events block on WebSocketProvider",_.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(t){ye.throwError("cannot set polling interval on WebSocketProvider",_.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Ce(this,void 0,void 0,function*(){return null})}set polling(t){t&&ye.throwError("cannot set polling on WebSocketProvider",_.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(t,e){const r=Us++;return new Promise((s,n)=>{function a(i,c){return i?n(i):s(c)}const u=JSON.stringify({method:t,params:e,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(u),provider:this}),this._requests[String(r)]={callback:a,payload:u},this._wsReady&&this.websocket.send(u)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(t,e,r){return Ce(this,void 0,void 0,function*(){let s=this._subIds[t];s==null&&(s=Promise.all(e).then(a=>this.send("eth_subscribe",a)),this._subIds[t]=s);const n=yield s;this._subs[n]={tag:t,processFunc:r}})}_startEvent(t){switch(t.type){case"block":this._subscribe("block",["newHeads"],e=>{const r=Fe.from(e.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],e=>{this.emit("pending",e)});break;case"filter":this._subscribe(t.tag,["logs",this._getFilter(t.filter)],e=>{e.removed==null&&(e.removed=!1),this.emit(t.filter,this.formatter.filterLog(e))});break;case"tx":{const e=r=>{const s=r.hash;this.getTransactionReceipt(s).then(n=>{n&&this.emit(s,n)})};e(t),this._subscribe("tx",["newHeads"],r=>{this._events.filter(s=>s.type==="tx").forEach(e)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",t);break}}_stopEvent(t){let e=t.tag;if(t.type==="tx"){if(this._events.filter(s=>s.type==="tx").length)return;e="tx"}else if(this.listenerCount(t.event))return;const r=this._subIds[e];r&&(delete this._subIds[e],r.then(s=>{this._subs[s]&&(delete this._subs[s],this.send("eth_unsubscribe",[s]))}))}destroy(){return Ce(this,void 0,void 0,function*(){this.websocket.readyState===pe.CONNECTING&&(yield new Promise(t=>{this.websocket.onopen=function(){t(!0)},this.websocket.onerror=function(){t(!1)}})),this.websocket.close(1e3)})}}var Ms=globalThis&&globalThis.__awaiter||function(o,t,e,r){function s(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(l){try{c(r.next(l))}catch(b){a(b)}}function i(l){try{c(r.throw(l))}catch(b){a(b)}}function c(l){l.done?n(l.value):s(l.value).then(u,i)}c((r=r.apply(o,t||[])).next())})};const ue=new _(L);class gt extends ie{detectNetwork(){const t=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return Ms(this,void 0,void 0,function*(){let e=this.network;return e==null&&(e=yield t.detectNetwork.call(this),e||ue.throwError("no network detected",_.errors.UNKNOWN_ERROR,{}),this._network==null&&(U(this,"_network",e),this.emit("network",e,null))),e})}}class G extends gt{constructor(t,e){ue.checkAbstract(new.target,G),t=he(new.target,"getNetwork")(t),e=he(new.target,"getApiKey")(e);const r=he(new.target,"getUrl")(t,e);super(r,t),typeof e=="string"?U(this,"apiKey",e):e!=null&&Object.keys(e).forEach(s=>{U(this,s,e[s])})}_startPending(){ue.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(t){return ue.throwError("API provider does not support signing",_.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(t){return t}static getUrl(t,e){return ue.throwError("not implemented; sub-classes must override getUrl",_.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const Ge=new _(L),Se="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class pt extends Ne{constructor(t,e){const r=new We(t,e),s=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(s,r.network),U(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===Se}}class We extends G{static getWebSocketProvider(t,e){return new pt(t,e)}static getApiKey(t){return t==null?Se:(t&&typeof t!="string"&&Ge.throwArgumentError("invalid apiKey","apiKey",t),t)}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"ropsten":r="eth-ropsten.alchemyapi.io/v2/";break;case"rinkeby":r="eth-rinkeby.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.alchemyapi.io/v2/";break;case"kovan":r="eth-kovan.alchemyapi.io/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-rinkeby":r="arb-rinkeby.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-kovan":r="opt-kovan.g.alchemy.com/v2/";break;default:Ge.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+e,throttleCallback:(s,n)=>(e===Se&&me(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Se}}const Fs=new _(L),_e="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function qs(o){switch(o){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return Fs.throwArgumentError("unsupported network","name",o)}class mt extends G{isCommunityResource(){return this.apiKey===_e}static getApiKey(t){return t??_e}static getUrl(t,e){e==null&&(e=_e);const r={allowGzip:!0,url:"https://"+qs(t.name)+e,throttleCallback:(s,n)=>(e.apiKey===_e&&me(),Promise.resolve(!0))};return e.projectSecret!=null&&(r.user="",r.password=e.projectSecret),r}}var Hs=globalThis&&globalThis.__awaiter||function(o,t,e,r){function s(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(l){try{c(r.next(l))}catch(b){a(b)}}function i(l){try{c(r.throw(l))}catch(b){a(b)}}function c(l){l.done?n(l.value):s(l.value).then(u,i)}c((r=r.apply(o,t||[])).next())})};const Je=new _(L);class bt extends G{static getApiKey(t){return t!=null&&Je.throwArgumentError("apiKey not supported for cloudflare","apiKey",t),null}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="https://cloudflare-eth.com/";break;default:Je.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return Hs(this,void 0,void 0,function*(){return t==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,t,e)})}}var ke=globalThis&&globalThis.__awaiter||function(o,t,e,r){function s(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(l){try{c(r.next(l))}catch(b){a(b)}}function i(l){try{c(r.throw(l))}catch(b){a(b)}}function c(l){l.done?n(l.value):s(l.value).then(u,i)}c((r=r.apply(o,t||[])).next())})};const K=new _(L);function Ye(o){const t={};for(let e in o){if(o[e]==null)continue;let r=o[e];e==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[e]?r=nt(je(r)):e==="accessList"?r="["+ot(r).map(s=>`{address:"${s.address}",storageKeys:["${s.storageKeys.join('","')}"]}`).join(",")+"]":r=je(r),t[e]=r)}return t}function Ls(o){if(o.status==0&&(o.message==="No records found"||o.message==="No transactions found"))return o.result;if(o.status!=1||o.message!="OK"){const t=new Error("invalid response");throw t.result=JSON.stringify(o),(o.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return o.result}function Ke(o){if(o&&o.status==0&&o.message=="NOTOK"&&(o.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");throw t.result=JSON.stringify(o),t.throttleRetry=!0,t}if(o.jsonrpc!="2.0"){const t=new Error("invalid response");throw t.result=JSON.stringify(o),t}if(o.error){const t=new Error(o.error.message||"unknown error");throw o.error.code&&(t.code=o.error.code),o.error.data&&(t.data=o.error.data),t}return o.result}function Ze(o){if(o==="pending")throw new Error("pending not supported");return o==="latest"?o:parseInt(o.substring(2),16)}const Xe="9D13ZE7XSBTJ94N9BNJ2MA33VMAY2YPIRB";function Oe(o,t,e){if(o==="call"&&t.code===_.errors.SERVER_ERROR){const s=t.error;if(s&&(s.message.match(/reverted/i)||s.message.match(/VM execution error/i))){let n=s.data;if(n&&(n="0x"+n.replace(/^.*0x/i,"")),Y(n))return n;K.throwError("missing revert data in call exception",_.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let r=t.message;throw t.code===_.errors.SERVER_ERROR&&(t.error&&typeof t.error.message=="string"?r=t.error.message:typeof t.body=="string"?r=t.body:typeof t.responseText=="string"&&(r=t.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&K.throwError("insufficient funds for intrinsic transaction cost",_.errors.INSUFFICIENT_FUNDS,{error:t,method:o,transaction:e}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&K.throwError("nonce has already been used",_.errors.NONCE_EXPIRED,{error:t,method:o,transaction:e}),r.match(/another transaction with same nonce/)&&K.throwError("replacement fee too low",_.errors.REPLACEMENT_UNDERPRICED,{error:t,method:o,transaction:e}),r.match(/execution failed due to an exception|execution reverted/)&&K.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",_.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:o,transaction:e}),t}class vt extends qe{constructor(t,e){super(t),U(this,"baseUrl",this.getBaseUrl()),U(this,"apiKey",e||Xe)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"ropsten":return"https://api-ropsten.etherscan.io";case"rinkeby":return"https://api-rinkeby.etherscan.io";case"kovan":return"https://api-kovan.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"optimism":return"https://api-optimistic.etherscan.io"}return K.throwArgumentError("unsupported network","network",this.network.name)}getUrl(t,e){const r=Object.keys(e).reduce((n,a)=>{const u=e[a];return u!=null&&(n+=`&${a}=${u}`),n},""),s=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${t}${r}${s}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(t,e){return e.module=t,e.apikey=this.apiKey,e}fetch(t,e,r){return ke(this,void 0,void 0,function*(){const s=r?this.getPostUrl():this.getUrl(t,e),n=r?this.getPostData(t,e):null,a=t==="proxy"?Ke:Ls;this.emit("debug",{action:"request",request:s,provider:this});const u={url:s,throttleSlotInterval:1e3,throttleCallback:(l,b)=>(this.isCommunityResource()&&me(),Promise.resolve(!0))};let i=null;n&&(u.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},i=Object.keys(n).map(l=>`${l}=${n[l]}`).join("&"));const c=yield He(u,i,a||Ke);return this.emit("debug",{action:"response",request:s,response:se(c),provider:this}),c})}detectNetwork(){return ke(this,void 0,void 0,function*(){return this.network})}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return ke(this,void 0,void 0,function*(){switch(t){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch(s=>Oe("sendTransaction",s,e.signedTransaction));case"getBlock":if(e.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.transactionHash});case"call":{if(e.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const s=Ye(e.transaction);s.module="proxy",s.action="eth_call";try{return yield this.fetch("proxy",s,!0)}catch(n){return Oe("call",n,e.transaction)}}case"estimateGas":{const s=Ye(e.transaction);s.module="proxy",s.action="eth_estimateGas";try{return yield this.fetch("proxy",s,!0)}catch(n){return Oe("estimateGas",n,e.transaction)}}case"getLogs":{const s={action:"getLogs"};if(e.filter.fromBlock&&(s.fromBlock=Ze(e.filter.fromBlock)),e.filter.toBlock&&(s.toBlock=Ze(e.filter.toBlock)),e.filter.address&&(s.address=e.filter.address),e.filter.topics&&e.filter.topics.length>0&&(e.filter.topics.length>1&&K.throwError("unsupported topic count",_.errors.UNSUPPORTED_OPERATION,{topics:e.filter.topics}),e.filter.topics.length===1)){const u=e.filter.topics[0];(typeof u!="string"||u.length!==66)&&K.throwError("unsupported topic format",_.errors.UNSUPPORTED_OPERATION,{topic0:u}),s.topic0=u}const n=yield this.fetch("logs",s);let a={};for(let u=0;u<n.length;u++){const i=n[u];if(i.blockHash==null){if(a[i.blockNumber]==null){const c=yield this.getBlock(i.blockNumber);c&&(a[i.blockNumber]=c.hash)}i.blockHash=a[i.blockNumber]}}return n}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,t,e)})}getHistory(t,e,r){return ke(this,void 0,void 0,function*(){const s={action:"txlist",address:yield this.resolveName(t),startblock:e??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",s)).map(a=>{["contractAddress","to"].forEach(function(i){a[i]==""&&delete a[i]}),a.creates==null&&a.contractAddress!=null&&(a.creates=a.contractAddress);const u=this.formatter.transactionResponse(a);return a.timeStamp&&(u.timestamp=parseInt(a.timeStamp)),u})})}isCommunityResource(){return this.apiKey===Xe}}var Ie=globalThis&&globalThis.__awaiter||function(o,t,e,r){function s(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function u(l){try{c(r.next(l))}catch(b){a(b)}}function i(l){try{c(r.throw(l))}catch(b){a(b)}}function c(l){l.done?n(l.value):s(l.value).then(u,i)}c((r=r.apply(o,t||[])).next())})};const Q=new _(L);function Ee(){return new Date().getTime()}function Qe(o){let t=null;for(let e=0;e<o.length;e++){const r=o[e];if(r==null)return null;t?t.name===r.name&&t.chainId===r.chainId&&(t.ensAddress===r.ensAddress||t.ensAddress==null&&r.ensAddress==null)||Q.throwArgumentError("provider mismatch","networks",o):t=r}return t}function et(o,t){o=o.slice().sort();const e=Math.floor(o.length/2);if(o.length%2)return o[e];const r=o[e-1],s=o[e];return t!=null&&Math.abs(r-s)>t?null:(r+s)/2}function re(o){if(o===null)return"null";if(typeof o=="number"||typeof o=="boolean")return JSON.stringify(o);if(typeof o=="string")return o;if(Fe.isBigNumber(o))return o.toString();if(Array.isArray(o))return JSON.stringify(o.map(t=>re(t)));if(typeof o=="object"){const t=Object.keys(o);return t.sort(),"{"+t.map(e=>{let r=o[e];return typeof r=="function"?r="[function]":r=re(r),JSON.stringify(e)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof o)}let Ws=1;function tt(o){let t=null,e=null,r=new Promise(a=>{t=function(){e&&(clearTimeout(e),e=null),a()},e=setTimeout(t,o)});const s=a=>(r=r.then(a),r);function n(){return r}return{cancel:t,getPromise:n,wait:s}}const Vs=[_.errors.CALL_EXCEPTION,_.errors.INSUFFICIENT_FUNDS,_.errors.NONCE_EXPIRED,_.errors.REPLACEMENT_UNDERPRICED,_.errors.UNPREDICTABLE_GAS_LIMIT],zs=["address","args","errorArgs","errorSignature","method","transaction"];function xe(o,t){const e={weight:o.weight};return Object.defineProperty(e,"provider",{get:()=>o.provider}),o.start&&(e.start=o.start),t&&(e.duration=t-o.start),o.done&&(o.error?e.error=o.error:e.result=o.result||null),e}function Gs(o,t){return function(e){const r={};e.forEach(n=>{const a=o(n.result);r[a]||(r[a]={count:0,result:n.result}),r[a].count++});const s=Object.keys(r);for(let n=0;n<s.length;n++){const a=r[s[n]];if(a.count>=t)return a.result}}}function Js(o,t,e){let r=re;switch(t){case"getBlockNumber":return function(s){const n=s.map(u=>u.result);let a=et(s.map(u=>u.result),2);if(a!=null)return a=Math.ceil(a),n.indexOf(a+1)>=0&&a++,a>=o._highestBlockNumber&&(o._highestBlockNumber=a),o._highestBlockNumber};case"getGasPrice":return function(s){const n=s.map(a=>a.result);return n.sort(),n[Math.floor(n.length/2)]};case"getEtherPrice":return function(s){return et(s.map(n=>n.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(s){return s==null?null:(s=ne(s),s.confirmations=-1,re(s))};break;case"getBlock":e.includeTransactions?r=function(s){return s==null?null:(s=ne(s),s.transactions=s.transactions.map(n=>(n=ne(n),n.confirmations=-1,n)),re(s))}:r=function(s){return s==null?null:re(s)};break;default:throw new Error("unknown method: "+t)}return Gs(r,o.quorum)}function le(o,t){return Ie(this,void 0,void 0,function*(){const e=o.provider;return e.blockNumber!=null&&e.blockNumber>=t||t===-1?e:lt(()=>new Promise((r,s)=>{setTimeout(function(){return e.blockNumber>=t?r(e):o.cancelled?r(null):r(void 0)},0)}),{oncePoll:e})})}function Ys(o,t,e,r){return Ie(this,void 0,void 0,function*(){let s=o.provider;switch(e){case"getBlockNumber":case"getGasPrice":return s[e]();case"getEtherPrice":if(s.getEtherPrice)return s.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&Y(r.blockTag)&&(s=yield le(o,t)),s[e](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&Y(r.blockTag)&&(s=yield le(o,t)),s.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&Y(r.blockTag)&&(s=yield le(o,t)),s[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&Y(r.blockTag)&&(s=yield le(o,t)),s[e](r.transaction);case"getTransaction":case"getTransactionReceipt":return s[e](r.transactionHash);case"getLogs":{let n=r.filter;return(n.fromBlock&&Y(n.fromBlock)||n.toBlock&&Y(n.toBlock))&&(s=yield le(o,t)),s.getLogs(n)}}return Q.throwError("unknown method error",_.errors.UNKNOWN_ERROR,{method:e,params:r})})}class wt extends qe{constructor(t,e){t.length===0&&Q.throwArgumentError("missing providers","providers",t);const r=t.map((a,u)=>{if(at.isProvider(a)){const l=De(a)?2e3:750;return Object.freeze({provider:a,weight:1,stallTimeout:l,priority:1})}const i=ne(a);i.priority==null&&(i.priority=1),i.stallTimeout==null&&(i.stallTimeout=De(a)?2e3:750),i.weight==null&&(i.weight=1);const c=i.weight;return(c%1||c>512||c<1)&&Q.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${u}].weight`,c),Object.freeze(i)}),s=r.reduce((a,u)=>a+u.weight,0);e==null?e=s/2:e>s&&Q.throwArgumentError("quorum will always fail; larger than total weight","quorum",e);let n=Qe(r.map(a=>a.provider.network));n==null&&(n=new Promise((a,u)=>{setTimeout(()=>{this.detectNetwork().then(a,u)},0)})),super(n),U(this,"providerConfigs",Object.freeze(r)),U(this,"quorum",e),this._highestBlockNumber=-1}detectNetwork(){return Ie(this,void 0,void 0,function*(){const t=yield Promise.all(this.providerConfigs.map(e=>e.provider.getNetwork()));return Qe(t)})}perform(t,e){return Ie(this,void 0,void 0,function*(){if(t==="sendTransaction"){const i=yield Promise.all(this.providerConfigs.map(c=>c.provider.sendTransaction(e.signedTransaction).then(l=>l.hash,l=>l)));for(let c=0;c<i.length;c++){const l=i[c];if(typeof l=="string")return l}throw i[0]}this._highestBlockNumber===-1&&t!=="getBlockNumber"&&(yield this.getBlockNumber());const r=Js(this,t,e),s=it(this.providerConfigs.map(ne));s.sort((i,c)=>i.priority-c.priority);const n=this._highestBlockNumber;let a=0,u=!0;for(;;){const i=Ee();let c=s.filter(m=>m.runner&&i-m.start<m.stallTimeout).reduce((m,T)=>m+T.weight,0);for(;c<this.quorum&&a<s.length;){const m=s[a++],T=Ws++;m.start=Ee(),m.staller=tt(m.stallTimeout),m.staller.wait(()=>{m.staller=null}),m.runner=Ys(m,n,t,e).then(C=>{m.done=!0,m.result=C,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:T,backend:xe(m,Ee()),request:{method:t,params:se(e)},provider:this})},C=>{m.done=!0,m.error=C,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:T,backend:xe(m,Ee()),request:{method:t,params:se(e)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:T,backend:xe(m,null),request:{method:t,params:se(e)},provider:this}),c+=m.weight}const l=[];s.forEach(m=>{m.done||!m.runner||(l.push(m.runner),m.staller&&l.push(m.staller.getPromise()))}),l.length&&(yield Promise.race(l));const b=s.filter(m=>m.done&&m.error==null);if(b.length>=this.quorum){const m=r(b);if(m!==void 0)return s.forEach(T=>{T.staller&&T.staller.cancel(),T.cancelled=!0}),m;u||(yield tt(100).getPromise()),u=!1}const R=s.reduce((m,T)=>{if(!T.done||T.error==null)return m;const C=T.error.code;return Vs.indexOf(C)>=0&&(m[C]||(m[C]={error:T.error,weight:0}),m[C].weight+=T.weight),m},{});if(Object.keys(R).forEach(m=>{const T=R[m];if(T.weight<this.quorum)return;s.forEach(f=>{f.staller&&f.staller.cancel(),f.cancelled=!0});const C=T.error,O={};zs.forEach(f=>{C[f]!=null&&(O[f]=C[f])}),Q.throwError(C.reason||C.message,m,O)}),s.filter(m=>!m.done).length===0)break}return s.forEach(i=>{i.staller&&i.staller.cancel(),i.cancelled=!0}),Q.throwError("failed to meet quorum",_.errors.SERVER_ERROR,{method:t,params:e,results:s.map(i=>xe(i)),provider:this})})}}const yt=null,Te=new _(L),de="84842078b09946638c03157f83405213";class _t extends Ne{constructor(t,e){const r=new Ve(t,e),s=r.connection;s.password&&Te.throwError("INFURA WebSocket project secrets unsupported",_.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const n=s.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(n,t),U(this,"apiKey",r.projectId),U(this,"projectId",r.projectId),U(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===de}}class Ve extends G{static getWebSocketProvider(t,e){return new _t(t,e)}static getApiKey(t){const e={apiKey:de,projectId:de,projectSecret:null};return t==null||(typeof t=="string"?e.projectId=t:t.projectSecret!=null?(Te.assertArgument(typeof t.projectId=="string","projectSecret requires a projectId","projectId",t.projectId),Te.assertArgument(typeof t.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),e.projectId=t.projectId,e.projectSecret=t.projectSecret):t.projectId&&(e.projectId=t.projectId),e.apiKey=e.projectId),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"ropsten":r="ropsten.infura.io";break;case"rinkeby":r="rinkeby.infura.io";break;case"kovan":r="kovan.infura.io";break;case"goerli":r="goerli.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-kovan":r="optimism-kovan.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-rinkeby":r="arbitrum-rinkeby.infura.io";break;default:Te.throwError("unsupported network",_.errors.INVALID_ARGUMENT,{argument:"network",value:t})}const s={allowGzip:!0,url:"https://"+r+"/v3/"+e.projectId,throttleCallback:(n,a)=>(e.projectId===de&&me(),Promise.resolve(!0))};return e.projectSecret!=null&&(s.user="",s.password=e.projectSecret),s}isCommunityResource(){return this.projectId===de}}class Ks extends ie{send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const s={request:r,resolve:null,reject:null},n=new Promise((a,u)=>{s.resolve=a,s.reject=u});return this._pendingBatch.push(s),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const a=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const u=a.map(i=>i.request);return this.emit("debug",{action:"requestBatch",request:se(u),provider:this}),He(this.connection,JSON.stringify(u)).then(i=>{this.emit("debug",{action:"response",request:u,response:i,provider:this}),a.forEach((c,l)=>{const b=i[l];if(b.error){const R=new Error(b.error.message);R.code=b.error.code,R.data=b.error.data,c.reject(R)}else c.resolve(b.result)})},i=>{this.emit("debug",{action:"response",error:i,request:u,provider:this}),a.forEach(c=>{c.reject(i)})})},10)),n}}const Be=new _(L),Zs="ETHERS_JS_SHARED";class kt extends G{static getApiKey(t){return t&&typeof t!="string"&&Be.throwArgumentError("invalid apiKey","apiKey",t),t||Zs}static getUrl(t,e){Be.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(t.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:Be.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+e}}const X=new _(L),rt={homestead:"6004bcd10040261633ade990",ropsten:"6004bd4d0040261633ade991",rinkeby:"6004bda20040261633ade994",goerli:"6004bd860040261633ade992"};class Et extends G{constructor(t,e){if(e==null){const r=he(new.target,"getNetwork")(t);if(r){const s=rt[r.name];s&&(e={applicationId:s,loadBalancer:!0})}e==null&&X.throwError("unsupported network",_.errors.INVALID_ARGUMENT,{argument:"network",value:t})}super(t,e)}static getApiKey(t){t==null&&X.throwArgumentError("PocketProvider.getApiKey does not support null apiKey","apiKey",t);const e={applicationId:null,loadBalancer:!1,applicationSecretKey:null};return typeof t=="string"?e.applicationId=t:t.applicationSecretKey!=null?(X.assertArgument(typeof t.applicationId=="string","applicationSecretKey requires an applicationId","applicationId",t.applicationId),X.assertArgument(typeof t.applicationSecretKey=="string","invalid applicationSecretKey","applicationSecretKey","[REDACTED]"),e.applicationId=t.applicationId,e.applicationSecretKey=t.applicationSecretKey,e.loadBalancer=!!t.loadBalancer):t.applicationId?(X.assertArgument(typeof t.applicationId=="string","apiKey.applicationId must be a string","apiKey.applicationId",t.applicationId),e.applicationId=t.applicationId,e.loadBalancer=!!t.loadBalancer):X.throwArgumentError("unsupported PocketProvider apiKey","apiKey",t),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"goerli":r="eth-goerli.gateway.pokt.network";break;default:X.throwError("unsupported network",_.errors.INVALID_ARGUMENT,{argument:"network",value:t})}let s=null;e.loadBalancer?s=`https://${r}/v1/lb/${e.applicationId}`:s=`https://${r}/v1/${e.applicationId}`;const n={url:s};return n.headers={},e.applicationSecretKey!=null&&(n.user="",n.password=e.applicationSecretKey),n}isCommunityResource(){return this.applicationId===rt[this.network.name]}}const st=new _(L);function xt(o,t){if(o==null&&(o="homestead"),typeof o=="string"){const r=o.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new ie(o);case"ws":case"wss":return new Ne(o);default:st.throwArgumentError("unsupported URL scheme","network",o)}}const e=ct(o);return(!e||!e._defaultProvider)&&st.throwError("unsupported getDefaultProvider network",_.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:o}),e._defaultProvider({FallbackProvider:wt,AlchemyProvider:We,AnkrProvider:mt,CloudflareProvider:bt,EtherscanProvider:vt,InfuraProvider:Ve,JsonRpcProvider:ie,NodesmithProvider:kt,PocketProvider:Et,Web3Provider:ut,IpcProvider:yt},t)}const Xs=Object.freeze(Object.defineProperty({__proto__:null,AlchemyProvider:We,AlchemyWebSocketProvider:pt,AnkrProvider:mt,BaseProvider:qe,CloudflareProvider:bt,EtherscanProvider:vt,FallbackProvider:wt,Formatter:Mt,InfuraProvider:Ve,InfuraWebSocketProvider:_t,IpcProvider:yt,JsonRpcBatchProvider:Ks,JsonRpcProvider:ie,JsonRpcSigner:Ft,NodesmithProvider:kt,PocketProvider:Et,Provider:at,Resolver:qt,StaticJsonRpcProvider:gt,UrlJsonRpcProvider:G,Web3Provider:ut,WebSocketProvider:Ne,getDefaultProvider:xt,getNetwork:ct,isCommunityResourcable:Ht,isCommunityResource:De,showThrottleMessage:me},Symbol.toStringTag,{value:"Module"})),Qs=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:Lt,ConstructorFragment:Wt,ErrorFragment:Vt,EventFragment:zt,FormatTypes:Gt,Fragment:Jt,FunctionFragment:Yt,HDNode:Kt,Indexed:Zt,Interface:Xt,LogDescription:Qt,Logger:_,ParamType:er,RLP:tr,SigningKey:rr,get SupportedAlgorithm(){return sr},TransactionDescription:nr,get TransactionTypes(){return or},get UnicodeNormalizationForm(){return ar},Utf8ErrorFuncs:ir,get Utf8ErrorReason(){return lr},_TypedDataEncoder:cr,_fetchData:ur,_toEscapedUtf8String:dr,accessListify:ot,arrayify:hr,base58:fr,base64:gr,checkProperties:pr,checkResultErrors:mr,commify:br,computeAddress:vr,computeHmac:wr,computePublicKey:yr,concat:_r,deepCopy:se,defaultAbiCoder:dt,defaultPath:kr,defineReadOnly:U,dnsEncode:Er,entropyToMnemonic:xr,fetchJson:He,formatBytes32String:Sr,formatEther:Tr,formatUnits:Ar,getAccountPath:Ir,getAddress:Pr,getContractAddress:Nr,getCreate2Address:$r,getIcapAddress:Rr,getJsonWalletAddress:Cr,getStatic:he,hashMessage:Or,hexConcat:Br,hexDataLength:jr,hexDataSlice:Dr,hexStripZeros:Ur,hexValue:nt,hexZeroPad:Mr,hexlify:je,id:Fr,isAddress:qr,isBytes:Hr,isBytesLike:Lr,isHexString:Y,isValidMnemonic:Wr,isValidName:Vr,joinSignature:zr,keccak256:Gr,mnemonicToEntropy:Jr,mnemonicToSeed:Yr,namehash:Kr,nameprep:Zr,parseBytes32String:Xr,parseEther:Qr,parseTransaction:es,parseUnits:ht,poll:lt,randomBytes:ts,recoverAddress:rs,recoverPublicKey:ss,resolveProperties:ns,ripemd160:os,serializeTransaction:as,sha256:is,sha512:ls,shallowCopy:ne,shuffled:it,solidityKeccak256:cs,solidityPack:us,soliditySha256:ds,splitSignature:hs,stripZeros:fs,toUtf8Bytes:gs,toUtf8CodePoints:ps,toUtf8String:ms,verifyMessage:bs,verifyTypedData:vs,zeroPad:ws},Symbol.toStringTag,{value:"Module"})),St="ethers/5.6.8",en=new _(St),Tt=Object.freeze(Object.defineProperty({__proto__:null,BaseContract:ys,BigNumber:Fe,Contract:Ue,ContractFactory:_s,FixedNumber:ks,Signer:Es,VoidSigner:xs,Wallet:oe,Wordlist:Ss,constants:Ds,get errors(){return Ts},getDefaultProvider:xt,logger:en,providers:Xs,utils:Qs,version:St,wordlists:As},Symbol.toStringTag,{value:"Module"}));try{const o=window;o._ethers==null&&(o._ethers=Tt)}catch{}var At={exports:{}};(function(o,t){(function(e,r){o.exports=r()})(Is,function(){var e,r,s=1e3,n=6e4,a=36e5,u=864e5,i=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=31536e6,l=2592e6,b=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,R={years:c,months:l,days:u,hours:a,minutes:n,seconds:s,milliseconds:1,weeks:6048e5},m=function(v){return v instanceof p},T=function(v,g,d){return new p(v,d,g.$l)},C=function(v){return r.p(v)+"s"},O=function(v){return v<0},f=function(v){return O(v)?Math.ceil(v):Math.floor(v)},x=function(v){return Math.abs(v)},h=function(v,g){return v?O(v)?{negative:!0,format:""+x(v)+g}:{negative:!1,format:""+v+g}:{negative:!1,format:""}},p=function(){function v(d,k,A){var N=this;if(this.$d={},this.$l=A,d===void 0&&(this.$ms=0,this.parseFromMilliseconds()),k)return T(d*R[C(k)],this);if(typeof d=="number")return this.$ms=d,this.parseFromMilliseconds(),this;if(typeof d=="object")return Object.keys(d).forEach(function(V){N.$d[C(V)]=d[V]}),this.calMilliseconds(),this;if(typeof d=="string"){var j=d.match(b);if(j){var q=j.slice(2).map(function(V){return V!=null?Number(V):0});return this.$d.years=q[0],this.$d.months=q[1],this.$d.weeks=q[2],this.$d.days=q[3],this.$d.hours=q[4],this.$d.minutes=q[5],this.$d.seconds=q[6],this.calMilliseconds(),this}}return this}var g=v.prototype;return g.calMilliseconds=function(){var d=this;this.$ms=Object.keys(this.$d).reduce(function(k,A){return k+(d.$d[A]||0)*R[A]},0)},g.parseFromMilliseconds=function(){var d=this.$ms;this.$d.years=f(d/c),d%=c,this.$d.months=f(d/l),d%=l,this.$d.days=f(d/u),d%=u,this.$d.hours=f(d/a),d%=a,this.$d.minutes=f(d/n),d%=n,this.$d.seconds=f(d/s),d%=s,this.$d.milliseconds=d},g.toISOString=function(){var d=h(this.$d.years,"Y"),k=h(this.$d.months,"M"),A=+this.$d.days||0;this.$d.weeks&&(A+=7*this.$d.weeks);var N=h(A,"D"),j=h(this.$d.hours,"H"),q=h(this.$d.minutes,"M"),V=this.$d.seconds||0;this.$d.milliseconds&&(V+=this.$d.milliseconds/1e3);var S=h(V,"S"),$e=d.negative||k.negative||N.negative||j.negative||q.negative||S.negative,It=j.format||q.format||S.format?"T":"",Re=($e?"-":"")+"P"+d.format+k.format+N.format+It+j.format+q.format+S.format;return Re==="P"||Re==="-P"?"P0D":Re},g.toJSON=function(){return this.toISOString()},g.format=function(d){var k=d||"YYYY-MM-DDTHH:mm:ss",A={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return k.replace(i,function(N,j){return j||String(A[N])})},g.as=function(d){return this.$ms/R[C(d)]},g.get=function(d){var k=this.$ms,A=C(d);return A==="milliseconds"?k%=1e3:k=A==="weeks"?f(k/R[A]):this.$d[A],k===0?0:k},g.add=function(d,k,A){var N;return N=k?d*R[C(k)]:m(d)?d.$ms:T(d,this).$ms,T(this.$ms+N*(A?-1:1),this)},g.subtract=function(d,k){return this.add(d,k,!0)},g.locale=function(d){var k=this.clone();return k.$l=d,k},g.clone=function(){return T(this.$ms,this)},g.humanize=function(d){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!d)},g.milliseconds=function(){return this.get("milliseconds")},g.asMilliseconds=function(){return this.as("milliseconds")},g.seconds=function(){return this.get("seconds")},g.asSeconds=function(){return this.as("seconds")},g.minutes=function(){return this.get("minutes")},g.asMinutes=function(){return this.as("minutes")},g.hours=function(){return this.get("hours")},g.asHours=function(){return this.as("hours")},g.days=function(){return this.get("days")},g.asDays=function(){return this.as("days")},g.weeks=function(){return this.get("weeks")},g.asWeeks=function(){return this.as("weeks")},g.months=function(){return this.get("months")},g.asMonths=function(){return this.as("months")},g.years=function(){return this.get("years")},g.asYears=function(){return this.as("years")},v}();return function(v,g,d){e=d,r=d().$utils(),d.duration=function(N,j){var q=d.locale();return T(N,{$l:q},j)},d.isDuration=m;var k=g.prototype.add,A=g.prototype.subtract;g.prototype.add=function(N,j){return m(N)&&(N=N.asMilliseconds()),k.bind(this)(N,j)},g.prototype.subtract=function(N,j){return m(N)&&(N=N.asMilliseconds()),A.bind(this)(N,j)}}})})(At);var tn=At.exports;const rn=Ps(tn),sn={class:"mr-1"},nn={class:"text-gray-500 text-sm"},on={class:"text-gray-500 text-sm ml-1"},an={key:0},ln={key:1,class:"m-2"},cn={key:2},un=E("span",{class:"text-gray-500"},"ETH",-1),Pe=be({__name:"DragonNft",props:{dragon:{},isShowTransfer:{type:Boolean}},emits:["onRefresh"],setup(o,{emit:t}){const{dragon:e,isShowTransfer:r=!0}=o,s=dt,n=ve(),a=F(!1),u=F(""),i=()=>{a.value=!0},c=F(!1),l=F(1),b=()=>{c.value=!0},R=F(!1),m=F([{text:"",value:"",disabled:!0}]),T=()=>{let h=[];for(let p=0;p<n.address.length;p++){let v=n.address[p].nickname+" "+Ns(n.address[p].address),g=n.address[p].address,d=!1;p==n.changeAddressIndex&&(d=!0,v+=" <发送地址>"),h.push({text:v,value:g,disabled:d})}m.value=h,R.value=!0},C=({selectedValues:h})=>{u.value=h[0],R.value=!1},O=async()=>{ae({duration:0,message:"开蛋抽券中"});let h=n.address[n.changeAddressIndex].address.toLowerCase(),v="dragon_open_egg_"+Math.floor(Date.now()/36e5)+"_"+e.hatch_id;console.log("sign_message",v);let g=n.address[n.changeAddressIndex].key,k=await new oe(g,fe).signMessage(v),A=await n.openEgg(e.hatch_id,h,k);if(console.log(A),A.code==2e4){z();let N="随机幸运属性为："+Me[A.data.luckyEle],j="没有抽到奖券。";A.data.ticket>0&&(j="抽到奖券："+A.data.ticket),$s({title:"抽券结果",message:N+"。"+j}).then(()=>{t("onRefresh")})}else z(),ge(A.info)},f=async()=>{ae({duration:0,message:"操作执行中"});try{let h=n.address[n.changeAddressIndex].address,p=n.address[n.changeAddressIndex].key,v=new oe(p,fe);await(await new Ue(we.address,we.abi,v).safeTransferFrom(h,u.value,e.id,"0x00")).wait()}catch(h){z(),ge(h.toString()),console.log(h),await te(2e3)}await te(1e3),t("onRefresh")},x=async()=>{ae({duration:0,message:"出售执行中"});try{let h=n.address[n.changeAddressIndex].address,p=n.address[n.changeAddressIndex].key,v=new oe(p,fe),g=new Ue(we.address,we.abi,v),d=ht(l.value.toString(),"ether"),k=await Rs.getSuggestIndex(h),A=[d,k,e.id,1],N=s.encode(["uint256","uint256","uint256","uint256"],A);await(await g.safeTransferFrom(h,Cs.address,e.id,N)).wait()}catch(h){z(),ge(h.toString()),console.log(h),await te(2e3)}await te(1e3),t("onRefresh")};return(h,p)=>{const v=B("van-tag"),g=B("van-count-down"),d=B("van-button"),k=B("van-cell"),A=B("van-field"),N=B("van-cell-group"),j=B("van-dialog"),q=B("van-picker"),V=B("van-popup");return P(),M(Z,null,[E("div",{class:ce(["rounded-lg shadow-lg max-w-sm p-1 border-1 text-center","border-"+$(J).find(S=>S.quality==h.dragon.level).color+"-500"])},[E("div",null,[E("span",sn,I(h.dragon.name),1),w(v,{plain:"",color:$(J).find(S=>S.quality==h.dragon.level).rgb},{default:y(()=>[D(I($(J).find(S=>S.quality==h.dragon.level).name),1)]),_:1},8,["color"])]),E("div",nn,"#"+I(h.dragon.id),1),E("div",null,[(P(!0),M(Z,null,Ae(h.dragon.elements,(S,$e)=>(P(),W(v,{class:"mr-1",plain:"",key:$e},{default:y(()=>[D(I($(Me)[S]),1)]),_:2},1024))),128)),E("span",on,I(h.dragon.attrs[6])+"/7",1)]),h.dragon.diffTimeStamp>0?(P(),M("div",an,[w(g,{class:"text-xs",time:h.dragon.diffTimeStamp,format:"DD 天 HH 时 mm 分 ss 秒"},null,8,["time"])])):H("",!0),h.dragon.state==0&&h.dragon.hatch_id==0&&h.isShowTransfer?(P(),M("div",ln,[w(d,{plain:"",type:"primary",size:"mini",onClick:p[0]||(p[0]=S=>b())},{default:y(()=>[D(" 出售 ")]),_:1}),w(d,{plain:"",type:"success",size:"mini",class:"ml-2",onClick:p[1]||(p[1]=S=>i())},{default:y(()=>[D(" 转账 ")]),_:1})])):H("",!0),h.dragon.state==0&&h.dragon.hatch_id!=0&&h.isShowTransfer?(P(),M("div",cn,[w(d,{plain:"",type:"primary",size:"small",class:"m-2",onClick:p[2]||(p[2]=S=>O())},{default:y(()=>[D(" 开蛋抽券 ")]),_:1})])):H("",!0),E("div",null,[h.dragon.state==1?(P(),W(v,{key:0,type:"warning"},{default:y(()=>[D("繁殖中")]),_:1})):H("",!0)]),E("div",null,[h.dragon.state==2?(P(),W(v,{key:0,type:"primary"},{default:y(()=>[D("孵化蛋")]),_:1})):H("",!0)])],2),w(j,{show:a.value,"onUpdate:show":p[4]||(p[4]=S=>a.value=S),title:"转账","show-cancel-button":"",onConfirm:f},{default:y(()=>[w(N,{inset:""},{default:y(()=>[w(k,{title:"发送昵称",value:$(n).address[$(n).changeAddressIndex].nickname},null,8,["value"]),w(k,{title:"发送地址",value:$(n).address[$(n).changeAddressIndex].address},null,8,["value"]),w(k,{title:"NFT"},{"right-icon":y(()=>[E("div",null,[D(I(h.dragon.name)+" id:"+I(h.dragon.id)+" ",1),w(v,{plain:"",color:$(J).find(S=>S.quality==h.dragon.level).rgb},{default:y(()=>[D(I($(J).find(S=>S.quality==h.dragon.level).name),1)]),_:1},8,["color"]),D(" "+I(h.dragon.attrs[6])+"/7 ",1)])]),_:1}),w(A,{modelValue:u.value,"onUpdate:modelValue":p[3]||(p[3]=S=>u.value=S),label:"接受地址"},{button:y(()=>[w(d,{size:"small",type:"primary",onClick:T},{default:y(()=>[D("选择")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["show"]),w(j,{show:c.value,"onUpdate:show":p[6]||(p[6]=S=>c.value=S),title:"出售","show-cancel-button":"",onConfirm:x},{default:y(()=>[w(N,{inset:""},{default:y(()=>[w(k,{title:"账号昵称",value:$(n).address[$(n).changeAddressIndex].nickname},null,8,["value"]),w(k,{title:"账号地址",value:$(n).address[$(n).changeAddressIndex].address},null,8,["value"]),w(k,{title:"出售NFT"},{"right-icon":y(()=>[E("div",null,[D(I(h.dragon.name)+" id:"+I(h.dragon.id)+" ",1),w(v,{plain:"",color:$(J).find(S=>S.quality==h.dragon.level).rgb},{default:y(()=>[D(I($(J).find(S=>S.quality==h.dragon.level).name),1)]),_:1},8,["color"]),D(" "+I(h.dragon.attrs[6])+"/7 ",1)])]),_:1}),w(A,{modelValue:l.value,"onUpdate:modelValue":p[5]||(p[5]=S=>l.value=S),label:"出售价格"},{button:y(()=>[un]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["show"]),w(V,{show:R.value,"onUpdate:show":p[8]||(p[8]=S=>R.value=S),round:"",position:"bottom",teleport:"body"},{default:y(()=>[w(q,{columns:m.value,onCancel:p[7]||(p[7]=S=>R.value=!1),onConfirm:C,onClickOption:C},null,8,["columns"])]),_:1},8,["show"])],64)}}}),dn={key:0},hn={class:"m-2 text-center"},fn={class:"m-2 text-gray-500 text-center text-sm"},gn={class:"text-gray-800"},pn={class:"text-gray-400 ml-1 text-xs"},mn={class:"mt-4 mb-2 text-center"},bn=be({__name:"DragonBreed",props:{dragons:{}},emits:["onRefresh"],setup(o,{emit:t}){const e=o,r=ve(),s=F(!1),n=F(0),a=F({fa_level:1,ma_level:1,level_1:70,level_2:30,level_3:0,level_4:0}),u=F([{name:"没有可选择的Dragon",disabled:!0,index:-1}]),i=F([-1,-1]),c=F(0),l=()=>{let O=[];for(let f=0;f<e.dragons.length;f++){let x="";for(let g=0;g<e.dragons[f].elements.length;g++)x=x+" "+Me[e.dragons[f].elements[g]];let h=J.find(g=>g.quality==e.dragons[f].level).name+" "+e.dragons[f].name+" "+e.dragons[f].attrs[6]+"/7 "+x,p=!1;(f==i.value[0]||f==i.value[1])&&(p=!0,h+=" <已选>");let v=-1;if(i.value[0]>-1&&(v=i.value[0]),i.value[1]>-1&&(v=i.value[1]),v>-1&&v!=f){let g=e.dragons[v];(e.dragons[f].attrs[8]==g.id||e.dragons[f].attrs[9]==g.id)&&(p=!0,h+=" <父母>"),(e.dragons[f].attrs[8]==g.attrs[8]||e.dragons[f].attrs[8]==g.attrs[9]||e.dragons[f].attrs[9]==g.attrs[8]||e.dragons[f].attrs[9]==g.attrs[9])&&(p=!0,h+=" <同代>")}O.push({name:h,disabled:p,index:f})}e.dragons.length>0?u.value=O:u.value=[{name:"没有可选择的Dragon",disabled:!0,index:-1}]},b=O=>{c.value=O,l(),s.value=!0},R=async O=>{if(i.value[c.value]=O.index,i.value[0]>-1&&i.value[1]>-1){let f=e.dragons[i.value[0]].level,x=e.dragons[i.value[1]].level,h=ze.find(p=>p.fa_level==f&&p.ma_level==x);h||(h=ze.find(p=>p.fa_level==x&&p.ma_level==f)),console.log("res_chance",h),h&&(a.value=h),await m()}},m=async()=>{n.value=0;let O=e.dragons[i.value[0]].level,f=e.dragons[i.value[1]].level,x=e.dragons[i.value[0]].attrs[6],h=e.dragons[i.value[1]].attrs[6],p="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",v=await ee.getBreedPrice(O,f,x,h,p);n.value=v},T=async()=>{const O=ae({duration:0,message:"操作执行中"});let f=r.address[r.changeAddressIndex],x=await ee.getSuggestIndex(f.address);if(console.log("suggestIndex",x.toString()),x=="255"){z(),ge("超出单账号同时繁殖数量！");return}let h=e.dragons[i.value[0]].id,p=e.dragons[i.value[1]].id,v="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",g=n.value,d=new oe(f.key,fe);try{O.message="开始执行繁殖...",await(await ee.connect(d).beginBreed(h,p,x,v,g,{value:g})).wait()}catch(k){z(),ge(k.toString()),console.log(k),await te(2e3);return}O.message="开始执行孵化...",await C(),i.value=[-1,-1],t("onRefresh")},C=async()=>{let O=r.address[r.changeAddressIndex],f=await ee.getHatchData(O.address);for(console.log("hatchData",f.toString());!(f.status=="1"&&f.bHash!=="0x0000000000000000000000000000000000000000000000000000000000000000");)console.log("不符合孵化条件，5秒后再次检测"),await te(5e3),f=await ee.getHatchData(O.address);console.log("do end breed!");let x=new oe(O.key,fe);await ee.connect(x).endBreed()};return Le(()=>{l()}),(O,f)=>{const x=B("van-grid-item"),h=B("van-grid"),p=B("van-button"),v=B("van-cell-group"),g=B("van-action-sheet");return P(),M(Z,null,[w(v,{inset:""},{default:y(()=>[w(h,{"column-num":3,class:"pt-5 pb-2"},{default:y(()=>[i.value[0]==-1?(P(),W(x,{key:0,class:"rounded-lg max-w-sm p-1 border-2 text-center",icon:"plus",text:"添加",onClick:f[0]||(f[0]=d=>b(0))})):H("",!0),i.value[0]>=0?(P(),W(x,{key:1,onClick:f[2]||(f[2]=d=>b(0))},{default:y(()=>[w(Pe,{dragon:e.dragons[i.value[0]],isShowTransfer:!1,onOnRefresh:f[1]||(f[1]=()=>{})},null,8,["dragon"])]),_:1})):H("",!0),w(x,{icon:"like-o",class:"text-gray-400"}),i.value[1]==-1?(P(),W(x,{key:2,class:"rounded-lg max-w-sm p-1 border-2 text-center",icon:"plus",text:"添加",onClick:f[3]||(f[3]=d=>b(1))})):H("",!0),i.value[1]>=0?(P(),W(x,{key:3,onClick:f[5]||(f[5]=d=>b(1))},{default:y(()=>[w(Pe,{dragon:e.dragons[i.value[1]],isShowTransfer:!1,onOnRefresh:f[4]||(f[4]=()=>{})},null,8,["dragon"])]),_:1})):H("",!0)]),_:1}),i.value[0]>-1&&i.value[1]>-1?(P(),M("div",dn,[E("div",hn,[E("span",{class:ce(["text-sm mr-1","text-gray-500"])},"普通 "+I(a.value.level_1.toFixed(1))+"%",1),E("span",{class:ce(["text-sm mr-1","text-green-500"])},"良好 "+I(a.value.level_2.toFixed(1))+"%",1),E("span",{class:ce(["text-sm mr-1","text-blue-500"])},"稀有 "+I(a.value.level_3.toFixed(1))+"%",1),E("span",{class:ce(["text-sm mr-1","text-fuchsia-500"])},"史诗 "+I(a.value.level_4.toFixed(1))+"%",1)]),E("div",fn,[D(" 费用："),E("span",gn,I(parseFloat($(Tt).utils.formatUnits(n.value,"ether")).toFixed(5)),1),D("ETH "),E("span",pn,"账号余额："+I($(r).balances.eth.toFixed(5))+"ETH",1)]),E("div",mn,[w(p,{type:"primary",onClick:T,disabled:!(n.value>0)},{default:y(()=>[D("繁殖")]),_:1},8,["disabled"])])])):H("",!0)]),_:1}),w(g,{show:s.value,"onUpdate:show":f[6]||(f[6]=d=>s.value=d),actions:u.value,title:"选择MoDragon","close-on-click-action":"",onSelect:R,teleport:"body"},null,8,["show","actions"])],64)}}}),vn={key:0},wn={key:1},yn={class:"text-gray-800"},_n=E("span",{class:"text-xs text-gray-500"},"MoDragon",-1),kn=E("span",{class:"text-xs text-gray-500"},"ETH",-1),En=E("span",{class:"text-xs text-gray-500"},"ARB",-1),xn=E("span",{class:"text-xs text-gray-500"},"MBOX",-1),Sn={class:"m-2"},Tn={class:"text-lg text-gray-500 ml-3"},An={class:"grid grid-cols-3 md:lg:xl:grid-cols-6 group bg-white shadow-xl shadow-neutral-100 border"},In=E("div",{class:"m-2"},[E("span",{class:"text-lg text-gray-500 ml-3"},"繁殖操作")],-1),Pn={class:"m-2"},Nn={class:"text-lg text-gray-500 ml-3"},$n={class:"grid grid-cols-3 md:lg:xl:grid-cols-6 group bg-white shadow-xl shadow-neutral-100 border"},Rn=be({__name:"account",setup(o){ft.extend(rn);const{onActivated:t}=Os(),e=ve(),r=F([]),s=F([]);Bs(()=>[e.address,e.changeAddressIndex],async(a,u)=>{await n(),await e.getChangeAddressBalance()}),t(async({address:a})=>{await n(),await e.getChangeAddressBalance()}),Le(async()=>{await n(),await e.getChangeAddressBalance()});async function n(){if(ae({duration:0,forbidClick:!0,message:"更新数据"}),e.address.length==0||e.changeAddressIndex<0){z();return}let a=await e.upOneAddressNft(e.changeAddressIndex);r.value=a.nfts,s.value=a.nfts.filter(u=>u.state==0&&u.hatch_id==0),z()}return(a,u)=>{const i=B("van-empty"),c=B("van-grid-item"),l=B("van-grid");return P(),M(Z,null,[r.value.length==0?(P(),M("div",vn,[w(i,{image:"search",description:"没有发现龙蛋NFT"})])):H("",!0),r.value.length>0?(P(),M("div",wn,[w(l,{class:"m-2","column-num":4},{default:y(()=>[w(c,null,{icon:y(()=>[E("span",yn,I(r.value.length),1)]),text:y(()=>[_n]),_:1}),w(c,null,{icon:y(()=>[E("span",null,I($(e).balances.eth.toFixed(2)),1)]),text:y(()=>[kn]),_:1}),w(c,null,{icon:y(()=>[E("span",null,I($(e).balances.arb.toFixed(0)),1)]),text:y(()=>[En]),_:1}),w(c,null,{icon:y(()=>[E("span",null,I($(e).balances.mbox.toFixed(0)),1)]),text:y(()=>[xn]),_:1})]),_:1}),E("div",Sn,[E("span",Tn,"空闲状态: "+I(r.value.filter(b=>b.state==0).length),1)]),E("div",An,[(P(!0),M(Z,null,Ae(r.value.filter(b=>b.state==0),(b,R)=>(P(),M("div",{key:"dragon0"+R+b.id,class:"m-3"},[w(Pe,{dragon:b,isShowTransfer:!0,onOnRefresh:n},null,8,["dragon"])]))),128))]),In,(P(),W(bn,{dragons:s.value,key:$(e).address[$(e).changeAddressIndex].address,onOnRefresh:n},null,8,["dragons"])),E("div",Pn,[E("span",Nn,"繁殖状态: "+I(r.value.filter(b=>b.state>0).length),1)]),E("div",$n,[(P(!0),M(Z,null,Ae(r.value.filter(b=>b.state>0),(b,R)=>(P(),M("div",{key:"dragon"+R,class:"m-3"},[w(Pe,{dragon:b,isShowTransfer:!1,onOnRefresh:n},null,8,["dragon"])]))),128))])])):H("",!0)],64)}}}),Cn={key:0},On={class:"text-gray-600 text-sm ml-1"},Bn=E("span",null,null,-1),jn=E("span",{class:"ml-5 text-gray-500"},"最近一次繁殖结束： ",-1),Dn={key:1},Un=be({__name:"collect",setup(o){const t=ve(),e=F(!1),r=F(0),s=[{text:"空闲数量降序",value:0},{text:"孵蛋时间降序",value:1},{text:"账号顺序降序",value:2}],n=()=>{switch(console.log(r.value),r.value){case 0:t.nftinfos.sort((i,c)=>c.nfts.filter(l=>l.state==0).length-i.nfts.filter(l=>l.state==0).length);break;case 1:t.nftinfos.sort((i,c)=>i.nfts.findIndex(l=>l.state>0)==-1?1:c.nfts.findIndex(l=>l.state>0)==-1?-1:i.nfts.find(l=>l.state>0).attrs[7]-c.nfts.find(l=>l.state>0).attrs[7]);break;case 2:t.nftinfos.sort((i,c)=>i.id-c.id);break}};Le(()=>{t.getLocalNftinfos()});const a=async()=>{ae({duration:0,forbidClick:!0,message:"更新数据"}),e.value=!0,await t.upAllAddressNfts(),n(),e.value=!1,console.log("更新状态"),z()},u={dropdownMenuHeight:"36px"};return(i,c)=>{const l=B("van-button"),b=B("van-dropdown-item"),R=B("van-dropdown-menu"),m=B("van-config-provider"),T=B("van-cell"),C=B("van-tag"),O=B("van-cell-group"),f=B("van-empty");return $(t).address.length>0?(P(),M("div",Cn,[w(O,{class:"my-2",inset:""},{default:y(()=>[w(T,{title:"各账号详情",icon:"user-o"},{value:y(()=>[w(l,{type:"success",size:"mini",class:"mr-2",loading:e.value,"loading-text":"读取中",onClick:a},{default:y(()=>[D(" 更新数据 ")]),_:1},8,["loading"])]),extra:y(()=>[w(m,{"theme-vars":u},{default:y(()=>[w(R,null,{default:y(()=>[w(b,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=x=>r.value=x),options:s,onChange:n},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(P(!0),M(Z,null,Ae($(t).nftinfos,(x,h)=>(P(),M(Z,{key:h+x.address},[w(T,null,{title:y(()=>[w(C,{round:"",plain:"",type:"primary"},{default:y(()=>[D(I(x.id+1),1)]),_:2},1024),E("span",On,I(x.nickname),1),Bn]),value:y(()=>[D(" 空闲:"+I(x.nfts.filter(p=>p.state==0).length)+"/繁殖:"+I(x.nfts.filter(p=>p.state>0).length),1)]),_:2},1024),x.nfts.findIndex(p=>p.state>0)!=-1?(P(),W(T,{key:0},{title:y(()=>[jn]),value:y(()=>[D(I($(ft).unix(x.nfts.find(p=>p.state>0).attrs[7]).format("MM/DDTHH:mm")),1)]),_:2},1024)):H("",!0)],64))),128))]),_:1})])):(P(),M("div",Dn,[w(f,{description:"账号数量为空"})]))}}}),Fn=be({__name:"index",setup(o){const t=ve();return(e,r)=>$(t).changeAddressIndex>=0?(P(),W(Rn,{key:0})):(P(),W(Un,{key:1}))}});export{Fn as default};
