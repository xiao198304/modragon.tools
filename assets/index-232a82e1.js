import{A as Pt,H as At,M as Nt,d as It,e as $t,N as Rt,O as Ct,T as Ot,W as Bt,Z as jt,L as v,v as L,J as re,f as B,B as je,h as le,j as ue,k as De,l as Ue,m as ee,n as tt,o as Re,p as rt,q as G,P as nt,t as Ce,u as te,w as st,x as ot,y as at,z as it,F as Dt,C as Ut,R as Mt,D as Ft,E as qt,G as Ht,I as Lt,K as Wt,Q as zt,S as Gt,U as Jt,V as Vt,X as Yt,Y as Kt,_ as Zt,$ as Xt,a0 as Qt,a1 as er,a2 as tr,a3 as rr,a4 as nr,a5 as sr,a6 as or,a7 as ar,a8 as ir,a9 as lr,aa as cr,ab as ur,ac as dr,ad as hr,ae as fr,af as gr,ag as pr,ah as mr,ai as br,aj as vr,ak as yr,al as wr,am as _r,an as kr,ao as Er,ap as xr,aq as Sr,ar as Tr,as as Pr,at as Ar,au as Nr,av as Ir,aw as $r,ax as Rr,ay as Cr,az as Or,aA as Br,aB as jr,aC as Dr,aD as Ur,aE as Mr,aF as Fr,aG as qr,aH as Hr,aI as Lr,aJ as Wr,aK as zr,aL as Gr,aM as Jr,aN as Vr,aO as Yr,aP as Kr,aQ as Zr,aR as Xr,aS as Qr,aT as en,aU as tn,aV as rn,aW as nn,aX as sn,aY as on,aZ as an,a_ as ln,a$ as cn,b0 as un,b1 as dn,b2 as hn,b3 as fn,b4 as gn,b5 as pn,b6 as mn,b7 as bn,b8 as vn,b9 as yn,ba as wn,bb as _n,bc as lt,bd as kn,be as En,bf as xn,bg as Sn,bh as we,bi as Tn,bj as Pn,bk as An,c as Nn,g as In,bl as de,bm as he,bn as M,bo as I,bp as P,bq as D,br as _,bs as N,bt as w,bu as y,bv as j,bw as C,bx as X,by as V,bz as _e,bA as H,bB as ct,bC as q,bD as oe,bE as $n,bF as Se,bG as Oe,bH as He,bI as ne,bJ as Be,bK as ke,bL as Me,bM as Le,bN as Z,bO as ut,bP as Rn,bQ as Cn}from"./index-7a1aa119.js";const On="Ξ",Bn=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:Pt,EtherSymbol:On,HashZero:At,MaxInt256:Nt,MaxUint256:It,MinInt256:$t,NegativeOne:Rt,One:Ct,Two:Ot,WeiPerEther:Bt,Zero:jt},Symbol.toStringTag,{value:"Module"}));let ce=null;try{if(ce=WebSocket,ce==null)throw new Error("inject please")}catch{const t=new v(L);ce=function(){t.throwError("WebSockets not supported in this environment",v.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Ne=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function d(l){try{u(r.next(l))}catch(p){a(p)}}function i(l){try{u(r.throw(l))}catch(p){a(p)}}function u(l){l.done?o(l.value):n(l.value).then(d,i)}u((r=r.apply(s,t||[])).next())})};const fe=new v(L);let jn=1;class Te extends re{constructor(t,e){e==="any"&&fe.throwError("WebSocketProvider does not support 'any' network yet",v.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof t=="string"?super(t,e):super("_websocket",e),this._pollingInterval=-1,this._wsReady=!1,typeof t=="string"?B(this,"_websocket",new ce(this.connection.url)):B(this,"_websocket",t),B(this,"_requests",{}),B(this,"_subs",{}),B(this,"_subIds",{}),B(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(n=>{this.websocket.send(this._requests[n].payload)})},this.websocket.onmessage=n=>{const o=n.data,a=JSON.parse(o);if(a.id!=null){const d=String(a.id),i=this._requests[d];if(delete this._requests[d],a.result!==void 0)i.callback(null,a.result),this.emit("debug",{action:"response",request:JSON.parse(i.payload),response:a.result,provider:this});else{let u=null;a.error?(u=new Error(a.error.message||"unknown error"),B(u,"code",a.error.code||null),B(u,"response",o)):u=new Error("unknown error"),i.callback(u,void 0),this.emit("debug",{action:"response",error:u,request:JSON.parse(i.payload),provider:this})}}else if(a.method==="eth_subscription"){const d=this._subs[a.params.subscription];d&&d.processFunc(a.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(t){fe.throwError("cannot reset events block on WebSocketProvider",v.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(t){fe.throwError("cannot set polling interval on WebSocketProvider",v.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Ne(this,void 0,void 0,function*(){return null})}set polling(t){t&&fe.throwError("cannot set polling on WebSocketProvider",v.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(t,e){const r=jn++;return new Promise((n,o)=>{function a(i,u){return i?o(i):n(u)}const d=JSON.stringify({method:t,params:e,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(d),provider:this}),this._requests[String(r)]={callback:a,payload:d},this._wsReady&&this.websocket.send(d)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(t,e,r){return Ne(this,void 0,void 0,function*(){let n=this._subIds[t];n==null&&(n=Promise.all(e).then(a=>this.send("eth_subscribe",a)),this._subIds[t]=n);const o=yield n;this._subs[o]={tag:t,processFunc:r}})}_startEvent(t){switch(t.type){case"block":this._subscribe("block",["newHeads"],e=>{const r=je.from(e.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],e=>{this.emit("pending",e)});break;case"filter":this._subscribe(t.tag,["logs",this._getFilter(t.filter)],e=>{e.removed==null&&(e.removed=!1),this.emit(t.filter,this.formatter.filterLog(e))});break;case"tx":{const e=r=>{const n=r.hash;this.getTransactionReceipt(n).then(o=>{o&&this.emit(n,o)})};e(t),this._subscribe("tx",["newHeads"],r=>{this._events.filter(n=>n.type==="tx").forEach(e)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",t);break}}_stopEvent(t){let e=t.tag;if(t.type==="tx"){if(this._events.filter(n=>n.type==="tx").length)return;e="tx"}else if(this.listenerCount(t.event))return;const r=this._subIds[e];r&&(delete this._subIds[e],r.then(n=>{this._subs[n]&&(delete this._subs[n],this.send("eth_unsubscribe",[n]))}))}destroy(){return Ne(this,void 0,void 0,function*(){this.websocket.readyState===ce.CONNECTING&&(yield new Promise(t=>{this.websocket.onopen=function(){t(!0)},this.websocket.onerror=function(){t(!1)}})),this.websocket.close(1e3)})}}var Dn=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function d(l){try{u(r.next(l))}catch(p){a(p)}}function i(l){try{u(r.throw(l))}catch(p){a(p)}}function u(l){l.done?o(l.value):n(l.value).then(d,i)}u((r=r.apply(s,t||[])).next())})};const ae=new v(L);class dt extends re{detectNetwork(){const t=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return Dn(this,void 0,void 0,function*(){let e=this.network;return e==null&&(e=yield t.detectNetwork.call(this),e||ae.throwError("no network detected",v.errors.UNKNOWN_ERROR,{}),this._network==null&&(B(this,"_network",e),this.emit("network",e,null))),e})}}class W extends dt{constructor(t,e){ae.checkAbstract(new.target,W),t=le(new.target,"getNetwork")(t),e=le(new.target,"getApiKey")(e);const r=le(new.target,"getUrl")(t,e);super(r,t),typeof e=="string"?B(this,"apiKey",e):e!=null&&Object.keys(e).forEach(n=>{B(this,n,e[n])})}_startPending(){ae.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(t){return ae.throwError("API provider does not support signing",v.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(t){return t}static getUrl(t,e){return ae.throwError("not implemented; sub-classes must override getUrl",v.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const We=new v(L),ve="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class ht extends Te{constructor(t,e){const r=new Fe(t,e),n=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(n,r.network),B(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===ve}}class Fe extends W{static getWebSocketProvider(t,e){return new ht(t,e)}static getApiKey(t){return t==null?ve:(t&&typeof t!="string"&&We.throwArgumentError("invalid apiKey","apiKey",t),t)}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"ropsten":r="eth-ropsten.alchemyapi.io/v2/";break;case"rinkeby":r="eth-rinkeby.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.alchemyapi.io/v2/";break;case"kovan":r="eth-kovan.alchemyapi.io/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-rinkeby":r="arb-rinkeby.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-kovan":r="opt-kovan.g.alchemy.com/v2/";break;default:We.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+e,throttleCallback:(n,o)=>(e===ve&&ue(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===ve}}const Un=new v(L),ge="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Mn(s){switch(s){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return Un.throwArgumentError("unsupported network","name",s)}class ft extends W{isCommunityResource(){return this.apiKey===ge}static getApiKey(t){return t??ge}static getUrl(t,e){e==null&&(e=ge);const r={allowGzip:!0,url:"https://"+Mn(t.name)+e,throttleCallback:(n,o)=>(e.apiKey===ge&&ue(),Promise.resolve(!0))};return e.projectSecret!=null&&(r.user="",r.password=e.projectSecret),r}}var Fn=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function d(l){try{u(r.next(l))}catch(p){a(p)}}function i(l){try{u(r.throw(l))}catch(p){a(p)}}function u(l){l.done?o(l.value):n(l.value).then(d,i)}u((r=r.apply(s,t||[])).next())})};const ze=new v(L);class gt extends W{static getApiKey(t){return t!=null&&ze.throwArgumentError("apiKey not supported for cloudflare","apiKey",t),null}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="https://cloudflare-eth.com/";break;default:ze.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return Fn(this,void 0,void 0,function*(){return t==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,t,e)})}}var pe=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function d(l){try{u(r.next(l))}catch(p){a(p)}}function i(l){try{u(r.throw(l))}catch(p){a(p)}}function u(l){l.done?o(l.value):n(l.value).then(d,i)}u((r=r.apply(s,t||[])).next())})};const J=new v(L);function Ge(s){const t={};for(let e in s){if(s[e]==null)continue;let r=s[e];e==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[e]?r=tt(Re(r)):e==="accessList"?r="["+rt(r).map(n=>`{address:"${n.address}",storageKeys:["${n.storageKeys.join('","')}"]}`).join(",")+"]":r=Re(r),t[e]=r)}return t}function qn(s){if(s.status==0&&(s.message==="No records found"||s.message==="No transactions found"))return s.result;if(s.status!=1||s.message!="OK"){const t=new Error("invalid response");throw t.result=JSON.stringify(s),(s.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return s.result}function Je(s){if(s&&s.status==0&&s.message=="NOTOK"&&(s.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");throw t.result=JSON.stringify(s),t.throttleRetry=!0,t}if(s.jsonrpc!="2.0"){const t=new Error("invalid response");throw t.result=JSON.stringify(s),t}if(s.error){const t=new Error(s.error.message||"unknown error");throw s.error.code&&(t.code=s.error.code),s.error.data&&(t.data=s.error.data),t}return s.result}function Ve(s){if(s==="pending")throw new Error("pending not supported");return s==="latest"?s:parseInt(s.substring(2),16)}const Ye="9D13ZE7XSBTJ94N9BNJ2MA33VMAY2YPIRB";function Ie(s,t,e){if(s==="call"&&t.code===v.errors.SERVER_ERROR){const n=t.error;if(n&&(n.message.match(/reverted/i)||n.message.match(/VM execution error/i))){let o=n.data;if(o&&(o="0x"+o.replace(/^.*0x/i,"")),G(o))return o;J.throwError("missing revert data in call exception",v.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let r=t.message;throw t.code===v.errors.SERVER_ERROR&&(t.error&&typeof t.error.message=="string"?r=t.error.message:typeof t.body=="string"?r=t.body:typeof t.responseText=="string"&&(r=t.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&J.throwError("insufficient funds for intrinsic transaction cost",v.errors.INSUFFICIENT_FUNDS,{error:t,method:s,transaction:e}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&J.throwError("nonce has already been used",v.errors.NONCE_EXPIRED,{error:t,method:s,transaction:e}),r.match(/another transaction with same nonce/)&&J.throwError("replacement fee too low",v.errors.REPLACEMENT_UNDERPRICED,{error:t,method:s,transaction:e}),r.match(/execution failed due to an exception|execution reverted/)&&J.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",v.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:s,transaction:e}),t}class pt extends De{constructor(t,e){super(t),B(this,"baseUrl",this.getBaseUrl()),B(this,"apiKey",e||Ye)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"ropsten":return"https://api-ropsten.etherscan.io";case"rinkeby":return"https://api-rinkeby.etherscan.io";case"kovan":return"https://api-kovan.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"optimism":return"https://api-optimistic.etherscan.io"}return J.throwArgumentError("unsupported network","network",this.network.name)}getUrl(t,e){const r=Object.keys(e).reduce((o,a)=>{const d=e[a];return d!=null&&(o+=`&${a}=${d}`),o},""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${t}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(t,e){return e.module=t,e.apikey=this.apiKey,e}fetch(t,e,r){return pe(this,void 0,void 0,function*(){const n=r?this.getPostUrl():this.getUrl(t,e),o=r?this.getPostData(t,e):null,a=t==="proxy"?Je:qn;this.emit("debug",{action:"request",request:n,provider:this});const d={url:n,throttleSlotInterval:1e3,throttleCallback:(l,p)=>(this.isCommunityResource()&&ue(),Promise.resolve(!0))};let i=null;o&&(d.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},i=Object.keys(o).map(l=>`${l}=${o[l]}`).join("&"));const u=yield Ue(d,i,a||Je);return this.emit("debug",{action:"response",request:n,response:ee(u),provider:this}),u})}detectNetwork(){return pe(this,void 0,void 0,function*(){return this.network})}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return pe(this,void 0,void 0,function*(){switch(t){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch(n=>Ie("sendTransaction",n,e.signedTransaction));case"getBlock":if(e.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.transactionHash});case"call":{if(e.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const n=Ge(e.transaction);n.module="proxy",n.action="eth_call";try{return yield this.fetch("proxy",n,!0)}catch(o){return Ie("call",o,e.transaction)}}case"estimateGas":{const n=Ge(e.transaction);n.module="proxy",n.action="eth_estimateGas";try{return yield this.fetch("proxy",n,!0)}catch(o){return Ie("estimateGas",o,e.transaction)}}case"getLogs":{const n={action:"getLogs"};if(e.filter.fromBlock&&(n.fromBlock=Ve(e.filter.fromBlock)),e.filter.toBlock&&(n.toBlock=Ve(e.filter.toBlock)),e.filter.address&&(n.address=e.filter.address),e.filter.topics&&e.filter.topics.length>0&&(e.filter.topics.length>1&&J.throwError("unsupported topic count",v.errors.UNSUPPORTED_OPERATION,{topics:e.filter.topics}),e.filter.topics.length===1)){const d=e.filter.topics[0];(typeof d!="string"||d.length!==66)&&J.throwError("unsupported topic format",v.errors.UNSUPPORTED_OPERATION,{topic0:d}),n.topic0=d}const o=yield this.fetch("logs",n);let a={};for(let d=0;d<o.length;d++){const i=o[d];if(i.blockHash==null){if(a[i.blockNumber]==null){const u=yield this.getBlock(i.blockNumber);u&&(a[i.blockNumber]=u.hash)}i.blockHash=a[i.blockNumber]}}return o}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,t,e)})}getHistory(t,e,r){return pe(this,void 0,void 0,function*(){const n={action:"txlist",address:yield this.resolveName(t),startblock:e??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",n)).map(a=>{["contractAddress","to"].forEach(function(i){a[i]==""&&delete a[i]}),a.creates==null&&a.contractAddress!=null&&(a.creates=a.contractAddress);const d=this.formatter.transactionResponse(a);return a.timeStamp&&(d.timestamp=parseInt(a.timeStamp)),d})})}isCommunityResource(){return this.apiKey===Ye}}var Ee=globalThis&&globalThis.__awaiter||function(s,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function d(l){try{u(r.next(l))}catch(p){a(p)}}function i(l){try{u(r.throw(l))}catch(p){a(p)}}function u(l){l.done?o(l.value):n(l.value).then(d,i)}u((r=r.apply(s,t||[])).next())})};const K=new v(L);function me(){return new Date().getTime()}function Ke(s){let t=null;for(let e=0;e<s.length;e++){const r=s[e];if(r==null)return null;t?t.name===r.name&&t.chainId===r.chainId&&(t.ensAddress===r.ensAddress||t.ensAddress==null&&r.ensAddress==null)||K.throwArgumentError("provider mismatch","networks",s):t=r}return t}function Ze(s,t){s=s.slice().sort();const e=Math.floor(s.length/2);if(s.length%2)return s[e];const r=s[e-1],n=s[e];return t!=null&&Math.abs(r-n)>t?null:(r+n)/2}function Q(s){if(s===null)return"null";if(typeof s=="number"||typeof s=="boolean")return JSON.stringify(s);if(typeof s=="string")return s;if(je.isBigNumber(s))return s.toString();if(Array.isArray(s))return JSON.stringify(s.map(t=>Q(t)));if(typeof s=="object"){const t=Object.keys(s);return t.sort(),"{"+t.map(e=>{let r=s[e];return typeof r=="function"?r="[function]":r=Q(r),JSON.stringify(e)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof s)}let Hn=1;function Xe(s){let t=null,e=null,r=new Promise(a=>{t=function(){e&&(clearTimeout(e),e=null),a()},e=setTimeout(t,s)});const n=a=>(r=r.then(a),r);function o(){return r}return{cancel:t,getPromise:o,wait:n}}const Ln=[v.errors.CALL_EXCEPTION,v.errors.INSUFFICIENT_FUNDS,v.errors.NONCE_EXPIRED,v.errors.REPLACEMENT_UNDERPRICED,v.errors.UNPREDICTABLE_GAS_LIMIT],Wn=["address","args","errorArgs","errorSignature","method","transaction"];function be(s,t){const e={weight:s.weight};return Object.defineProperty(e,"provider",{get:()=>s.provider}),s.start&&(e.start=s.start),t&&(e.duration=t-s.start),s.done&&(s.error?e.error=s.error:e.result=s.result||null),e}function zn(s,t){return function(e){const r={};e.forEach(o=>{const a=s(o.result);r[a]||(r[a]={count:0,result:o.result}),r[a].count++});const n=Object.keys(r);for(let o=0;o<n.length;o++){const a=r[n[o]];if(a.count>=t)return a.result}}}function Gn(s,t,e){let r=Q;switch(t){case"getBlockNumber":return function(n){const o=n.map(d=>d.result);let a=Ze(n.map(d=>d.result),2);if(a!=null)return a=Math.ceil(a),o.indexOf(a+1)>=0&&a++,a>=s._highestBlockNumber&&(s._highestBlockNumber=a),s._highestBlockNumber};case"getGasPrice":return function(n){const o=n.map(a=>a.result);return o.sort(),o[Math.floor(o.length/2)]};case"getEtherPrice":return function(n){return Ze(n.map(o=>o.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(n){return n==null?null:(n=te(n),n.confirmations=-1,Q(n))};break;case"getBlock":e.includeTransactions?r=function(n){return n==null?null:(n=te(n),n.transactions=n.transactions.map(o=>(o=te(o),o.confirmations=-1,o)),Q(n))}:r=function(n){return n==null?null:Q(n)};break;default:throw new Error("unknown method: "+t)}return zn(r,s.quorum)}function se(s,t){return Ee(this,void 0,void 0,function*(){const e=s.provider;return e.blockNumber!=null&&e.blockNumber>=t||t===-1?e:ot(()=>new Promise((r,n)=>{setTimeout(function(){return e.blockNumber>=t?r(e):s.cancelled?r(null):r(void 0)},0)}),{oncePoll:e})})}function Jn(s,t,e,r){return Ee(this,void 0,void 0,function*(){let n=s.provider;switch(e){case"getBlockNumber":case"getGasPrice":return n[e]();case"getEtherPrice":if(n.getEtherPrice)return n.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&G(r.blockTag)&&(n=yield se(s,t)),n[e](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&G(r.blockTag)&&(n=yield se(s,t)),n.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&G(r.blockTag)&&(n=yield se(s,t)),n[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&G(r.blockTag)&&(n=yield se(s,t)),n[e](r.transaction);case"getTransaction":case"getTransactionReceipt":return n[e](r.transactionHash);case"getLogs":{let o=r.filter;return(o.fromBlock&&G(o.fromBlock)||o.toBlock&&G(o.toBlock))&&(n=yield se(s,t)),n.getLogs(o)}}return K.throwError("unknown method error",v.errors.UNKNOWN_ERROR,{method:e,params:r})})}class mt extends De{constructor(t,e){t.length===0&&K.throwArgumentError("missing providers","providers",t);const r=t.map((a,d)=>{if(nt.isProvider(a)){const l=Ce(a)?2e3:750;return Object.freeze({provider:a,weight:1,stallTimeout:l,priority:1})}const i=te(a);i.priority==null&&(i.priority=1),i.stallTimeout==null&&(i.stallTimeout=Ce(a)?2e3:750),i.weight==null&&(i.weight=1);const u=i.weight;return(u%1||u>512||u<1)&&K.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${d}].weight`,u),Object.freeze(i)}),n=r.reduce((a,d)=>a+d.weight,0);e==null?e=n/2:e>n&&K.throwArgumentError("quorum will always fail; larger than total weight","quorum",e);let o=Ke(r.map(a=>a.provider.network));o==null&&(o=new Promise((a,d)=>{setTimeout(()=>{this.detectNetwork().then(a,d)},0)})),super(o),B(this,"providerConfigs",Object.freeze(r)),B(this,"quorum",e),this._highestBlockNumber=-1}detectNetwork(){return Ee(this,void 0,void 0,function*(){const t=yield Promise.all(this.providerConfigs.map(e=>e.provider.getNetwork()));return Ke(t)})}perform(t,e){return Ee(this,void 0,void 0,function*(){if(t==="sendTransaction"){const i=yield Promise.all(this.providerConfigs.map(u=>u.provider.sendTransaction(e.signedTransaction).then(l=>l.hash,l=>l)));for(let u=0;u<i.length;u++){const l=i[u];if(typeof l=="string")return l}throw i[0]}this._highestBlockNumber===-1&&t!=="getBlockNumber"&&(yield this.getBlockNumber());const r=Gn(this,t,e),n=st(this.providerConfigs.map(te));n.sort((i,u)=>i.priority-u.priority);const o=this._highestBlockNumber;let a=0,d=!0;for(;;){const i=me();let u=n.filter(c=>c.runner&&i-c.start<c.stallTimeout).reduce((c,m)=>c+m.weight,0);for(;u<this.quorum&&a<n.length;){const c=n[a++],m=Hn++;c.start=me(),c.staller=Xe(c.stallTimeout),c.staller.wait(()=>{c.staller=null}),c.runner=Jn(c,o,t,e).then(x=>{c.done=!0,c.result=x,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:m,backend:be(c,me()),request:{method:t,params:ee(e)},provider:this})},x=>{c.done=!0,c.error=x,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:m,backend:be(c,me()),request:{method:t,params:ee(e)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:m,backend:be(c,null),request:{method:t,params:ee(e)},provider:this}),u+=c.weight}const l=[];n.forEach(c=>{c.done||!c.runner||(l.push(c.runner),c.staller&&l.push(c.staller.getPromise()))}),l.length&&(yield Promise.race(l));const p=n.filter(c=>c.done&&c.error==null);if(p.length>=this.quorum){const c=r(p);if(c!==void 0)return n.forEach(m=>{m.staller&&m.staller.cancel(),m.cancelled=!0}),c;d||(yield Xe(100).getPromise()),d=!1}const $=n.reduce((c,m)=>{if(!m.done||m.error==null)return c;const x=m.error.code;return Ln.indexOf(x)>=0&&(c[x]||(c[x]={error:m.error,weight:0}),c[x].weight+=m.weight),c},{});if(Object.keys($).forEach(c=>{const m=$[c];if(m.weight<this.quorum)return;n.forEach(h=>{h.staller&&h.staller.cancel(),h.cancelled=!0});const x=m.error,S={};Wn.forEach(h=>{x[h]!=null&&(S[h]=x[h])}),K.throwError(x.reason||x.message,c,S)}),n.filter(c=>!c.done).length===0)break}return n.forEach(i=>{i.staller&&i.staller.cancel(),i.cancelled=!0}),K.throwError("failed to meet quorum",v.errors.SERVER_ERROR,{method:t,params:e,results:n.map(i=>be(i)),provider:this})})}}const bt=null,ye=new v(L),ie="84842078b09946638c03157f83405213";class vt extends Te{constructor(t,e){const r=new qe(t,e),n=r.connection;n.password&&ye.throwError("INFURA WebSocket project secrets unsupported",v.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const o=n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(o,t),B(this,"apiKey",r.projectId),B(this,"projectId",r.projectId),B(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===ie}}class qe extends W{static getWebSocketProvider(t,e){return new vt(t,e)}static getApiKey(t){const e={apiKey:ie,projectId:ie,projectSecret:null};return t==null||(typeof t=="string"?e.projectId=t:t.projectSecret!=null?(ye.assertArgument(typeof t.projectId=="string","projectSecret requires a projectId","projectId",t.projectId),ye.assertArgument(typeof t.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),e.projectId=t.projectId,e.projectSecret=t.projectSecret):t.projectId&&(e.projectId=t.projectId),e.apiKey=e.projectId),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"ropsten":r="ropsten.infura.io";break;case"rinkeby":r="rinkeby.infura.io";break;case"kovan":r="kovan.infura.io";break;case"goerli":r="goerli.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-kovan":r="optimism-kovan.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-rinkeby":r="arbitrum-rinkeby.infura.io";break;default:ye.throwError("unsupported network",v.errors.INVALID_ARGUMENT,{argument:"network",value:t})}const n={allowGzip:!0,url:"https://"+r+"/v3/"+e.projectId,throttleCallback:(o,a)=>(e.projectId===ie&&ue(),Promise.resolve(!0))};return e.projectSecret!=null&&(n.user="",n.password=e.projectSecret),n}isCommunityResource(){return this.projectId===ie}}class Vn extends re{send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const n={request:r,resolve:null,reject:null},o=new Promise((a,d)=>{n.resolve=a,n.reject=d});return this._pendingBatch.push(n),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const a=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const d=a.map(i=>i.request);return this.emit("debug",{action:"requestBatch",request:ee(d),provider:this}),Ue(this.connection,JSON.stringify(d)).then(i=>{this.emit("debug",{action:"response",request:d,response:i,provider:this}),a.forEach((u,l)=>{const p=i[l];if(p.error){const $=new Error(p.error.message);$.code=p.error.code,$.data=p.error.data,u.reject($)}else u.resolve(p.result)})},i=>{this.emit("debug",{action:"response",error:i,request:d,provider:this}),a.forEach(u=>{u.reject(i)})})},10)),o}}const $e=new v(L),Yn="ETHERS_JS_SHARED";class yt extends W{static getApiKey(t){return t&&typeof t!="string"&&$e.throwArgumentError("invalid apiKey","apiKey",t),t||Yn}static getUrl(t,e){$e.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(t.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:$e.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+e}}const Y=new v(L),Qe={homestead:"6004bcd10040261633ade990",ropsten:"6004bd4d0040261633ade991",rinkeby:"6004bda20040261633ade994",goerli:"6004bd860040261633ade992"};class wt extends W{constructor(t,e){if(e==null){const r=le(new.target,"getNetwork")(t);if(r){const n=Qe[r.name];n&&(e={applicationId:n,loadBalancer:!0})}e==null&&Y.throwError("unsupported network",v.errors.INVALID_ARGUMENT,{argument:"network",value:t})}super(t,e)}static getApiKey(t){t==null&&Y.throwArgumentError("PocketProvider.getApiKey does not support null apiKey","apiKey",t);const e={applicationId:null,loadBalancer:!1,applicationSecretKey:null};return typeof t=="string"?e.applicationId=t:t.applicationSecretKey!=null?(Y.assertArgument(typeof t.applicationId=="string","applicationSecretKey requires an applicationId","applicationId",t.applicationId),Y.assertArgument(typeof t.applicationSecretKey=="string","invalid applicationSecretKey","applicationSecretKey","[REDACTED]"),e.applicationId=t.applicationId,e.applicationSecretKey=t.applicationSecretKey,e.loadBalancer=!!t.loadBalancer):t.applicationId?(Y.assertArgument(typeof t.applicationId=="string","apiKey.applicationId must be a string","apiKey.applicationId",t.applicationId),e.applicationId=t.applicationId,e.loadBalancer=!!t.loadBalancer):Y.throwArgumentError("unsupported PocketProvider apiKey","apiKey",t),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"goerli":r="eth-goerli.gateway.pokt.network";break;default:Y.throwError("unsupported network",v.errors.INVALID_ARGUMENT,{argument:"network",value:t})}let n=null;e.loadBalancer?n=`https://${r}/v1/lb/${e.applicationId}`:n=`https://${r}/v1/${e.applicationId}`;const o={url:n};return o.headers={},e.applicationSecretKey!=null&&(o.user="",o.password=e.applicationSecretKey),o}isCommunityResource(){return this.applicationId===Qe[this.network.name]}}const et=new v(L);function _t(s,t){if(s==null&&(s="homestead"),typeof s=="string"){const r=s.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new re(s);case"ws":case"wss":return new Te(s);default:et.throwArgumentError("unsupported URL scheme","network",s)}}const e=at(s);return(!e||!e._defaultProvider)&&et.throwError("unsupported getDefaultProvider network",v.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:s}),e._defaultProvider({FallbackProvider:mt,AlchemyProvider:Fe,AnkrProvider:ft,CloudflareProvider:gt,EtherscanProvider:pt,InfuraProvider:qe,JsonRpcProvider:re,NodesmithProvider:yt,PocketProvider:wt,Web3Provider:it,IpcProvider:bt},t)}const Kn=Object.freeze(Object.defineProperty({__proto__:null,AlchemyProvider:Fe,AlchemyWebSocketProvider:ht,AnkrProvider:ft,BaseProvider:De,CloudflareProvider:gt,EtherscanProvider:pt,FallbackProvider:mt,Formatter:Dt,InfuraProvider:qe,InfuraWebSocketProvider:vt,IpcProvider:bt,JsonRpcBatchProvider:Vn,JsonRpcProvider:re,JsonRpcSigner:Ut,NodesmithProvider:yt,PocketProvider:wt,Provider:nt,Resolver:Mt,StaticJsonRpcProvider:dt,UrlJsonRpcProvider:W,Web3Provider:it,WebSocketProvider:Te,getDefaultProvider:_t,getNetwork:at,isCommunityResourcable:Ft,isCommunityResource:Ce,showThrottleMessage:ue},Symbol.toStringTag,{value:"Module"})),Zn=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:qt,ConstructorFragment:Ht,ErrorFragment:Lt,EventFragment:Wt,FormatTypes:zt,Fragment:Gt,FunctionFragment:Jt,HDNode:Vt,Indexed:Yt,Interface:Kt,LogDescription:Zt,Logger:v,ParamType:Xt,RLP:Qt,SigningKey:er,get SupportedAlgorithm(){return tr},TransactionDescription:rr,get TransactionTypes(){return nr},get UnicodeNormalizationForm(){return sr},Utf8ErrorFuncs:or,get Utf8ErrorReason(){return ar},_TypedDataEncoder:ir,_fetchData:lr,_toEscapedUtf8String:cr,accessListify:rt,arrayify:ur,base58:dr,base64:hr,checkProperties:fr,checkResultErrors:gr,commify:pr,computeAddress:mr,computeHmac:br,computePublicKey:vr,concat:yr,deepCopy:ee,defaultAbiCoder:wr,defaultPath:_r,defineReadOnly:B,dnsEncode:kr,entropyToMnemonic:Er,fetchJson:Ue,formatBytes32String:xr,formatEther:Sr,formatUnits:Tr,getAccountPath:Pr,getAddress:Ar,getContractAddress:Nr,getCreate2Address:Ir,getIcapAddress:$r,getJsonWalletAddress:Rr,getStatic:le,hashMessage:Cr,hexConcat:Or,hexDataLength:Br,hexDataSlice:jr,hexStripZeros:Dr,hexValue:tt,hexZeroPad:Ur,hexlify:Re,id:Mr,isAddress:Fr,isBytes:qr,isBytesLike:Hr,isHexString:G,isValidMnemonic:Lr,isValidName:Wr,joinSignature:zr,keccak256:Gr,mnemonicToEntropy:Jr,mnemonicToSeed:Vr,namehash:Yr,nameprep:Kr,parseBytes32String:Zr,parseEther:Xr,parseTransaction:Qr,parseUnits:en,poll:ot,randomBytes:tn,recoverAddress:rn,recoverPublicKey:nn,resolveProperties:sn,ripemd160:on,serializeTransaction:an,sha256:ln,sha512:cn,shallowCopy:te,shuffled:st,solidityKeccak256:un,solidityPack:dn,soliditySha256:hn,splitSignature:fn,stripZeros:gn,toUtf8Bytes:pn,toUtf8CodePoints:mn,toUtf8String:bn,verifyMessage:vn,verifyTypedData:yn,zeroPad:wn},Symbol.toStringTag,{value:"Module"})),kt="ethers/5.6.8",Xn=new v(kt),Et=Object.freeze(Object.defineProperty({__proto__:null,BaseContract:_n,BigNumber:je,Contract:lt,ContractFactory:kn,FixedNumber:En,Signer:xn,VoidSigner:Sn,Wallet:we,Wordlist:Tn,constants:Bn,get errors(){return Pn},getDefaultProvider:_t,logger:Xn,providers:Kn,utils:Zn,version:kt,wordlists:An},Symbol.toStringTag,{value:"Module"}));try{const s=window;s._ethers==null&&(s._ethers=Et)}catch{}var xt={exports:{}};(function(s,t){(function(e,r){s.exports=r()})(Nn,function(){var e,r,n=1e3,o=6e4,a=36e5,d=864e5,i=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,l=2592e6,p=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,$={years:u,months:l,days:d,hours:a,minutes:o,seconds:n,milliseconds:1,weeks:6048e5},c=function(E){return E instanceof T},m=function(E,g,f){return new T(E,f,g.$l)},x=function(E){return r.p(E)+"s"},S=function(E){return E<0},h=function(E){return S(E)?Math.ceil(E):Math.floor(E)},k=function(E){return Math.abs(E)},A=function(E,g){return E?S(E)?{negative:!0,format:""+k(E)+g}:{negative:!1,format:""+E+g}:{negative:!1,format:""}},T=function(){function E(f,b,O){var R=this;if(this.$d={},this.$l=O,f===void 0&&(this.$ms=0,this.parseFromMilliseconds()),b)return m(f*$[x(b)],this);if(typeof f=="number")return this.$ms=f,this.parseFromMilliseconds(),this;if(typeof f=="object")return Object.keys(f).forEach(function(z){R.$d[x(z)]=f[z]}),this.calMilliseconds(),this;if(typeof f=="string"){var U=f.match(p);if(U){var F=U.slice(2).map(function(z){return z!=null?Number(z):0});return this.$d.years=F[0],this.$d.months=F[1],this.$d.weeks=F[2],this.$d.days=F[3],this.$d.hours=F[4],this.$d.minutes=F[5],this.$d.seconds=F[6],this.calMilliseconds(),this}}return this}var g=E.prototype;return g.calMilliseconds=function(){var f=this;this.$ms=Object.keys(this.$d).reduce(function(b,O){return b+(f.$d[O]||0)*$[O]},0)},g.parseFromMilliseconds=function(){var f=this.$ms;this.$d.years=h(f/u),f%=u,this.$d.months=h(f/l),f%=l,this.$d.days=h(f/d),f%=d,this.$d.hours=h(f/a),f%=a,this.$d.minutes=h(f/o),f%=o,this.$d.seconds=h(f/n),f%=n,this.$d.milliseconds=f},g.toISOString=function(){var f=A(this.$d.years,"Y"),b=A(this.$d.months,"M"),O=+this.$d.days||0;this.$d.weeks&&(O+=7*this.$d.weeks);var R=A(O,"D"),U=A(this.$d.hours,"H"),F=A(this.$d.minutes,"M"),z=this.$d.seconds||0;this.$d.milliseconds&&(z+=this.$d.milliseconds/1e3);var Pe=A(z,"S"),St=f.negative||b.negative||R.negative||U.negative||F.negative||Pe.negative,Tt=U.format||F.format||Pe.format?"T":"",Ae=(St?"-":"")+"P"+f.format+b.format+R.format+Tt+U.format+F.format+Pe.format;return Ae==="P"||Ae==="-P"?"P0D":Ae},g.toJSON=function(){return this.toISOString()},g.format=function(f){var b=f||"YYYY-MM-DDTHH:mm:ss",O={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return b.replace(i,function(R,U){return U||String(O[R])})},g.as=function(f){return this.$ms/$[x(f)]},g.get=function(f){var b=this.$ms,O=x(f);return O==="milliseconds"?b%=1e3:b=O==="weeks"?h(b/$[O]):this.$d[O],b===0?0:b},g.add=function(f,b,O){var R;return R=b?f*$[x(b)]:c(f)?f.$ms:m(f,this).$ms,m(this.$ms+R*(O?-1:1),this)},g.subtract=function(f,b){return this.add(f,b,!0)},g.locale=function(f){var b=this.clone();return b.$l=f,b},g.clone=function(){return m(this.$ms,this)},g.humanize=function(f){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!f)},g.milliseconds=function(){return this.get("milliseconds")},g.asMilliseconds=function(){return this.as("milliseconds")},g.seconds=function(){return this.get("seconds")},g.asSeconds=function(){return this.as("seconds")},g.minutes=function(){return this.get("minutes")},g.asMinutes=function(){return this.as("minutes")},g.hours=function(){return this.get("hours")},g.asHours=function(){return this.as("hours")},g.days=function(){return this.get("days")},g.asDays=function(){return this.as("days")},g.weeks=function(){return this.get("weeks")},g.asWeeks=function(){return this.as("weeks")},g.months=function(){return this.get("months")},g.asMonths=function(){return this.as("months")},g.years=function(){return this.get("years")},g.asYears=function(){return this.as("years")},E}();return function(E,g,f){e=f,r=f().$utils(),f.duration=function(R,U){var F=f.locale();return m(R,{$l:F},U)},f.isDuration=c;var b=g.prototype.add,O=g.prototype.subtract;g.prototype.add=function(R,U){return c(R)&&(R=R.asMilliseconds()),b.bind(this)(R,U)},g.prototype.subtract=function(R,U){return c(R)&&(R=R.asMilliseconds()),O.bind(this)(R,U)}}})})(xt);var Qn=xt.exports;const es=In(Qn),ts={class:"mr-1"},rs={class:"text-gray-500 text-sm"},ns={class:"text-gray-500 text-sm ml-1"},ss={key:0},os={key:1},xe=de({__name:"DragonNft",props:{dragon:{},isShowTransfer:{type:Boolean}},emits:["onRefresh"],setup(s,{emit:t}){const{dragon:e,isShowTransfer:r=!0}=s,n=he(),o=M(!1),a=M(""),d=()=>{o.value=!0},i=M(!1),u=M([{text:"",value:"",disabled:!0}]),l=()=>{let c=[];for(let m=0;m<n.address.length;m++){let x=n.address[m].nickname+" "+$n(n.address[m].address),S=n.address[m].address,h=!1;m==n.changeAddressIndex&&(h=!0,x+=" <发送地址>"),c.push({text:x,value:S,disabled:h})}u.value=c,i.value=!0},p=({selectedValues:c})=>{a.value=c[0],i.value=!1},$=async()=>{Se({duration:0,message:"操作执行中"});try{let c=n.address[n.changeAddressIndex].address,m=n.address[n.changeAddressIndex].key,x=new we(m,Oe);await(await new lt(He.address,He.abi,x).safeTransferFrom(c,a.value,e.id,"0x00")).wait()}catch(c){ne(),Be(c.toString()),console.log("Error!"),await ke(2e3)}await ke(1e3),t("onRefresh")};return(c,m)=>{const x=I("van-tag"),S=I("van-count-down"),h=I("van-button"),k=I("van-cell"),A=I("van-field"),T=I("van-cell-group"),E=I("van-dialog"),g=I("van-picker"),f=I("van-popup");return P(),D(V,null,[_("div",{class:oe(["rounded-lg shadow-lg max-w-sm p-1 border-1 text-center","border-"+C(X).find(b=>b.quality==c.dragon.level).color+"-500"])},[_("div",null,[_("span",ts,N(c.dragon.name),1),w(x,{plain:"",color:C(X).find(b=>b.quality==c.dragon.level).rgb},{default:y(()=>[j(N(C(X).find(b=>b.quality==c.dragon.level).name),1)]),_:1},8,["color"])]),_("div",rs,"#"+N(c.dragon.id),1),_("div",null,[(P(!0),D(V,null,_e(c.dragon.elements,(b,O)=>(P(),H(x,{class:"mr-1",plain:"",key:O},{default:y(()=>[j(N(C(ct)[b]),1)]),_:2},1024))),128)),_("span",ns,N(c.dragon.attrs[6])+"/7",1)]),c.dragon.diffTimeStamp>0?(P(),D("div",ss,[w(S,{class:"text-xs",time:c.dragon.diffTimeStamp,format:"DD 天 HH 时 mm 分 ss 秒"},null,8,["time"])])):q("",!0),c.dragon.state==0&&c.isShowTransfer?(P(),D("div",os,[w(h,{plain:"",type:"default",size:"small",class:"m-2",onClick:m[0]||(m[0]=b=>d())},{default:y(()=>[j(" 转账 ")]),_:1}),c.dragon.hatch_id!=0?(P(),H(x,{key:0,type:"primary"},{default:y(()=>[j("待抽券")]),_:1})):q("",!0)])):q("",!0),_("div",null,[c.dragon.state==1?(P(),H(x,{key:0,type:"warning"},{default:y(()=>[j("繁殖中")]),_:1})):q("",!0)]),_("div",null,[c.dragon.state==2?(P(),H(x,{key:0,type:"primary"},{default:y(()=>[j("孵化蛋")]),_:1})):q("",!0)])],2),w(E,{show:o.value,"onUpdate:show":m[2]||(m[2]=b=>o.value=b),title:"转账","show-cancel-button":"",onConfirm:$},{default:y(()=>[w(T,{inset:""},{default:y(()=>[w(k,{title:"发送昵称",value:C(n).address[C(n).changeAddressIndex].nickname},null,8,["value"]),w(k,{title:"发送地址",value:C(n).address[C(n).changeAddressIndex].address},null,8,["value"]),w(k,{title:"NFT"},{"right-icon":y(()=>[_("div",null,[j(N(c.dragon.name)+" id:"+N(c.dragon.id)+" ",1),w(x,{plain:"",color:C(X).find(b=>b.quality==c.dragon.level).rgb},{default:y(()=>[j(N(C(X).find(b=>b.quality==c.dragon.level).name),1)]),_:1},8,["color"]),j(" "+N(c.dragon.attrs[6])+"/7 ",1)])]),_:1}),w(A,{modelValue:a.value,"onUpdate:modelValue":m[1]||(m[1]=b=>a.value=b),label:"接受地址"},{button:y(()=>[w(h,{size:"small",type:"primary",onClick:l},{default:y(()=>[j("选择")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["show"]),w(f,{show:i.value,"onUpdate:show":m[4]||(m[4]=b=>i.value=b),round:"",position:"bottom",teleport:"body"},{default:y(()=>[w(g,{columns:u.value,onCancel:m[3]||(m[3]=b=>i.value=!1),onConfirm:p,onClickOption:p},null,8,["columns"])]),_:1},8,["show"])],64)}}}),as={key:0},is={class:"m-2 text-center"},ls={class:"m-2 text-gray-500 text-center text-sm"},cs={class:"text-gray-800"},us={class:"text-gray-400 ml-1 text-xs"},ds={class:"mt-4 mb-2 text-center"},hs=de({__name:"DragonBreed",props:{dragons:{}},emits:["onRefresh"],setup(s,{emit:t}){const e=s,r=he(),n=M(!1),o=M(0),a=M({fa_level:1,ma_level:1,level_1:70,level_2:30,level_3:0,level_4:0}),d=M([{name:"没有可选择的Dragon",disabled:!0,index:-1}]),i=M([-1,-1]),u=M(0),l=()=>{let S=[];for(let h=0;h<e.dragons.length;h++){let k="";for(let g=0;g<e.dragons[h].elements.length;g++)k=k+" "+ct[e.dragons[h].elements[g]];let A=X.find(g=>g.quality==e.dragons[h].level).name+" "+e.dragons[h].name+" "+e.dragons[h].attrs[6]+"/7 "+k,T=!1;(h==i.value[0]||h==i.value[1])&&(T=!0,A+=" <已选>");let E=-1;if(i.value[0]>-1&&(E=i.value[0]),i.value[1]>-1&&(E=i.value[1]),E>-1&&E!=h){let g=e.dragons[E];(e.dragons[h].attrs[8]==g.id||e.dragons[h].attrs[9]==g.id)&&(T=!0,A+=" <父母>"),(e.dragons[h].attrs[8]==g.attrs[8]||e.dragons[h].attrs[8]==g.attrs[9]||e.dragons[h].attrs[9]==g.attrs[8]||e.dragons[h].attrs[9]==g.attrs[9])&&(T=!0,A+=" <同代>")}S.push({name:A,disabled:T,index:h})}e.dragons.length>0?d.value=S:d.value=[{name:"没有可选择的Dragon",disabled:!0,index:-1}]},p=S=>{u.value=S,l(),n.value=!0},$=async S=>{if(i.value[u.value]=S.index,i.value[0]>-1&&i.value[1]>-1){let h=e.dragons[i.value[0]].level,k=e.dragons[i.value[1]].level,A=Le.find(T=>T.fa_level==h&&T.ma_level==k);A||(A=Le.find(T=>T.fa_level==k&&T.ma_level==h)),console.log("res_chance",A),A&&(a.value=A),await c()}},c=async()=>{o.value=0;let S=e.dragons[i.value[0]].level,h=e.dragons[i.value[1]].level,k=e.dragons[i.value[0]].attrs[6],A=e.dragons[i.value[1]].attrs[6],T="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",E=await Z.getBreedPrice(S,h,k,A,T);o.value=E},m=async()=>{const S=Se({duration:0,message:"操作执行中"});let h=r.address[r.changeAddressIndex],k=await Z.getSuggestIndex(h.address);if(console.log("suggestIndex",k.toString()),k=="255"){ne(),Be("超出单账号同时繁殖数量！");return}let A=e.dragons[i.value[0]].id,T=e.dragons[i.value[1]].id,E="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",g=o.value,f=new we(h.key,Oe);try{S.message="开始执行繁殖...",await(await Z.connect(f).beginBreed(A,T,k,E,g,{value:g})).wait()}catch(b){ne(),Be(b.toString()),console.log(b),await ke(2e3);return}S.message="开始执行孵化...",await x(),i.value=[-1,-1],t("onRefresh")},x=async()=>{let S=r.address[r.changeAddressIndex],h=await Z.getHatchData(S.address);for(console.log("hatchData",h.toString());!(h.status=="1"&&h.bHash!=="0x0000000000000000000000000000000000000000000000000000000000000000");)console.log("不符合孵化条件，5秒后再次检测"),await ke(5e3),h=await Z.getHatchData(S.address);console.log("do end breed!");let k=new we(S.key,Oe);await Z.connect(k).endBreed()};return Me(()=>{l()}),(S,h)=>{const k=I("van-grid-item"),A=I("van-grid"),T=I("van-button"),E=I("van-cell-group"),g=I("van-action-sheet");return P(),D(V,null,[w(E,{inset:""},{default:y(()=>[w(A,{"column-num":3,class:"pt-5 pb-2"},{default:y(()=>[i.value[0]==-1?(P(),H(k,{key:0,class:"rounded-lg max-w-sm p-1 border-2 text-center",icon:"plus",text:"添加",onClick:h[0]||(h[0]=f=>p(0))})):q("",!0),i.value[0]>=0?(P(),H(k,{key:1,onClick:h[2]||(h[2]=f=>p(0))},{default:y(()=>[w(xe,{dragon:e.dragons[i.value[0]],isShowTransfer:!1,onOnRefresh:h[1]||(h[1]=()=>{})},null,8,["dragon"])]),_:1})):q("",!0),w(k,{icon:"like-o",class:"text-gray-400"}),i.value[1]==-1?(P(),H(k,{key:2,class:"rounded-lg max-w-sm p-1 border-2 text-center",icon:"plus",text:"添加",onClick:h[3]||(h[3]=f=>p(1))})):q("",!0),i.value[1]>=0?(P(),H(k,{key:3,onClick:h[5]||(h[5]=f=>p(1))},{default:y(()=>[w(xe,{dragon:e.dragons[i.value[1]],isShowTransfer:!1,onOnRefresh:h[4]||(h[4]=()=>{})},null,8,["dragon"])]),_:1})):q("",!0)]),_:1}),i.value[0]>-1&&i.value[1]>-1?(P(),D("div",as,[_("div",is,[_("span",{class:oe(["text-sm mr-1","text-gray-500"])},"普通 "+N(a.value.level_1.toFixed(1))+"%",1),_("span",{class:oe(["text-sm mr-1","text-green-500"])},"良好 "+N(a.value.level_2.toFixed(1))+"%",1),_("span",{class:oe(["text-sm mr-1","text-blue-500"])},"稀有 "+N(a.value.level_3.toFixed(1))+"%",1),_("span",{class:oe(["text-sm mr-1","text-fuchsia-500"])},"史诗 "+N(a.value.level_4.toFixed(1))+"%",1)]),_("div",ls,[j(" 费用："),_("span",cs,N(parseFloat(C(Et).utils.formatUnits(o.value,"ether")).toFixed(5)),1),j("ETH "),_("span",us,"账号余额："+N(C(r).balances.eth.toFixed(5))+"ETH",1)]),_("div",ds,[w(T,{type:"primary",onClick:m,disabled:!(o.value>0)},{default:y(()=>[j("繁殖")]),_:1},8,["disabled"])])])):q("",!0)]),_:1}),w(g,{show:n.value,"onUpdate:show":h[6]||(h[6]=f=>n.value=f),actions:d.value,title:"选择MoDragon","close-on-click-action":"",onSelect:$,teleport:"body"},null,8,["show","actions"])],64)}}}),fs={key:0},gs={key:1},ps={class:"text-gray-800"},ms=_("span",{class:"text-xs text-gray-500"},"MoDragon",-1),bs=_("span",{class:"text-xs text-gray-500"},"ETH",-1),vs=_("span",{class:"text-xs text-gray-500"},"ARB",-1),ys=_("span",{class:"text-xs text-gray-500"},"MBOX",-1),ws={class:"m-2"},_s={class:"text-lg text-gray-500 ml-3"},ks={class:"grid grid-cols-3 md:lg:xl:grid-cols-6 group bg-white shadow-xl shadow-neutral-100 border"},Es=_("div",{class:"m-2"},[_("span",{class:"text-lg text-gray-500 ml-3"},"繁殖操作")],-1),xs={class:"m-2"},Ss={class:"text-lg text-gray-500 ml-3"},Ts={class:"grid grid-cols-3 md:lg:xl:grid-cols-6 group bg-white shadow-xl shadow-neutral-100 border"},Ps=de({__name:"account",setup(s){ut.extend(es);const{onActivated:t}=Rn(),e=he(),r=M([]),n=M([]);Cn(()=>[e.address,e.changeAddressIndex],async(a,d)=>{await o(),await e.getChangeAddressBalance()}),t(async({address:a})=>{await o(),await e.getChangeAddressBalance()}),Me(async()=>{await o(),await e.getChangeAddressBalance()});async function o(){if(Se({duration:0,forbidClick:!0,message:"更新数据"}),e.address.length==0||e.changeAddressIndex<0){ne();return}let a=await e.upOneAddressNft(e.changeAddressIndex);r.value=a.nfts,n.value=a.nfts.filter(d=>d.state==0&&d.hatch_id==0),ne()}return(a,d)=>{const i=I("van-empty"),u=I("van-grid-item"),l=I("van-grid");return P(),D(V,null,[r.value.length==0?(P(),D("div",fs,[w(i,{image:"search",description:"没有发现龙蛋NFT"})])):q("",!0),r.value.length>0?(P(),D("div",gs,[w(l,{class:"m-2","column-num":4},{default:y(()=>[w(u,null,{icon:y(()=>[_("span",ps,N(r.value.length),1)]),text:y(()=>[ms]),_:1}),w(u,null,{icon:y(()=>[_("span",null,N(C(e).balances.eth.toFixed(2)),1)]),text:y(()=>[bs]),_:1}),w(u,null,{icon:y(()=>[_("span",null,N(C(e).balances.arb.toFixed(0)),1)]),text:y(()=>[vs]),_:1}),w(u,null,{icon:y(()=>[_("span",null,N(C(e).balances.mbox.toFixed(0)),1)]),text:y(()=>[ys]),_:1})]),_:1}),_("div",ws,[_("span",_s,"空闲状态: "+N(r.value.filter(p=>p.state==0).length),1)]),_("div",ks,[(P(!0),D(V,null,_e(r.value.filter(p=>p.state==0),(p,$)=>(P(),D("div",{key:"dragon0"+$+p.id,class:"m-3"},[w(xe,{dragon:p,isShowTransfer:!0,onOnRefresh:o},null,8,["dragon"])]))),128))]),Es,(P(),H(hs,{dragons:n.value,key:C(e).address[C(e).changeAddressIndex].address,onOnRefresh:o},null,8,["dragons"])),_("div",xs,[_("span",Ss,"繁殖状态: "+N(r.value.filter(p=>p.state>0).length),1)]),_("div",Ts,[(P(!0),D(V,null,_e(r.value.filter(p=>p.state>0),(p,$)=>(P(),D("div",{key:"dragon"+$,class:"m-3"},[w(xe,{dragon:p,isShowTransfer:!1,onOnRefresh:o},null,8,["dragon"])]))),128))])])):q("",!0)],64)}}}),As={key:0},Ns={class:"text-gray-600 text-sm ml-1"},Is=_("span",null,null,-1),$s=_("span",{class:"ml-5 text-gray-500"},"最近一次繁殖结束： ",-1),Rs={key:1},Cs=de({__name:"collect",setup(s){const t=he(),e=M(!1),r=M(0),n=[{text:"空闲数量降序",value:0},{text:"孵蛋时间降序",value:1},{text:"账号顺序降序",value:2}],o=()=>{switch(console.log(r.value),r.value){case 0:t.nftinfos.sort((i,u)=>u.nfts.filter(l=>l.state==0).length-i.nfts.filter(l=>l.state==0).length);break;case 1:t.nftinfos.sort((i,u)=>i.nfts.findIndex(l=>l.state>0)==-1?1:u.nfts.findIndex(l=>l.state>0)==-1?-1:i.nfts.find(l=>l.state>0).attrs[7]-u.nfts.find(l=>l.state>0).attrs[7]);break;case 2:t.nftinfos.sort((i,u)=>i.id-u.id);break}};Me(async()=>{await a()});const a=async()=>{Se({duration:0,forbidClick:!0,message:"更新数据"}),e.value=!0,await t.upAllAddressNfts(),o(),e.value=!1,console.log("更新状态"),ne()},d={dropdownMenuHeight:"36px"};return(i,u)=>{const l=I("van-button"),p=I("van-dropdown-item"),$=I("van-dropdown-menu"),c=I("van-config-provider"),m=I("van-cell"),x=I("van-tag"),S=I("van-cell-group"),h=I("van-empty");return C(t).address.length>0?(P(),D("div",As,[w(S,{class:"my-2",inset:""},{default:y(()=>[w(m,{title:"各账号详情",icon:"user-o"},{value:y(()=>[w(l,{type:"success",size:"mini",class:"mr-2",loading:e.value,"loading-text":"读取中",onClick:a},{default:y(()=>[j(" 更新数据 ")]),_:1},8,["loading"])]),extra:y(()=>[w(c,{"theme-vars":d},{default:y(()=>[w($,null,{default:y(()=>[w(p,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=k=>r.value=k),options:n,onChange:o},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(P(!0),D(V,null,_e(C(t).nftinfos,(k,A)=>(P(),D(V,{key:A+k.address},[w(m,null,{title:y(()=>[w(x,{round:"",plain:"",type:"primary"},{default:y(()=>[j(N(k.id+1),1)]),_:2},1024),_("span",Ns,N(k.nickname),1),Is]),value:y(()=>[j(" 空闲:"+N(k.nfts.filter(T=>T.state==0).length)+"/繁殖:"+N(k.nfts.filter(T=>T.state>0).length),1)]),_:2},1024),k.nfts.findIndex(T=>T.state>0)!=-1?(P(),H(m,{key:0},{title:y(()=>[$s]),value:y(()=>[j(N(C(ut).unix(k.nfts.find(T=>T.state>0).attrs[7]).format("MM/DDTHH:mm")),1)]),_:2},1024)):q("",!0)],64))),128))]),_:1})])):(P(),D("div",Rs,[w(h,{description:"账号数量为空"})]))}}}),Bs=de({__name:"index",setup(s){const t=he();return(e,r)=>C(t).changeAddressIndex>=0?(P(),H(Ps,{key:0})):(P(),H(Cs,{key:1}))}});export{Bs as default};
